var LS=Object.defineProperty,US=Object.defineProperties;var jS=Object.getOwnPropertyDescriptors;var c_=Object.getOwnPropertySymbols;var BS=Object.prototype.hasOwnProperty,$S=Object.prototype.propertyIsEnumerable;var u_=(t,e,n)=>e in t?LS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,T=(t,e)=>{for(var n in e||={})BS.call(e,n)&&u_(t,n,e[n]);if(c_)for(var n of c_(e))$S.call(e,n)&&u_(t,n,e[n]);return t},ae=(t,e)=>US(t,jS(e));var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var l_=null;var Xd=1,eh=Symbol("SIGNAL");function te(t){let e=l_;return l_=t,e}var d_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function HS(t){if(!(rh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Xd)){if(!t.producerMustRecompute(t)&&!th(t)){t.dirty=!1,t.lastCleanEpoch=Xd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Xd}}function h_(t){return t&&(t.nextProducerIndex=0),te(t)}function f_(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(rh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)nh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function th(t){qa(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(HS(n),r!==n.version))return!0}return!1}function p_(t){if(qa(t),rh(t))for(let e=0;e<t.producerNode.length;e++)nh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function nh(t,e){if(qS(t),qa(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)nh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];qa(i),i.producerIndexOfThis[r]=e}}function rh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function qa(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function qS(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function GS(){throw new Error}var zS=GS;function g_(t){zS=t}function F(t){return typeof t=="function"}function gi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ga=gi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ir(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var we=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(F(r))try{r()}catch(s){e=s instanceof Ga?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{m_(s)}catch(o){e=e??[],o instanceof Ga?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ga(e)}}add(e){var n;if(e&&e!==this)if(this.closed)m_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ir(n,e)}remove(e){let{_finalizers:n}=this;n&&Ir(n,e),e instanceof t&&e._removeParent(this)}};we.EMPTY=(()=>{let t=new we;return t.closed=!0,t})();var ih=we.EMPTY;function za(t){return t instanceof we||t&&"closed"in t&&F(t.remove)&&F(t.add)&&F(t.unsubscribe)}function m_(t){F(t)?t():t.unsubscribe()}var xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mi={setTimeout(t,e,...n){let{delegate:r}=mi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=mi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wa(t){mi.setTimeout(()=>{let{onUnhandledError:e}=xt;if(e)e(t);else throw t})}function js(){}var y_=sh("C",void 0,void 0);function v_(t){return sh("E",void 0,t)}function __(t){return sh("N",t,void 0)}function sh(t,e,n){return{kind:t,value:e,error:n}}var wr=null;function yi(t){if(xt.useDeprecatedSynchronousErrorHandling){let e=!wr;if(e&&(wr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=wr;if(wr=null,n)throw r}}else t()}function I_(t){xt.useDeprecatedSynchronousErrorHandling&&wr&&(wr.errorThrown=!0,wr.error=t)}var Er=class extends we{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,za(e)&&e.add(this)):this.destination=QS}static create(e,n,r){return new vi(e,n,r)}next(e){this.isStopped?ah(__(e),this):this._next(e)}error(e){this.isStopped?ah(v_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ah(y_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},WS=Function.prototype.bind;function oh(t,e){return WS.call(t,e)}var ch=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ka(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ka(r)}else Ka(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ka(n)}}},vi=class extends Er{constructor(e,n,r){super();let i;if(F(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&oh(e.next,s),error:e.error&&oh(e.error,s),complete:e.complete&&oh(e.complete,s)}):i=e}this.destination=new ch(i)}};function Ka(t){xt.useDeprecatedSynchronousErrorHandling?I_(t):Wa(t)}function KS(t){throw t}function ah(t,e){let{onStoppedNotification:n}=xt;n&&mi.setTimeout(()=>n(t,e))}var QS={closed:!0,next:js,error:KS,complete:js};var _i=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Xe(t){return t}function Qa(...t){return uh(t)}function uh(t){return t.length===0?Xe:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=JS(n)?n:new vi(n,r,i);return yi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=w_(r),new r((i,s)=>{let o=new vi({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[_i](){return this}pipe(...n){return uh(n)(this)}toPromise(n){return n=w_(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function w_(t){var e;return(e=t??xt.Promise)!==null&&e!==void 0?e:Promise}function YS(t){return t&&F(t.next)&&F(t.error)&&F(t.complete)}function JS(t){return t&&t instanceof Er||YS(t)&&za(t)}function lh(t){return F(t?.lift)}function $(t){return e=>{if(lh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function j(t,e,n,r,i){return new dh(t,e,n,r,i)}var dh=class extends Er{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ii(){return $((t,e)=>{let n=null;t._refCount++;let r=j(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var wi=class extends z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,lh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new we;let n=this.getSubject();e.add(this.source.subscribe(j(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=we.EMPTY)}return e}refCount(){return Ii()(this)}};var E_=gi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var it=(()=>{class t extends z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ya(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new E_}next(n){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ih:(this.currentObservers=null,s.push(n),new we(()=>{this.currentObservers=null,Ir(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new z;return n.source=this,n}}return t.create=(e,n)=>new Ya(e,n),t})(),Ya=class extends it{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ih}};var je=class extends it{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hh={now(){return(hh.delegate||Date).now()},delegate:void 0};var Ja=class extends we{constructor(e,n){super()}schedule(e,n=0){return this}};var Bs={setInterval(t,e,...n){let{delegate:r}=Bs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Bs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ei=class extends Ja{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Bs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Bs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ir(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Di=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Di.now=hh.now;var Ti=class extends Di{constructor(e,n=Di.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var $s=new Ti(Ei);var Za=class extends Ei{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Xa=class extends Ti{};var fh=new Xa(Za);var yt=new z(t=>t.complete());function D_(t){return t&&F(t.schedule)}function T_(t){return t[t.length-1]}function ec(t){return F(T_(t))?t.pop():void 0}function Hn(t){return D_(T_(t))?t.pop():void 0}function ph(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function b_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function C_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dr(t){return this instanceof Dr?(this.v=t,this):new Dr(t)}function S_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(m,v){s.push([h,f,m,v])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(m){d(s[0][3],m)}}function c(h){h.value instanceof Dr?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function A_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof C_=="function"?C_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var tc=t=>t&&typeof t.length=="number"&&typeof t!="function";function nc(t){return F(t?.then)}function rc(t){return F(t[_i])}function ic(t){return Symbol.asyncIterator&&F(t?.[Symbol.asyncIterator])}function sc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ZS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oc=ZS();function ac(t){return F(t?.[oc])}function cc(t){return S_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Dr(n.read());if(i)return yield Dr(void 0);yield yield Dr(r)}}finally{n.releaseLock()}})}function uc(t){return F(t?.getReader)}function Ee(t){if(t instanceof z)return t;if(t!=null){if(rc(t))return XS(t);if(tc(t))return eA(t);if(nc(t))return tA(t);if(ic(t))return R_(t);if(ac(t))return nA(t);if(uc(t))return rA(t)}throw sc(t)}function XS(t){return new z(e=>{let n=t[_i]();if(F(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eA(t){return new z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function tA(t){return new z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wa)})}function nA(t){return new z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function R_(t){return new z(e=>{iA(t,e).catch(n=>e.error(n))})}function rA(t){return R_(cc(t))}function iA(t,e){var n,r,i,s;return b_(this,void 0,void 0,function*(){try{for(n=A_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function st(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function qn(t,e=0){return $((n,r)=>{n.subscribe(j(r,i=>st(r,t,()=>r.next(i),e),()=>st(r,t,()=>r.complete(),e),i=>st(r,t,()=>r.error(i),e)))})}function Gn(t,e=0){return $((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function M_(t,e){return Ee(t).pipe(Gn(e),qn(e))}function N_(t,e){return Ee(t).pipe(Gn(e),qn(e))}function x_(t,e){return new z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function P_(t,e){return new z(n=>{let r;return st(n,e,()=>{r=t[oc](),st(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>F(r?.return)&&r.return()})}function lc(t,e){if(!t)throw new Error("Iterable cannot be null");return new z(n=>{st(n,e,()=>{let r=t[Symbol.asyncIterator]();st(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function O_(t,e){return lc(cc(t),e)}function k_(t,e){if(t!=null){if(rc(t))return M_(t,e);if(tc(t))return x_(t,e);if(nc(t))return N_(t,e);if(ic(t))return lc(t,e);if(ac(t))return P_(t,e);if(uc(t))return O_(t,e)}throw sc(t)}function ge(t,e){return e?k_(t,e):Ee(t)}function x(...t){let e=Hn(t);return ge(t,e)}function Ci(t,e){let n=F(t)?t:()=>t,r=i=>i.error(n());return new z(e?i=>e.schedule(r,0,i):r)}function gh(t){return!!t&&(t instanceof z||F(t.lift)&&F(t.subscribe))}var Dn=gi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function B(t,e){return $((n,r)=>{let i=0;n.subscribe(j(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:sA}=Array;function oA(t,e){return sA(e)?t(...e):t(e)}function dc(t){return B(e=>oA(t,e))}var{isArray:aA}=Array,{getPrototypeOf:cA,prototype:uA,keys:lA}=Object;function hc(t){if(t.length===1){let e=t[0];if(aA(e))return{args:e,keys:null};if(dA(e)){let n=lA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function dA(t){return t&&typeof t=="object"&&cA(t)===uA}function fc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Hs(...t){let e=Hn(t),n=ec(t),{args:r,keys:i}=hc(t);if(r.length===0)return ge([],e);let s=new z(hA(r,e,i?o=>fc(i,o):Xe));return n?s.pipe(dc(n)):s}function hA(t,e,n=Xe){return r=>{F_(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)F_(e,()=>{let u=ge(t[c],e),l=!1;u.subscribe(j(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function F_(t,e,n){t?st(n,t,e):e()}function V_(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=v=>u<r?m(v):c.push(v),m=v=>{s&&e.next(v),u++;let _=!1;Ee(n(v,l++)).subscribe(j(e,C=>{i?.(C),s?f(C):e.next(C)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<r;){let C=c.shift();o?st(e,o,()=>m(C)):m(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(j(e,f,()=>{d=!0,h()})),()=>{a?.()}}function De(t,e,n=1/0){return F(e)?De((r,i)=>B((s,o)=>e(r,s,i,o))(Ee(t(r,i))),n):(typeof e=="number"&&(n=e),$((r,i)=>V_(r,i,t,n)))}function bi(t=1/0){return De(Xe,t)}function L_(){return bi(1)}function Si(...t){return L_()(ge(t,Hn(t)))}function pc(t){return new z(e=>{Ee(t()).subscribe(e)})}function mh(...t){let e=ec(t),{args:n,keys:r}=hc(t),i=new z(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let d=!1;Ee(n[l]).subscribe(j(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?fc(r,a):a),s.complete())}))}});return e?i.pipe(dc(e)):i}function Be(t,e){return $((n,r)=>{let i=0;n.subscribe(j(r,s=>t.call(e,s,i++)&&r.next(s)))})}function zn(t){return $((e,n)=>{let r=null,i=!1,s;r=e.subscribe(j(n,void 0,void 0,o=>{s=Ee(t(o,zn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function U_(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(j(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Tr(t,e){return F(e)?De(t,e,1):De(t,1)}function gc(t,e=$s){return $((n,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=s;s=null,r.next(u)}};function c(){let u=o+t,l=e.now();if(l<u){i=this.schedule(void 0,u-l),r.add(i);return}a()}n.subscribe(j(r,u=>{s=u,o=e.now(),i||(i=e.schedule(c,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Wn(t){return $((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Tn(t){return t<=0?()=>yt:$((e,n)=>{let r=0;e.subscribe(j(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function yh(t){return B(()=>t)}function qs(t,e=Xe){return t=t??fA,$((n,r)=>{let i,s=!0;n.subscribe(j(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function fA(t,e){return t===e}function mc(t=pA){return $((e,n)=>{let r=!1;e.subscribe(j(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function pA(){return new Dn}function Gs(t){return $((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Qt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,s)=>t(i,s,r)):Xe,Tn(1),n?Wn(e):mc(()=>new Dn))}function Ai(t){return t<=0?()=>yt:$((e,n)=>{let r=[];e.subscribe(j(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function vh(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,s)=>t(i,s,r)):Xe,Ai(1),n?Wn(e):mc(()=>new Dn))}function yc(t,e){return $(U_(t,e,arguments.length>=2,!0))}function vc(...t){let e=Hn(t);return $((n,r)=>{(e?Si(t,n,e):Si(t,n)).subscribe(r)})}function vt(t,e){return $((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(j(r,c=>{i?.unsubscribe();let u=0,l=s++;Ee(t(c,l)).subscribe(i=j(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function _h(t){return $((e,n)=>{Ee(t).subscribe(j(n,()=>n.complete(),js)),!n.closed&&e.subscribe(n)})}function Te(t,e,n){let r=F(t)||e||n?{next:t,error:e,complete:n}:t;return r?$((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(j(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Xe}var TI="https://g.co/ng/security#xss",b=class extends Error{constructor(e,n){super(Tf(e,n)),this.code=e}};function Tf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var Fh=class extends it{constructor(e=!1){super(),this.__isAsync=e}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Ih(s),i&&(i=Ih(i)),o&&(o=Ih(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof we&&e.add(a),a}};function Ih(t){return e=>{setTimeout(t,void 0,e)}}var Pe=Fh;var H=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(H||{});function ot(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(ot).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function j_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var CI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(CI||{}),Zt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Zt||{});function ro(t){return{toString:t}.toString()}var Cr=globalThis;var ki={},It=[];function ce(t){for(let e in t)if(t[e]===ce)return e;throw Error("Could not find renamed property on target object.")}function gA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var mA=ce({\u0275cmp:ce}),yA=ce({\u0275dir:ce}),vA=ce({\u0275pipe:ce}),_A=ce({\u0275mod:ce}),Ac=ce({\u0275fac:ce}),zs=ce({__NG_ELEMENT_ID__:ce}),B_=ce({__NG_ENV_ID__:ce}),ye=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ye||{});function bI(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Vh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];IA(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function SI(t){return t===3||t===4||t===6}function IA(t){return t.charCodeAt(0)===64}function Ws(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?$_(t,n,i,null,e[++r]):$_(t,n,i,null,null))}}return t}function $_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var AI="ng-template";function wA(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&bI(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function RI(t){return t.type===4&&t.value!==AI}function EA(t,e,n){let r=t.type===4&&!n?AI:t.value;return e===r}function DA(t,e,n){let r=4,i=t.attrs||[],s=bA(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pt(r)&&!Pt(c))return!1;if(o&&Pt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!EA(t,c,n)||c===""&&e.length===1){if(Pt(r))return!1;o=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!wA(t.attrs,u,n)){if(Pt(r))return!1;o=!0}continue}let l=r&8?"class":c,d=TA(l,i,RI(t),n);if(d===-1){if(Pt(r))return!1;o=!0;continue}if(u!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&bI(f,u,0)!==-1||r&2&&u!==h){if(Pt(r))return!1;o=!0}}}}return Pt(r)||o}function Pt(t){return(t&1)===0}function TA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return SA(e,t)}function CA(t,e,n=!1){for(let r=0;r<e.length;r++)if(DA(t,e[r],n))return!0;return!1}function bA(t){for(let e=0;e<t.length;e++){let n=t[e];if(SI(n))return e}return t.length}function SA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function H_(t,e){return t?":not("+e.trim()+")":e}function AA(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Pt(o)&&(e+=H_(s,i),i=""),r=o,s=s||!Pt(r);n++}return i!==""&&(e+=H_(s,i)),e}function RA(t){return t.map(AA).join(",")}function MA(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Pt(i))break;i=s}r++}return{attrs:e,classes:n}}function nn(t){return ro(()=>{let e=OI(t),n=ae(T({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===CI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Zt.Emulated,styles:t.styles||It,_:null,schemas:t.schemas||null,tView:null,id:""});kI(n);let r=t.dependencies;return n.directiveDefs=G_(r,!1),n.pipeDefs=G_(r,!0),n.id=PA(n),n})}function NA(t){return Yn(t)||MI(t)}function xA(t){return t!==null}function Et(t){return ro(()=>({type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function q_(t,e){if(t==null)return ki;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=ye.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==ye.None?[r,a]:r,e[s]=o):n[s]=r}return n}function $e(t){return ro(()=>{let e=OI(t);return kI(e),e})}function Yn(t){return t[mA]||null}function MI(t){return t[yA]||null}function NI(t){return t[vA]||null}function xI(t){let e=Yn(t)||MI(t)||NI(t);return e!==null?e.standalone:!1}function PI(t,e){let n=t[_A]||null;if(!n&&e===!0)throw new Error(`Type ${ot(t)} does not have '\u0275mod' property.`);return n}function OI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ki,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:q_(t.inputs,e),outputs:q_(t.outputs),debugInfo:null}}function kI(t){t.features?.forEach(e=>e(t))}function G_(t,e){if(!t)return null;let n=e?NI:NA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(xA)}function PA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var An=0,J=1,P=2,We=3,Ot=4,Ft=5,Rc=6,Ks=7,kt=8,Fi=9,Cn=10,Ae=11,Qs=12,z_=13,qi=14,Xt=15,Kc=16,Ri=17,Vi=18,Qc=19,FI=20,Qn=21,wh=22,Ar=23,Jn=25,VI=1;var Rr=7,Mc=8,Nc=9,wt=10,Cf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Cf||{});function br(t){return Array.isArray(t)&&typeof t[VI]=="object"}function Rn(t){return Array.isArray(t)&&t[VI]===!0}function LI(t){return(t.flags&4)!==0}function Yc(t){return t.componentOffset>-1}function bf(t){return(t.flags&1)===1}function Zn(t){return!!t.template}function OA(t){return(t[P]&512)!==0}var kA="svg",FA="math",VA=!1;function LA(){return VA}function en(t){for(;Array.isArray(t);)t=t[An];return t}function UI(t,e){return en(e[t])}function Dt(t,e){return en(e[t.index])}function jI(t,e){return t.data[e]}function er(t,e){let n=e[t];return br(n)?n:n[An]}function Sf(t){return(t[P]&128)===128}function UA(t){return Rn(t[We])}function xc(t,e){return e==null?null:t[e]}function BI(t){t[Ri]=0}function jA(t){t[P]&1024||(t[P]|=1024,Sf(t)&&Ys(t))}function BA(t,e){for(;t>0;)e=e[qi],t--;return e}function Af(t){return!!(t[P]&9216||t[Ar]?.dirty)}function Lh(t){Af(t)?Ys(t):t[P]&64&&(LA()?(t[P]|=1024,Ys(t)):t[Cn].changeDetectionScheduler?.notify())}function Ys(t){t[Cn].changeDetectionScheduler?.notify();let e=Js(t);for(;e!==null&&!(e[P]&8192||(e[P]|=8192,!Sf(e)));)e=Js(e)}function $I(t,e){if((t[P]&256)===256)throw new b(911,!1);t[Qn]===null&&(t[Qn]=[]),t[Qn].push(e)}function $A(t,e){if(t[Qn]===null)return;let n=t[Qn].indexOf(e);n!==-1&&t[Qn].splice(n,1)}function Js(t){let e=t[We];return Rn(e)?e[We]:e}var W={lFrame:QI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function HA(){return W.lFrame.elementDepthCount}function qA(){W.lFrame.elementDepthCount++}function GA(){W.lFrame.elementDepthCount--}function HI(){return W.bindingsEnabled}function zA(){return W.skipHydrationRootTNode!==null}function WA(t){return W.skipHydrationRootTNode===t}function KA(){W.skipHydrationRootTNode=null}function fe(){return W.lFrame.lView}function ht(){return W.lFrame.tView}function Jc(t){return W.lFrame.contextLView=t,t[kt]}function Zc(t){return W.lFrame.contextLView=null,t}function at(){let t=qI();for(;t!==null&&t.type===64;)t=t.parent;return t}function qI(){return W.lFrame.currentTNode}function QA(){let t=W.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function io(t,e){let n=W.lFrame;n.currentTNode=t,n.isParent=e}function GI(){return W.lFrame.isParent}function YA(){W.lFrame.isParent=!1}function JA(t){return W.lFrame.bindingIndex=t}function Xc(){return W.lFrame.bindingIndex++}function ZA(t){let e=W.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function XA(){return W.lFrame.inI18n}function eR(t,e){let n=W.lFrame;n.bindingIndex=n.bindingRootIndex=t,Uh(e)}function tR(){return W.lFrame.currentDirectiveIndex}function Uh(t){W.lFrame.currentDirectiveIndex=t}function nR(t){let e=W.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function zI(t){W.lFrame.currentQueryIndex=t}function rR(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Ft]:null}function WI(t,e,n){if(n&H.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&H.Host);)if(i=rR(s),i===null||(s=s[qi],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=W.lFrame=KI();return r.currentTNode=e,r.lView=t,!0}function Rf(t){let e=KI(),n=t[J];W.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function KI(){let t=W.lFrame,e=t===null?null:t.child;return e===null?QI(t):e}function QI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function YI(){let t=W.lFrame;return W.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var JI=YI;function Mf(){let t=YI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function iR(t){return(W.lFrame.contextLView=BA(t,W.lFrame.contextLView))[kt]}function Gi(){return W.lFrame.selectedIndex}function Mr(t){W.lFrame.selectedIndex=t}function Nf(){let t=W.lFrame;return jI(t.tView,t.selectedIndex)}function sR(){return W.lFrame.currentNamespace}var ZI=!0;function xf(){return ZI}function Pf(t){ZI=t}function oR(){return eu(at(),fe())}function eu(t,e){return new Mn(Dt(t,e))}var Mn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=oR;let t=e;return t})();function Of(t,e){t.forEach(n=>Array.isArray(n)?Of(n,e):e(n))}function XI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Pc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function aR(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function cR(t,e,n){let r=so(t,e);return r>=0?t[r|1]=n:(r=~r,aR(t,r,e,n)),r}function Eh(t,e){let n=so(t,e);if(n>=0)return t[n|1]}function so(t,e){return uR(t,e,1)}function uR(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}function ew(t){return(t.flags&128)===128}var jh;function tw(t){jh=t}function lR(){if(jh!==void 0)return jh;if(typeof document<"u")return document;throw new b(210,!1)}function R(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Tt(t){return{providers:t.providers||[],imports:t.imports||[]}}function tu(t){return W_(t,rw)||W_(t,iw)}function nw(t){return tu(t)!==null}function W_(t,e){return t.hasOwnProperty(e)?t[e]:null}function dR(t){let e=t&&(t[rw]||t[iw]);return e||null}function K_(t){return t&&(t.hasOwnProperty(Q_)||t.hasOwnProperty(hR))?t[Q_]:null}var rw=ce({\u0275prov:ce}),Q_=ce({\u0275inj:ce}),iw=ce({ngInjectableDef:ce}),hR=ce({ngInjectorDef:ce}),M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=R({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},kf=new M("",{providedIn:"root",factory:()=>fR}),fR="ng",Ff=new M(""),rn=new M("",{providedIn:"platform",factory:()=>"unknown"});var Vf=new M("",{providedIn:"root",factory:()=>lR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pR=ce({__forward_ref__:ce});function Nn(t){return t.__forward_ref__=Nn,t.toString=function(){return ot(this())},t}function et(t){return sw(t)?t():t}function sw(t){return typeof t=="function"&&t.hasOwnProperty(pR)&&t.__forward_ref__===Nn}function ow(t){return t&&!!t.\u0275providers}function nu(t){return typeof t=="string"?t:t==null?"":String(t)}function gR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():nu(t)}function mR(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new b(-200,t)}function Lf(t,e){throw new b(-201,!1)}var Bh;function aw(){return Bh}function _t(t){let e=Bh;return Bh=t,e}function cw(t,e,n){let r=tu(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&H.Optional)return null;if(e!==void 0)return e;Lf(t,"Injector")}var yR={},Zs=yR,$h="__NG_DI_FLAG__",Oc="ngTempTokenPath",vR="ngTokenPath",_R=/\n/gm,IR="\u0275",Y_="__source",Pi;function wR(){return Pi}function Kn(t){let e=Pi;return Pi=t,e}function ER(t,e=H.Default){if(Pi===void 0)throw new b(-203,!1);return Pi===null?cw(t,void 0,e):Pi.get(t,e&H.Optional?null:void 0,e)}function O(t,e=H.Default){return(aw()||ER)(et(t),e)}function I(t,e=H.Default){return O(t,ru(e))}function ru(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Hh(t){let e=[];for(let n=0;n<t.length;n++){let r=et(t[n]);if(Array.isArray(r)){if(r.length===0)throw new b(900,!1);let i,s=H.Default;for(let o=0;o<r.length;o++){let a=r[o],c=DR(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(O(i,s))}else e.push(O(r))}return e}function uw(t,e){return t[$h]=e,t.prototype[$h]=e,t}function DR(t){return t[$h]}function TR(t,e,n,r){let i=t[Oc];throw e[Y_]&&i.unshift(e[Y_]),t.message=CR(`
`+t.message,i,n,r),t[vR]=i,t[Oc]=null,t}function CR(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==IR?t.slice(2):t;let i=ot(e);if(Array.isArray(e))i=e.map(ot).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):ot(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_R,`
  `)}`}var bR="h",SR="b";var AR=()=>null;function Uf(t,e,n=!1){return AR(t,e,n)}var _c="__parameters__";function RR(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function lw(t,e,n){return ro(()=>{let r=RR(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(_c)?c[_c]:Object.defineProperty(c,_c,{value:[]})[_c];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ct=uw(lw("Optional"),8);var jf=uw(lw("SkipSelf"),4);function Li(t,e){let n=t.hasOwnProperty(Ac);return n?t[Ac]:null}var Ui=new M(""),dw=new M("",-1),hw=new M(""),kc=class{get(e,n=Zs){if(n===Zs){let r=new Error(`NullInjectorError: No provider for ${ot(e)}!`);throw r.name="NullInjectorError",r}return n}};function iu(t){return{\u0275providers:t}}function Bf(...t){return{\u0275providers:fw(!0,t),\u0275fromNgModule:!0}}function fw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Of(e,o=>{let a=o;qh(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&pw(i,s),n}function pw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];$f(i,s=>{e(s,r)})}}function qh(t,e,n,r){if(t=et(t),!t)return!1;let i=null,s=K_(t),o=!s&&Yn(t);if(!s&&!o){let c=t.ngModule;if(s=K_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)qh(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Of(s.imports,l=>{qh(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&pw(u,e)}if(!a){let u=Li(i)||(()=>new i);e({provide:i,useFactory:u,deps:It},i),e({provide:hw,useValue:i,multi:!0},i),e({provide:Ui,useValue:()=>O(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;$f(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function $f(t,e){for(let n of t)ow(n)&&(n=n.\u0275providers),Array.isArray(n)?$f(n,e):e(n)}var MR=ce({provide:String,useValue:ce});function gw(t){return t!==null&&typeof t=="object"&&MR in t}function NR(t){return!!(t&&t.useExisting)}function xR(t){return!!(t&&t.useFactory)}function ji(t){return typeof t=="function"}function PR(t){return!!t.useClass}var su=new M(""),Dc={},OR={},Dh;function Hf(){return Dh===void 0&&(Dh=new kc),Dh}var dt=class{},Xs=class extends dt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zh(e,o=>this.processProvider(o)),this.records.set(dw,Mi(void 0,this)),i.has("environment")&&this.records.set(dt,Mi(void 0,this));let s=this.records.get(su);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hw,It,H.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Kn(this),r=_t(void 0),i;try{return e()}finally{Kn(n),_t(r)}}get(e,n=Zs,r=H.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(B_))return e[B_](this);r=ru(r);let i,s=Kn(this),o=_t(void 0);try{if(!(r&H.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=UR(e)&&tu(e);u&&this.injectableDefInScope(u)?c=Mi(Gh(e),Dc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&H.Self?Hf():this.parent;return n=r&H.Optional&&n===Zs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Oc]=a[Oc]||[]).unshift(ot(e)),s)throw a;return TR(a,e,"R3InjectorError",this.source)}else throw a}finally{_t(o),Kn(s)}}resolveInjectorInitializers(){let e=te(null),n=Kn(this),r=_t(void 0),i;try{let s=this.get(Ui,It,H.Self);for(let o of s)o()}finally{Kn(n),_t(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new b(205,!1)}processProvider(e){e=et(e);let n=ji(e)?e:et(e&&e.provide),r=FR(e);if(!ji(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Mi(void 0,Dc,!0),i.factory=()=>Hh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=te(null);try{return n.value===Dc&&(n.value=OR,n.value=n.factory()),typeof n.value=="object"&&n.value&&LR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=et(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Gh(t){let e=tu(t),n=e!==null?e.factory:Li(t);if(n!==null)return n;if(t instanceof M)throw new b(204,!1);if(t instanceof Function)return kR(t);throw new b(204,!1)}function kR(t){if(t.length>0)throw new b(204,!1);let n=dR(t);return n!==null?()=>n.factory(t):()=>new t}function FR(t){if(gw(t))return Mi(void 0,t.useValue);{let e=mw(t);return Mi(e,Dc)}}function mw(t,e,n){let r;if(ji(t)){let i=et(t);return Li(i)||Gh(i)}else if(gw(t))r=()=>et(t.useValue);else if(xR(t))r=()=>t.useFactory(...Hh(t.deps||[]));else if(NR(t))r=()=>O(et(t.useExisting));else{let i=et(t&&(t.useClass||t.provide));if(VR(t))r=()=>new i(...Hh(t.deps));else return Li(i)||Gh(i)}return r}function Mi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function VR(t){return!!t.deps}function LR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function UR(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function zh(t,e){for(let n of t)Array.isArray(n)?zh(n,e):n&&ow(n)?zh(n.\u0275providers,e):e(n)}function tr(t,e){t instanceof Xs&&t.assertNotDestroyed();let n,r=Kn(t),i=_t(void 0);try{return e()}finally{Kn(r),_t(i)}}function jR(t){if(!aw()&&!wR())throw new b(-203,!1)}function BR(t){return typeof t=="function"}var Wh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function yw(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function sn(){return vw}function vw(t){return t.type.prototype.ngOnChanges&&(t.setInput=HR),$R}sn.ngInherit=!0;function $R(){let t=Iw(this),e=t?.current;if(e){let n=t.previous;if(n===ki)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function HR(t,e,n,r,i){let s=this.declaredInputs[r],o=Iw(t)||qR(t,{previous:ki,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Wh(u&&u.currentValue,n,c===ki),yw(t,e,i,n)}var _w="__ngSimpleChanges__";function Iw(t){return t[_w]||null}function qR(t,e){return t[_w]=e}var J_=null;var Yt=function(t,e,n){J_?.(t,e,n)};function GR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=vw(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function qf(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Tc(t,e,n){ww(t,e,3,n)}function Cc(t,e,n,r){(t[P]&3)===n&&ww(t,e,n,r)}function Th(t,e){let n=t[P];(n&3)===e&&(n&=16383,n+=1,t[P]=n)}function ww(t,e,n,r){let i=r!==void 0?t[Ri]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ri]+=65536),(a<s||s==-1)&&(zR(t,n,e,c),t[Ri]=(t[Ri]&4294901760)+c+2),c++}function Z_(t,e){Yt(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),Yt(5,t,e)}}function zR(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[P]>>14<t[Ri]>>16&&(t[P]&3)===e&&(t[P]+=16384,Z_(a,s)):Z_(a,s)}var Oi=-1,Nr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function WR(t){return t instanceof Nr}function KR(t){return(t.flags&8)!==0}function QR(t){return(t.flags&16)!==0}function Ew(t){return t!==Oi}function Fc(t){return t&32767}function YR(t){return t>>16}function Vc(t,e){let n=YR(t),r=e;for(;n>0;)r=r[qi],n--;return r}var Kh=!0;function X_(t){let e=Kh;return Kh=t,e}var JR=256,Dw=JR-1,Tw=5,ZR=0,Jt={};function XR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zs)&&(r=n[zs]),r==null&&(r=n[zs]=ZR++);let i=r&Dw,s=1<<i;e.data[t+(i>>Tw)]|=s}function Lc(t,e){let n=Cw(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,Ch(r.data,t),Ch(e,null),Ch(r.blueprint,null));let i=Gf(t,e),s=t.injectorIndex;if(Ew(i)){let o=Fc(i),a=Vc(i,e),c=a[J].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Ch(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Cw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Gf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Mw(i),r===null)return Oi;if(n++,i=i[qi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Oi}function Qh(t,e,n){XR(t,e,n)}function eM(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(SI(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function bw(t,e,n){if(n&H.Optional||t!==void 0)return t;Lf(e,"NodeInjector")}function Sw(t,e,n,r){if(n&H.Optional&&r===void 0&&(r=null),!(n&(H.Self|H.Host))){let i=t[Fi],s=_t(void 0);try{return i?i.get(e,r,n&H.Optional):cw(e,r,n&H.Optional)}finally{_t(s)}}return bw(r,e,n)}function Aw(t,e,n,r=H.Default,i){if(t!==null){if(e[P]&2048&&!(r&H.Self)){let o=sM(t,e,n,r,Jt);if(o!==Jt)return o}let s=Rw(t,e,n,r,Jt);if(s!==Jt)return s}return Sw(e,n,r,i)}function Rw(t,e,n,r,i){let s=rM(n);if(typeof s=="function"){if(!WI(e,t,r))return r&H.Host?bw(i,n,r):Sw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&H.Optional))Lf(n);else return o}finally{JI()}}else if(typeof s=="number"){let o=null,a=Cw(t,e),c=Oi,u=r&H.Host?e[Xt][Ft]:null;for((a===-1||r&H.SkipSelf)&&(c=a===-1?Gf(t,e):e[a+8],c===Oi||!tI(r,!1)?a=-1:(o=e[J],a=Fc(c),e=Vc(c,e)));a!==-1;){let l=e[J];if(eI(s,a,l.data)){let d=tM(a,e,n,o,r,u);if(d!==Jt)return d}c=e[a+8],c!==Oi&&tI(r,e[J].data[a+8]===u)&&eI(s,a,e)?(o=l,a=Fc(c),e=Vc(c,e)):a=-1}}return i}function tM(t,e,n,r,i,s){let o=e[J],a=o.data[t+8],c=r==null?Yc(a)&&Kh:r!=o&&(a.type&3)!==0,u=i&H.Host&&s===a,l=nM(a,o,n,c,u);return l!==null?Bi(e,o,l,a):Jt}function nM(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let m=o[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(i){let f=o[c];if(f&&Zn(f)&&f.type===n)return c}return null}function Bi(t,e,n,r){let i=t[n],s=e.data;if(WR(i)){let o=i;o.resolving&&mR(gR(s[n]));let a=X_(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?_t(o.injectImpl):null,l=WI(t,r,H.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&GR(n,s[n],e)}finally{u!==null&&_t(u),X_(a),o.resolving=!1,JI()}}return i}function rM(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(zs)?t[zs]:void 0;return typeof e=="number"?e>=0?e&Dw:iM:e}function eI(t,e,n){let r=1<<t;return!!(n[e+(t>>Tw)]&r)}function tI(t,e){return!(t&H.Self)&&!(t&H.Host&&e)}var Sr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Aw(this._tNode,this._lView,e,ru(r),n)}};function iM(){return new Sr(at(),fe())}function oo(t){return ro(()=>{let e=t.prototype.constructor,n=e[Ac]||Yh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ac]||Yh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Yh(t){return sw(t)?()=>{let e=Yh(et(t));return e&&e()}:Li(t)}function sM(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[P]&2048&&!(o[P]&512);){let a=Rw(s,o,n,r|H.Self,Jt);if(a!==Jt)return a;let c=s.parent;if(!c){let u=o[FI];if(u){let l=u.get(n,Jt,r);if(l!==Jt)return l}c=Mw(o),o=o[qi]}s=c}return i}function Mw(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Ft]:null}function zf(t){return eM(at(),t)}function nI(t,e=null,n=null,r){let i=Nw(t,e,n,r);return i.resolveInjectorInitializers(),i}function Nw(t,e=null,n=null,r,i=new Set){let s=[n||It,Bf(t)];return r=r||(typeof t=="object"?void 0:ot(t)),new Xs(s,e||Hf(),r||null,i)}var ct=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return nI({name:""},i,r,"");{let s=r.name??"";return nI({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Zs,e.NULL=new kc,e.\u0275prov=R({token:e,providedIn:"any",factory:()=>O(dw)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),oM="ngOriginalError";function bh(t){return t[oM]}var tn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&bh(e);for(;n&&bh(n);)n=bh(n);return n||null}},xw=new M("",{providedIn:"root",factory:()=>I(tn).handleError.bind(void 0)});var Pw=!1,aM=new M("",{providedIn:"root",factory:()=>Pw});var Ic;function cM(){if(Ic===void 0&&(Ic=null,Cr.trustedTypes))try{Ic=Cr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ic}function rI(t){return cM()?.createScriptURL(t)||t}var Uc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TI})`}};function ao(t){return t instanceof Uc?t.changingThisBreaksApplicationSecurity:t}function Wf(t,e){let n=uM(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${TI})`)}return n===e}function uM(t){return t instanceof Uc&&t.getTypeName()||null}var lM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ow(t){return t=String(t),t.match(lM)?t:"unsafe:"+t}var ou=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ou||{});function dM(t){let e=Fw();return e?e.sanitize(ou.URL,t)||"":Wf(t,"URL")?ao(t):Ow(nu(t))}function hM(t){let e=Fw();if(e)return rI(e.sanitize(ou.RESOURCE_URL,t)||"");if(Wf(t,"ResourceURL"))return rI(ao(t));throw new b(904,!1)}function fM(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?hM:dM}function kw(t,e,n){return fM(e,n)(t)}function Fw(){let t=fe();return t&&t[Cn].sanitizer}var Vw=new Map,pM=0;function gM(){return pM++}function mM(t){Vw.set(t[Qc],t)}function yM(t){Vw.delete(t[Qc])}var iI="__ngContext__";function xr(t,e){br(e)?(t[iI]=e[Qc],mM(e)):t[iI]=e}function Lw(t){return t instanceof Function?t():t}function vM(t){return(t??I(ct)).get(rn)==="browser"}var bn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(bn||{}),_M;function Kf(t,e){return _M(t,e)}function Ni(t,e,n,r,i){if(r!=null){let s,o=!1;Rn(r)?s=r:br(r)&&(o=!0,r=r[An]);let a=en(r);t===0&&n!==null?i==null?Hw(e,n,a):jc(e,n,a,i||null,!0):t===1&&n!==null?jc(e,n,a,i||null,!0):t===2?FM(e,a,o):t===3&&e.destroyNode(a),s!=null&&LM(e,t,s,n,i)}}function IM(t,e){return t.createText(e)}function wM(t,e,n){t.setValue(e,n)}function Uw(t,e,n){return t.createElement(e,n)}function EM(t,e){jw(t,e),e[An]=null,e[Ft]=null}function DM(t,e,n,r,i,s){r[An]=i,r[Ft]=e,au(t,r,n,1,i,s)}function jw(t,e){au(t,e,e[Ae],2,null,null)}function TM(t){let e=t[Qs];if(!e)return Sh(t[J],t);for(;e;){let n=null;if(br(e))n=e[Qs];else{let r=e[wt];r&&(n=r)}if(!n){for(;e&&!e[Ot]&&e!==t;)br(e)&&Sh(e[J],e),e=e[We];e===null&&(e=t),br(e)&&Sh(e[J],e),n=e&&e[Ot]}e=n}}function CM(t,e,n,r){let i=wt+r,s=n.length;r>0&&(n[i-1][Ot]=e),r<s-wt?(e[Ot]=n[i],XI(n,wt+r,e)):(n.push(e),e[Ot]=null),e[We]=n;let o=e[Kc];o!==null&&n!==o&&bM(o,e);let a=e[Vi];a!==null&&a.insertView(t),Lh(e),e[P]|=128}function bM(t,e){let n=t[Nc],i=e[We][We][Xt];e[Xt]!==i&&(t[P]|=Cf.HasTransplantedViews),n===null?t[Nc]=[e]:n.push(e)}function Bw(t,e){let n=t[Nc],r=n.indexOf(e);n.splice(r,1)}function Jh(t,e){if(t.length<=wt)return;let n=wt+e,r=t[n];if(r){let i=r[Kc];i!==null&&i!==t&&Bw(i,r),e>0&&(t[n-1][Ot]=r[Ot]);let s=Pc(t,wt+e);EM(r[J],r);let o=s[Vi];o!==null&&o.detachView(s[J]),r[We]=null,r[Ot]=null,r[P]&=-129}return r}function $w(t,e){if(!(e[P]&256)){let n=e[Ae];n.destroyNode&&au(t,e,n,3,null,null),TM(e)}}function Sh(t,e){if(e[P]&256)return;let n=te(null);try{e[P]&=-129,e[P]|=256,e[Ar]&&p_(e[Ar]),AM(t,e),SM(t,e),e[J].type===1&&e[Ae].destroy();let r=e[Kc];if(r!==null&&Rn(e[We])){r!==e[We]&&Bw(r,e);let i=e[Vi];i!==null&&i.detachView(t)}yM(e)}finally{te(n)}}function SM(t,e){let n=t.cleanup,r=e[Ks];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ks]=null);let i=e[Qn];if(i!==null){e[Qn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function AM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Nr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Yt(4,a,c);try{c.call(a)}finally{Yt(5,a,c)}}else{Yt(4,i,s);try{s.call(i)}finally{Yt(5,i,s)}}}}}function RM(t,e,n){return MM(t,e.parent,n)}function MM(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[An];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Zt.None||s===Zt.Emulated)return null}return Dt(r,n)}}function jc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Hw(t,e,n){t.appendChild(e,n)}function sI(t,e,n,r,i){r!==null?jc(t,e,n,r,i):Hw(t,e,n)}function NM(t,e,n,r){t.removeChild(e,n,r)}function Qf(t,e){return t.parentNode(e)}function xM(t,e){return t.nextSibling(e)}function PM(t,e,n){return kM(t,e,n)}function OM(t,e,n){return t.type&40?Dt(t,n):null}var kM=OM,oI;function Yf(t,e,n,r){let i=RM(t,r,e),s=e[Ae],o=r.parent||e[Ft],a=PM(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)sI(s,i,n[c],a,!1);else sI(s,i,n,a,!1);oI!==void 0&&oI(s,r,e,n,i)}function bc(t,e){if(e!==null){let n=e.type;if(n&3)return Dt(e,t);if(n&4)return Zh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return bc(t,r);{let i=t[e.index];return Rn(i)?Zh(-1,i):en(i)}}else{if(n&32)return Kf(e,t)()||en(t[e.index]);{let r=qw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Js(t[Xt]);return bc(i,r)}else return bc(t,e.next)}}}return null}function qw(t,e){if(e!==null){let r=t[Xt][Ft],i=e.projection;return r.projection[i]}return null}function Zh(t,e){let n=wt+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return bc(r,i)}return e[Rr]}function FM(t,e,n){let r=Qf(t,e);r&&NM(t,r,e,n)}function Jf(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&xr(en(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Jf(t,e,n.child,r,i,s,!1),Ni(e,t,i,a,s);else if(c&32){let u=Kf(n,r),l;for(;l=u();)Ni(e,t,i,l,s);Ni(e,t,i,a,s)}else c&16?VM(t,e,r,n,i,s):Ni(e,t,i,a,s);n=o?n.projectionNext:n.next}}function au(t,e,n,r,i,s){Jf(n,r,t.firstChild,e,i,s,!1)}function VM(t,e,n,r,i,s){let o=n[Xt],c=o[Ft].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Ni(e,t,i,l,s)}else{let u=c,l=o[We];ew(r)&&(u.flags|=128),Jf(t,e,u,l,i,s,!0)}}function LM(t,e,n,r,i){let s=n[Rr],o=en(n);s!==o&&Ni(e,t,r,s,i);for(let a=wt;a<n.length;a++){let c=n[a];au(c[J],c,t,e,r,s)}}function UM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:bn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=bn.Important),t.setStyle(n,r,i,s))}}function jM(t,e,n){t.setAttribute(e,"style",n)}function Gw(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function zw(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Vh(t,e,r),i!==null&&Gw(t,e,i),s!==null&&jM(t,e,s)}var zi={};function ue(t=1){Ww(ht(),fe(),Gi()+t,!1)}function Ww(t,e,n,r){if(!r)if((e[P]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Tc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Cc(e,s,0,n)}Mr(n)}function S(t,e=H.Default){let n=fe();if(n===null)return O(t,e);let r=at();return Aw(r,n,et(t),e)}function Kw(){let t="invalid";throw new Error(t)}function Qw(t,e,n,r,i,s){let o=te(null);try{let a=null;i&ye.SignalBased&&(a=e[r][eh]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ye.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):yw(e,a,r,s)}finally{te(o)}}function BM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Mr(~i);else{let s=i,o=n[++r],a=n[++r];eR(o,s);let c=e[s];a(2,c)}}}finally{Mr(-1)}}function cu(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[An]=i,d[P]=r|4|128|8|64,(u!==null||t&&t[P]&2048)&&(d[P]|=2048),BI(d),d[We]=d[qi]=t,d[kt]=n,d[Cn]=o||t&&t[Cn],d[Ae]=a||t&&t[Ae],d[Fi]=c||t&&t[Fi]||null,d[Ft]=s,d[Qc]=gM(),d[Rc]=l,d[FI]=u,d[Xt]=e.type==2?t[Xt]:d,d}function uu(t,e,n,r,i){let s=t.data[e];if(s===null)s=$M(t,e,n,r,i),XA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=QA();s.injectorIndex=o===null?-1:o.injectorIndex}return io(s,!0),s}function $M(t,e,n,r,i){let s=qI(),o=GI(),a=o?s:s&&s.parent,c=t.data[e]=WM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Yw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Jw(t,e,n,r,i){let s=Gi(),o=r&2;try{Mr(-1),o&&e.length>Jn&&Ww(t,e,Jn,!1),Yt(o?2:0,i),n(r,i)}finally{Mr(s),Yt(o?3:1,i)}}function Zw(t,e,n){if(LI(e)){let r=te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{te(r)}}}function Xw(t,e,n){HI()&&(XM(t,e,n,Dt(n,e)),(n.flags&64)===64&&sE(t,e,n))}function eE(t,e,n=Dt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function tE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Zf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Zf(t,e,n,r,i,s,o,a,c,u,l){let d=Jn+r,h=d+i,f=HM(d,h),m=typeof u=="function"?u():u;return f[J]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:l}}function HM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:zi);return n}function qM(t,e,n,r){let s=r.get(aM,Pw)||n===Zt.ShadowDom,o=t.selectRootElement(e,s);return GM(o),o}function GM(t){zM(t)}var zM=()=>null;function WM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return zA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function aI(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ye.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?cI(r,n,u,a,c):cI(r,n,u,a)}return r}function cI(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function KM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=aI(0,d.inputs,l,c,f),u=aI(1,d.outputs,l,u,m);let v=c!==null&&o!==null&&!RI(e)?lN(c,l,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function QM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nE(t,e,n,r,i,s,o,a){let c=Dt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Xf(t,n,l,r,i),Yc(e)&&YM(n,e.index)):e.type&3?(r=QM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function YM(t,e){let n=er(e,t);n[P]&16||(n[P]|=64)}function rE(t,e,n,r){if(HI()){let i=r===null?null:{"":-1},s=tN(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&iE(t,e,n,o,i,a),i&&nN(n,r,i)}n.mergedAttrs=Ws(n.mergedAttrs,n.attrs)}function iE(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Qh(Lc(n,e),t,r[u].type);iN(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Yw(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Ws(n.mergedAttrs,l.hostAttrs),sN(t,n,e,c,l),rN(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}KM(t,n,s)}function JM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;ZM(o)!=a&&o.push(a),o.push(n,r,s)}}function ZM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function XM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Yc(n)&&oN(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Lc(n,e),xr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=Bi(e,t,a,n);if(xr(u,e),o!==null&&uN(e,a-i,u,c,n,o),Zn(c)){let l=er(n.index,e);l[kt]=Bi(e,t,a,n)}}}function sE(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=tR();try{Mr(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Uh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eN(c,u)}}finally{Mr(-1),Uh(o)}}function eN(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function tN(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(CA(e,o.selectors,!1))if(r||(r=[]),Zn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Xh(t,e,c)}else r.unshift(o),Xh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Xh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function nN(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new b(-301,!1);r.push(e[i],s)}}}function rN(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Zn(e)&&(n[""]=t)}}function iN(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function sN(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Li(i.type,!0)),o=new Nr(s,Zn(i),S);t.blueprint[r]=o,n[r]=o,JM(t,e,r,Yw(t,n,i.hostVars,zi),i)}function oN(t,e,n){let r=Dt(e,t),i=tE(n),s=t[Cn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=lu(t,cu(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function aN(t,e,n,r,i,s){let o=Dt(t,e);cN(e[Ae],o,s,t.value,n,r,i)}function cN(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?nu(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function uN(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];Qw(r,n,c,u,l,d)}}function lN(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function oE(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function aE(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];zI(s),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function lu(t,e){return t[Qs]?t[z_][Ot]=e:t[Qs]=e,t[z_]=e,e}function ef(t,e,n){zI(0);let r=te(null);try{e(t,n)}finally{te(r)}}function dN(t){return t[Ks]||(t[Ks]=[])}function hN(t){return t.cleanup||(t.cleanup=[])}function cE(t,e){let n=t[Fi],r=n?n.get(tn,null):null;r&&r.handleError(e)}function Xf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];Qw(l,u,r,a,c,i)}}function fN(t,e,n){let r=UI(e,t);wM(t[Ae],r,n)}function pN(t,e){let n=er(e,t),r=n[J];gN(r,n);let i=n[An];i!==null&&n[Rc]===null&&(n[Rc]=Uf(i,n[Fi])),ep(r,n,n[kt])}function gN(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ep(t,e,n){Rf(e);try{let r=t.viewQuery;r!==null&&ef(1,r,n);let i=t.template;i!==null&&Jw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Vi]?.finishViewCreation(t),t.staticContentQueries&&aE(t,e),t.staticViewQueries&&ef(2,t.viewQuery,n);let s=t.components;s!==null&&mN(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[P]&=-5,Mf()}}function mN(t,e){for(let n=0;n<e.length;n++)pN(t,e[n])}function yN(t,e,n,r){let i=te(null);try{let s=e.tView,a=t[P]&4096?4096:16,c=cu(t,s,n,a,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),u=t[e.index];c[Kc]=u;let l=t[Vi];return l!==null&&(c[Vi]=l.createEmbeddedView(s)),ep(s,c,n),c}finally{te(i)}}function uI(t,e){return!e||e.firstChild===null||ew(t)}function vN(t,e,n,r=!0){let i=e[J];if(CM(i,e,t,n),r){let o=Zh(n,t),a=e[Ae],c=Qf(a,t[Rr]);c!==null&&DM(i,t[Ft],a,e,c,o)}let s=e[Rc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Bc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(en(s)),Rn(s)&&_N(s,r);let o=n.type;if(o&8)Bc(t,e,n.child,r);else if(o&32){let a=Kf(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=qw(e,n);if(Array.isArray(a))r.push(...a);else{let c=Js(e[Xt]);Bc(c[J],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function _N(t,e){for(let n=wt;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&Bc(r[J],r,i,e)}t[Rr]!==t[An]&&e.push(t[Rr])}var uE=[];function IN(t){return t[Ar]??wN(t)}function wN(t){let e=uE.pop()??Object.create(DN);return e.lView=t,e}function EN(t){t.lView[Ar]!==t&&(t.lView=null,uE.push(t))}var DN=ae(T({},d_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ys(t.lView)},consumerOnSignalRead(){this.lView[Ar]=this}});function lE(t){return hE(t[Qs])}function dE(t){return hE(t[Ot])}function hE(t){for(;t!==null&&!Rn(t);)t=t[Ot];return t}var fE=100;function pE(t,e=!0,n=0){let r=t[Cn],i=r.rendererFactory,s=!1;s||i.begin?.();try{TN(t,n)}catch(o){throw e&&cE(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function TN(t,e){tf(t,e);let n=0;for(;Af(t);){if(n===fE)throw new b(103,!1);n++,tf(t,1)}}function CN(t,e,n,r){let i=e[P];if((i&256)===256)return;let s=!1;!s&&e[Cn].inlineEffectRunner?.flush(),Rf(e);let o=null,a=null;!s&&bN(t)&&(a=IN(e),o=h_(a));try{BI(e),JA(t.bindingStartIndex),n!==null&&Jw(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Tc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Cc(e,d,0,null),Th(e,0)}if(SN(e),gE(e,0),t.contentQueries!==null&&aE(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Tc(e,d)}else{let d=t.contentHooks;d!==null&&Cc(e,d,1),Th(e,1)}BM(t,e);let u=t.components;u!==null&&yE(e,u,0);let l=t.viewQuery;if(l!==null&&ef(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Tc(e,d)}else{let d=t.viewHooks;d!==null&&Cc(e,d,2),Th(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[wh]){for(let d of e[wh])d();e[wh]=null}s||(e[P]&=-73)}catch(c){throw Ys(e),c}finally{a!==null&&(f_(a,o),EN(a)),Mf()}}function bN(t){return t.type!==2}function gE(t,e){for(let n=lE(t);n!==null;n=dE(n))for(let r=wt;r<n.length;r++){let i=n[r];mE(i,e)}}function SN(t){for(let e=lE(t);e!==null;e=dE(e)){if(!(e[P]&Cf.HasTransplantedViews))continue;let n=e[Nc];for(let r=0;r<n.length;r++){let i=n[r],s=i[We];jA(i)}}}function AN(t,e,n){let r=er(e,t);mE(r,n)}function mE(t,e){Sf(t)&&tf(t,e)}function tf(t,e){let r=t[J],i=t[P],s=t[Ar],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&th(s)),s&&(s.dirty=!1),t[P]&=-9217,o)CN(r,t,r.template,t[kt]);else if(i&8192){gE(t,1);let a=r.components;a!==null&&yE(t,a,1)}}function yE(t,e,n){for(let r=0;r<e.length;r++)AN(t,e[r],n)}function tp(t){for(t[Cn].changeDetectionScheduler?.notify();t;){t[P]|=64;let e=Js(t);if(OA(t)&&!e)return t;t=e}return null}var Pr=class{get rootNodes(){let e=this._lView,n=e[J];return Bc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[kt]}set context(e){this._lView[kt]=e}get destroyed(){return(this._lView[P]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[We];if(Rn(e)){let n=e[Mc],r=n?n.indexOf(this):-1;r>-1&&(Jh(e,r),Pc(n,r))}this._attachedToViewContainer=!1}$w(this._lView[J],this._lView)}onDestroy(e){$I(this._lView,e)}markForCheck(){tp(this._cdRefInjectingView||this._lView)}detach(){this._lView[P]&=-129}reattach(){Lh(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,pE(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,jw(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=e,Lh(this._lView)}},np=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NN;let t=e;return t})(),RN=np,MN=class extends RN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=yN(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Pr(i)}};function NN(){return xN(at(),fe())}function xN(t,e){return t.type&4?new MN(e,t,eu(t,e)):null}var jG=new RegExp(`^(\\d+)*(${SR}|${bR})*(.*)`);var PN=()=>null;function lI(t,e){return PN(t,e)}var nf=class{},rf=class{},$c=class{};function ON(t){let e=Error(`No component factory found for ${ot(t)}.`);return e[kN]=t,e}var kN="ngComponent";var sf=class{resolveComponentFactory(e){throw ON(e)}},du=(()=>{let e=class e{};e.NULL=new sf;let t=e;return t})(),eo=class{},nr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>FN();let t=e;return t})();function FN(){let t=fe(),e=at(),n=er(e.index,t);return(br(n)?n:t)[Ae]}var VN=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ah={},vE=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=LN,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),of=class extends vE{constructor(e){super(),this._lView=e}onDestroy(e){return $I(this._lView,e),()=>$A(this._lView,e)}};function LN(){return new of(fe())}var dI=new Set;function rp(t){dI.has(t)||(dI.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function hI(...t){}function UN(){let t=typeof Cr.requestAnimationFrame=="function",e=Cr[t?"requestAnimationFrame":"setTimeout"],n=Cr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ie=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pe(!1),this.onMicrotaskEmpty=new Pe(!1),this.onStable=new Pe(!1),this.onError=new Pe(!1),typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=UN().nativeRequestAnimationFrame,$N(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new b(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,jN,hI,hI);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},jN={};function ip(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function BN(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Cr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,af(t),t.isCheckStableRunning=!0,ip(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),af(t))}function $N(t){let e=()=>{BN(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(HN(a))return n.invokeTask(i,s,o,a);try{return fI(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),pI(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return fI(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),pI(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,af(t),ip(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function af(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function fI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function pI(t){t._nesting--,ip(t)}function HN(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var xi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(xi||{}),qN={destroy(){}};function sp(t,e){!e&&jR(sp);let n=e?.injector??I(ct);if(!vM(n))return qN;rp("NgAfterNextRender");let r=n.get(op),i=r.handler??=new uf,s=e?.phase??xi.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(vE).onDestroy(o),c=new cf(n,s,()=>{o(),t()});return i.register(c),{destroy:o}}var cf=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(ie),this.errorHandler=e.get(tn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},uf=class{constructor(){this.executingCallbacks=!1,this.buckets={[xi.EarlyRead]:new Set,[xi.Write]:new Set,[xi.MixedReadWrite]:new Set,[xi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},op=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function lf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=j_(i,a);else if(s==2){let c=a,u=e[++o];r=j_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Hc=class extends du{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Yn(e);return new $i(n,this.ngModule)}};function gI(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function GN(t){let e=t.toLowerCase();return e==="svg"?kA:e==="math"?FA:null}var df=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ru(r);let i=this.injector.get(e,Ah,r);return i!==Ah||n===Ah?i:this.parentInjector.get(e,n,r)}},$i=class extends $c{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=gI(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return gI(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=RA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=te(null);try{i=i||this.ngModule;let o=i instanceof dt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new df(e,o):e,c=a.get(eo,null);if(c===null)throw new b(407,!1);let u=a.get(VN,null),l=a.get(op,null),d=a.get(nf,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",v=r?qM(f,r,this.componentDef.encapsulation,a):Uw(f,m,GN(m)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let C=null;v!==null&&(C=Uf(v,a,!0));let Z=Zf(0,null,null,1,0,null,null,null,null,null,null),G=cu(null,Z,null,_,null,null,h,f,a,null,C);Rf(G);let de,Ne;try{let ee=this.componentDef,xe,Kt=null;ee.findHostDirectiveDefs?(xe=[],Kt=new Map,ee.findHostDirectiveDefs(ee,xe,Kt),xe.push(ee)):xe=[ee];let _r=zN(G,v),pi=WN(_r,v,ee,xe,G,h,f);Ne=jI(Z,Jn),v&&YN(f,ee,v,r),n!==void 0&&JN(Ne,this.ngContentSelectors,n),de=QN(pi,ee,xe,Kt,G,[ZN]),ep(Z,G,null)}finally{Mf()}return new hf(this.componentType,de,eu(Ne,G),G,Ne)}finally{te(s)}}},hf=class extends rf{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Pr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Xf(s[J],s,i,e,n),this.previousInputValues.set(e,n);let o=er(this._tNode.index,s);tp(o)}}get injector(){return new Sr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zN(t,e){let n=t[J],r=Jn;return t[r]=e,uu(n,r,2,"#host",null)}function WN(t,e,n,r,i,s,o){let a=i[J];KN(r,t,e,o);let c=null;e!==null&&(c=Uf(e,i[Fi]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=cu(i,tE(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&Xh(a,t,r.length-1),lu(i,d),i[t.index]=d}function KN(t,e,n,r){for(let i of t)e.mergedAttrs=Ws(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(lf(e,e.mergedAttrs,!0),n!==null&&zw(r,n,e))}function QN(t,e,n,r,i,s){let o=at(),a=i[J],c=Dt(o,i);iE(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=Bi(i,a,d,o);xr(h,i)}sE(a,i,o),c&&xr(c,i);let u=Bi(i,a,o.directiveStart+o.componentOffset,o);if(t[kt]=i[kt]=u,s!==null)for(let l of s)l(u,e);return Zw(a,o,i),u}function YN(t,e,n,r){if(r)Vh(t,n,["ng-version","17.2.4"]);else{let{attrs:i,classes:s}=MA(e.selectors[0]);i&&Vh(t,n,i),s&&s.length>0&&Gw(t,n,s.join(" "))}}function JN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function ZN(){let t=at();qf(fe()[J],t)}var co=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=XN;let t=e;return t})();function XN(){let t=at();return tx(t,fe())}var ex=co,_E=class extends ex{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return eu(this._hostTNode,this._hostLView)}get injector(){return new Sr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gf(this._hostTNode,this._hostLView);if(Ew(e)){let n=Vc(e,this._hostLView),r=Fc(e),i=n[J].data[r+8];return new Sr(i,n)}else return new Sr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=mI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-wt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=lI(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,uI(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!BR(e),a;if(o)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}let c=o?e:new $i(Yn(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?u:this.parentInjector).get(dt,null);v&&(s=v)}let l=Yn(c.componentType??{}),d=lI(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,uI(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(UA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[We],u=new _E(c,c[Ft],c[We]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return vN(o,i,s,r),e.attachToViewContainerRef(),XI(Rh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=mI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Jh(this._lContainer,n);r&&(Pc(Rh(this._lContainer),n),$w(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=Jh(this._lContainer,n);return r&&Pc(Rh(this._lContainer),n)!=null?new Pr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mI(t){return t[Mc]}function Rh(t){return t[Mc]||(t[Mc]=[])}function tx(t,e){let n,r=e[t.index];return Rn(r)?n=r:(n=oE(r,e,null,t),e[t.index]=n,lu(e,n)),rx(n,e,t,r),new _E(n,t,e)}function nx(t,e){let n=t[Ae],r=n.createComment(""),i=Dt(e,t),s=Qf(n,i);return jc(n,s,r,xM(n,i),!1),r}var rx=ox,ix=()=>!1;function sx(t,e,n){return ix(t,e,n)}function ox(t,e,n,r){if(t[Rr])return;let i;n.type&8?i=en(r):i=nx(e,n),t[Rr]=i}function ax(t){return typeof t=="function"&&t[eh]!==void 0}function IE(t){return ax(t)&&typeof t.set=="function"}function cx(t){return Object.getPrototypeOf(t.prototype).constructor}function Vt(t){let e=cx(t.type),n=!0,r=[t];for(;e;){let i;if(Zn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new b(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=wc(t.inputs),o.inputTransforms=wc(t.inputTransforms),o.declaredInputs=wc(t.declaredInputs),o.outputs=wc(t.outputs);let a=i.hostBindings;a&&fx(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&dx(t,c),u&&hx(t,u),ux(t,i),gA(t.outputs,i.outputs),Zn(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Vt&&(n=!1)}}e=Object.getPrototypeOf(e)}lx(r)}function ux(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function lx(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ws(i.hostAttrs,n=Ws(n,i.hostAttrs))}}function wc(t){return t===ki?{}:t===It?[]:t}function dx(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function hx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function fx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function ap(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Xn=class{},to=class{};var ff=class extends Xn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Hc(this);let i=PI(e);this._bootstrapComponents=Lw(i.bootstrap),this._r3Injector=Nw(e,n,[{provide:Xn,useValue:this},{provide:du,useValue:this.componentFactoryResolver},...r],ot(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},pf=class extends to{constructor(e){super(),this.moduleType=e}create(e){return new ff(this.moduleType,e,[])}};var qc=class extends Xn{constructor(e){super(),this.componentFactoryResolver=new Hc(this),this.instance=null;let n=new Xs([...e.providers,{provide:Xn,useValue:this},{provide:du,useValue:this.componentFactoryResolver}],e.parent||Hf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hu(t,e,n=null){return new qc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var fu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wE(t){return gx(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function px(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function gx(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function uo(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function mx(t,e,n,r,i,s,o,a,c){let u=e.consts,l=uu(e,t,4,o||null,xc(u,a));rE(e,n,l,xc(u,c)),qf(e,l);let d=l.tView=Zf(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Wi(t,e,n,r,i,s,o,a){let c=fe(),u=ht(),l=t+Jn,d=u.firstCreatePass?mx(l,u,c,e,n,r,i,s,o):u.data[l];io(d,!1);let h=yx(u,c,d,t);xf()&&Yf(u,c,h,d),xr(h,c);let f=oE(h,c,h,d);return c[l]=f,lu(c,f),sx(f,d,c),bf(d)&&Xw(u,c,d),o!=null&&eE(c,d,a),Wi}var yx=vx;function vx(t,e,n,r){return Pf(!0),e[Ae].createComment("")}function pu(t,e,n,r){let i=fe(),s=Xc();if(uo(i,s,e)){let o=ht(),a=Nf();aN(a,i,t,e,n,r)}return pu}function _x(t,e,n,r){return uo(t,Xc(),n)?e+nu(n)+r:zi}function Ec(t,e){return t<<17|e<<2}function Or(t){return t>>17&32767}function Ix(t){return(t&2)==2}function wx(t,e){return t&131071|e<<17}function gf(t){return t|2}function Hi(t){return(t&131068)>>2}function Mh(t,e){return t&-131069|e<<2}function Ex(t){return(t&1)===1}function mf(t){return t|1}function Dx(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Or(o),c=Hi(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||so(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=Or(t[a+1]);t[r+1]=Ec(h,a),h!==0&&(t[h+1]=Mh(t[h+1],r)),t[a+1]=wx(t[a+1],r)}else t[r+1]=Ec(a,0),a!==0&&(t[a+1]=Mh(t[a+1],r)),a=r;else t[r+1]=Ec(c,0),a===0?a=r:t[c+1]=Mh(t[c+1],r),c=r;u&&(t[r+1]=gf(t[r+1])),yI(t,l,r,!0),yI(t,l,r,!1),Tx(e,l,t,r,s),o=Ec(a,c),s?e.classBindings=o:e.styleBindings=o}function Tx(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&so(s,e)>=0&&(n[r+1]=mf(n[r+1]))}function yI(t,e,n,r){let i=t[n+1],s=e===null,o=r?Or(i):Hi(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],u=t[o+1];Cx(c,e)&&(a=!0,t[o+1]=r?mf(u):gf(u)),o=r?Or(u):Hi(u)}a&&(t[n+1]=r?gf(i):mf(i))}function Cx(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?so(t,e)>=0:!1}function Re(t,e,n){let r=fe(),i=Xc();if(uo(r,i,e)){let s=ht(),o=Nf();nE(s,o,r,t,e,r[Ae],n,!1)}return Re}function vI(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Xf(t,n,s[o],o,r)}function kr(t,e){return bx(t,e,null,!0),kr}function bx(t,e,n,r){let i=fe(),s=ht(),o=ZA(2);if(s.firstUpdatePass&&Ax(s,t,o,r),e!==zi&&uo(i,o,e)){let a=s.data[Gi()];Px(s,a,i,i[Ae],t,i[o+1]=Ox(e,n),r,o)}}function Sx(t,e){return e>=t.expandoStartIndex}function Ax(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Gi()],o=Sx(t,n);kx(s,r)&&e===null&&!o&&(e=!1),e=Rx(i,s,e,r),Dx(i,s,e,n,o,r)}}function Rx(t,e,n,r){let i=nR(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Nh(null,t,e,n,r),n=no(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Nh(i,t,e,n,r),s===null){let c=Mx(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Nh(null,t,e,c[1],r),c=no(c,e.attrs,r),Nx(t,e,r,c))}else s=xx(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Mx(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Hi(r)!==0)return t[Or(r)]}function Nx(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Or(i)]=r}function xx(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=no(r,o,n)}return no(r,e.attrs,n)}function Nh(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=no(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function no(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),cR(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Px(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=Ex(u)?_I(c,e,n,i,Hi(u),o):void 0;if(!Gc(l)){Gc(s)||Ix(u)&&(s=_I(c,null,n,i,a,o));let d=UI(Gi(),n);UM(r,o,d,i,s)}}function _I(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===zi&&(h=d?It:void 0);let f=d?Eh(h,r):l===r?h:void 0;if(u&&!Gc(f)&&(f=Eh(c,r)),Gc(f)&&(a=f,o))return a;let m=t[i+1];i=o?Or(m):Hi(m)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Eh(c,r))}return a}function Gc(t){return t!==void 0}function Ox(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=ot(ao(t)))),t}function kx(t,e){return(t.flags&(e?8:16))!==0}function Fx(t,e,n,r,i,s){let o=e.consts,a=xc(o,i),c=uu(e,t,2,r,a);return rE(e,n,c,xc(o,s)),c.attrs!==null&&lf(c,c.attrs,!1),c.mergedAttrs!==null&&lf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function q(t,e,n,r){let i=fe(),s=ht(),o=Jn+t,a=i[Ae],c=s.firstCreatePass?Fx(o,s,i,e,n,r):s.data[o],u=Vx(s,i,c,a,e,t);i[o]=u;let l=bf(c);return io(c,!0),zw(a,u,c),(c.flags&32)!==32&&xf()&&Yf(s,i,u,c),HA()===0&&xr(u,i),qA(),l&&(Xw(s,i,c),Zw(s,c,i)),r!==null&&eE(i,c),q}function K(){let t=at();GI()?YA():(t=t.parent,io(t,!1));let e=t;WA(e)&&KA(),GA();let n=ht();return n.firstCreatePass&&(qf(n,t),LI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&KR(e)&&vI(n,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&QR(e)&&vI(n,e,fe(),e.stylesWithoutHost,!1),K}function Oe(t,e,n,r){return q(t,e,n,r),K(),Oe}var Vx=(t,e,n,r,i,s)=>(Pf(!0),Uw(r,i,sR()));function EE(){return fe()}var zc="en-US";var Lx=zc;function Ux(t){typeof t=="string"&&(Lx=t.toLowerCase().replace(/_/g,"-"))}function Me(t,e,n,r){let i=fe(),s=ht(),o=at();return DE(s,i,i[Ae],o,t,e,r),Me}function jx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ks],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function DE(t,e,n,r,i,s,o){let a=bf(r),u=t.firstCreatePass&&hN(t),l=e[kt],d=dN(e),h=!0;if(r.type&3||o){let v=Dt(r,e),_=o?o(v):v,C=d.length,Z=o?de=>o(en(de[r.index])):r.index,G=null;if(!o&&a&&(G=jx(t,e,i,r.index)),G!==null){let de=G.__ngLastListenerFn__||G;de.__ngNextListenerFn__=s,G.__ngLastListenerFn__=s,h=!1}else{s=wI(r,e,l,s,!1);let de=n.listen(_,i,s);d.push(s,de),u&&u.push(i,Z,C,C+1)}}else s=wI(r,e,l,s,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let v=m.length;if(v)for(let _=0;_<v;_+=2){let C=m[_],Z=m[_+1],Ne=e[C][Z].subscribe(s),ee=d.length;if(d.push(s,Ne),u){let xe=typeof Ne=="function"?ee+1:-(ee+1);u.push(i,r.index,ee,xe)}}}}function II(t,e,n,r){let i=te(null);try{return Yt(6,e,n),n(r)!==!1}catch(s){return cE(t,s),!1}finally{Yt(7,e,n),te(i)}}function wI(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?er(t.index,e):e;tp(a);let c=II(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=II(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function gu(t=1){return iR(t)}function le(t,e=""){let n=fe(),r=ht(),i=t+Jn,s=r.firstCreatePass?uu(r,i,1,e,null):r.data[i],o=Bx(r,n,s,e,t);n[i]=o,xf()&&Yf(r,n,o,s),io(s,!1)}var Bx=(t,e,n,r,i)=>(Pf(!0),IM(e[Ae],r));function rr(t){return lo("",t,""),rr}function lo(t,e,n){let r=fe(),i=_x(r,t,e,n);return i!==zi&&fN(r,Gi(),i),lo}function cp(t,e,n){IE(e)&&(e=e());let r=fe(),i=Xc();if(uo(r,i,e)){let s=ht(),o=Nf();nE(s,o,r,t,e,r[Ae],n,!1)}return cp}function TE(t,e){let n=IE(t);return n&&t.set(e),n}function up(t,e){let n=fe(),r=ht(),i=at();return DE(r,n,n[Ae],i,t,e),up}function $x(t,e,n){let r=ht();if(r.firstCreatePass){let i=Zn(t);yf(n,r.data,r.blueprint,i,!0),yf(e,r.data,r.blueprint,i,!1)}}function yf(t,e,n,r,i){if(t=et(t),Array.isArray(t))for(let s=0;s<t.length;s++)yf(t[s],e,n,r,i);else{let s=ht(),o=fe(),a=at(),c=ji(t)?t:et(t.provide),u=mw(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(ji(t)||!t.multi){let f=new Nr(u,i,S),m=Ph(c,e,i?l:l+h,d);m===-1?(Qh(Lc(a,o),s,c),xh(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[m]=f,o[m]=f)}else{let f=Ph(c,e,l+h,d),m=Ph(c,e,l,l+h),v=f>=0&&n[f],_=m>=0&&n[m];if(i&&!_||!i&&!v){Qh(Lc(a,o),s,c);let C=Gx(i?qx:Hx,n.length,i,r,u);!i&&_&&(n[m].providerFactory=C),xh(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(C),o.push(C)}else{let C=CE(n[i?m:f],u,!i&&r);xh(s,t,f>-1?f:m,C)}!i&&r&&_&&n[m].componentProviders++}}}function xh(t,e,n,r){let i=ji(e),s=PR(e);if(i||s){let c=(s?et(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function CE(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ph(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Hx(t,e,n,r){return vf(this.multi,[])}function qx(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Bi(n,n[J],this.providerFactory.index,r);s=a.slice(0,o),vf(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],vf(i,s);return s}function vf(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Gx(t,e,n,r,i){let s=new Nr(t,n,S);return s.multi=[],s.index=e,s.componentProviders=0,CE(s,i,r&&!n),s}function Fr(t,e=[]){return n=>{n.providersResolver=(r,i)=>$x(r,i?i(t):t,e)}}var zx=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=fw(!1,r.type),s=i.length>0?hu([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=R({token:e,providedIn:"environment",factory:()=>new e(O(dt))});let t=e;return t})();function on(t){rp("NgStandalone"),t.getStandaloneInjector=e=>e.get(zx).getOrCreateStandaloneInjector(t)}var Sn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},bE=new Sn("17.2.4"),mu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var SE=new M("");function Vr(t){return!!t&&typeof t.then=="function"}function AE(t){return!!t&&typeof t.subscribe=="function"}var yu=new M(""),RE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=I(yu,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Vr(o))r.push(o);else if(AE(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vu=new M("");function Wx(){g_(()=>{throw new b(600,!1)})}function Kx(t){return t.isBoundToModule}function Qx(t,e,n){try{let r=n();return Vr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var ho=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(xw),this.afterRenderEffectManager=I(op),this.componentTypes=[],this.components=[],this.isStable=I(fu).hasPendingTasks.pipe(B(r=>!r)),this._injector=I(dt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof $c;if(!this._injector.get(RE).done){let f=!s&&xI(r),m=!1;throw new b(405,m)}let a;s?a=r:a=this._injector.get(du).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Kx(a)?void 0:this._injector.get(Xn),u=i||a.selector,l=a.create(ct.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(SE,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Oh(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new b(101,!1);let r=te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,te(r)}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===fE)throw new b(103,!1);let s=r===0;for(let{_lView:o,notifyErrorHandler:a}of this._views)!s&&!kh(o)||this.detectChangesInView(o,a,s);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:o})=>kh(o))&&(i.execute(),!this._views.some(({_lView:o})=>kh(o))))break}}detectChangesInView(r,i,s){let o;s?(o=0,r[P]|=1024):r[P]&64?o=0:o=1,pE(r,i,o)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Oh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(vu,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Oh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new b(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Oh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kh(t){return Af(t)}var _f=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},_u=(()=>{let e=class e{compileModuleSync(r){return new pf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=PI(r),o=Lw(s.declarations).reduce((a,c)=>{let u=Yn(c);return u&&a.push(new $i(u)),a},[]);return new _f(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Yx=(()=>{let e=class e{constructor(){this.zone=I(ie),this.applicationRef=I(ho)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jx(t){return[{provide:ie,useFactory:t},{provide:Ui,multi:!0,useFactory:()=>{let e=I(Yx,{optional:!0});return()=>e.initialize()}},{provide:Ui,multi:!0,useFactory:()=>{let e=I(tP);return()=>{e.initialize()}}},{provide:xw,useFactory:Zx}]}function Zx(){let t=I(ie),e=I(tn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function Xx(t){let e=Jx(()=>new ie(eP(t)));return iu([[],e])}function eP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var tP=(()=>{let e=class e{constructor(){this.subscription=new we,this.initialized=!1,this.zone=I(ie),this.pendingTasks=I(fu)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nP(){return typeof $localize<"u"&&$localize.locale||zc}var lp=new M("",{providedIn:"root",factory:()=>I(lp,H.Optional|H.SkipSelf)||nP()});var ME=new M("");var Sc=null;function rP(t=[],e){return ct.create({name:e,providers:[{provide:su,useValue:"platform"},{provide:ME,useValue:new Set([()=>Sc=null])},...t]})}function iP(t=[]){if(Sc)return Sc;let e=rP(t);return Sc=e,Wx(),sP(e),e}function sP(t){t.get(Ff,null)?.forEach(n=>n())}var Lt=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oP;let t=e;return t})();function oP(t){return aP(at(),fe(),(t&16)===16)}function aP(t,e,n){if(Yc(t)&&!n){let r=er(t.index,e);return new Pr(r,r)}else if(t.type&47){let r=e[Xt];return new Pr(r,e)}return null}var If=class{constructor(){}supports(e){return wE(e)}create(e){return new wf(e)}},cP=(t,e)=>e,wf=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||cP}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<EI(r,i,s)?n:r,a=EI(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,m=f+h;l<=m&&m<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!wE(e))throw new b(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,px(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Ef(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Wc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Wc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ef=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Df=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Wc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Df,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function EI(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function DI(){return new dp([new If])}var dp=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||DI()),deps:[[e,new jf,new Ct]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new b(901,!1)}};e.\u0275prov=R({token:e,providedIn:"root",factory:DI});let t=e;return t})();function NE(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=iP(r),s=[Xx(),...n||[]],a=new qc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(ie);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(tn,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(ME);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),Qx(u,c,()=>{let f=a.get(RE);return f.runInitializers(),f.donePromise.then(()=>{let m=a.get(lp,zc);Ux(m||zc);let v=a.get(ho);return e!==void 0&&v.bootstrap(e),v})})})}catch(e){return Promise.reject(e)}}function Lr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function xE(t){let e=Yn(t);if(!e)return null;let n=new $i(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var FE=null;function Pn(){return FE}function VE(t){FE??=t}var Iu=class{};var ut=new M(""),gp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>I(uP),providedIn:"platform"});let t=e;return t})(),LE=new M(""),uP=(()=>{let e=class e extends gp{constructor(){super(),this._doc=I(ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pn().getBaseHref(this._doc)}onPopState(r){let i=Pn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Pn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function mp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function PE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function xn(t){return t&&t[0]!=="?"?"?"+t:t}var On=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>I(yp),providedIn:"root"});let t=e;return t})(),UE=new M(""),yp=(()=>{let e=class e extends On{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??I(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return mp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+xn(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+xn(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+xn(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(O(gp),O(UE,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jE=(()=>{let e=class e extends On{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=mp(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+xn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+xn(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(O(gp),O(UE,8))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Ki=(()=>{let e=class e{constructor(r){this._subject=new Pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=hP(PE(OE(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+xn(i))}normalize(r){return e.stripTrailingSlash(dP(this._basePath,OE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xn(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xn(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=xn,e.joinWithSlash=mp,e.stripTrailingSlash=PE,e.\u0275fac=function(i){return new(i||e)(O(On))},e.\u0275prov=R({token:e,factory:()=>lP(),providedIn:"root"});let t=e;return t})();function lP(){return new Ki(O(On))}function dP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function OE(t){return t.replace(/\/index.html$/,"")}function hP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function BE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var hp=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Eu=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new hp(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),kE(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);kE(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(S(co),S(np),S(dp))},e.\u0275dir=$e({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function kE(t,e){t.context.$implicit=e.item}var vp="browser",fP="server";function pP(t){return t===vp}function _p(t){return t===fP}var $E=(()=>{let e=class e{};e.\u0275prov=R({token:e,providedIn:"root",factory:()=>pP(I(rn))?new fp(I(ut),window):new pp});let t=e;return t})(),fp=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=gP(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function gP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var pp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},wu=class{};var Ep=class extends Iu{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dp=class t extends Ep{static makeCurrent(){VE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=yP();return n==null?null:vP(n)}resetBaseElement(){fo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return BE(document.cookie,e)}},fo=null;function yP(){return fo=fo||document.querySelector("base"),fo?fo.getAttribute("href"):null}function vP(t){return new URL(t,document.baseURI).pathname}var _P=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Tp=new M(""),zE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new b(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(O(Tp),O(ie))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),Du=class{constructor(e){this._doc=e}},Ip="ng-app-id",WE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_p(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ip}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Ip),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Ip,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(O(ut),O(kf),O(Vf,8),O(rn))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),wp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bp=/%COMP%/g,KE="%COMP%",IP=`_nghost-${KE}`,wP=`_ngcontent-${KE}`,EP=!0,DP=new M("",{providedIn:"root",factory:()=>EP});function TP(t){return wP.replace(bp,t)}function CP(t){return IP.replace(bp,t)}function QE(t,e){return e.map(n=>n.replace(bp,t))}var HE=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=_p(c),this.defaultRenderer=new po(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Zt.ShadowDom&&(i=ae(T({},i),{encapsulation:Zt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Tu?s.applyToHost(r):s instanceof go&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Zt.Emulated:o=new Tu(u,l,i,this.appId,d,a,c,h);break;case Zt.ShadowDom:return new Cp(u,l,r,i,a,c,this.nonce,h);default:o=new go(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(O(zE),O(WE),O(kf),O(DP),O(ut),O(rn),O(ie),O(Vf))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),po=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(wp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(qE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(qE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new b(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=wp[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=wp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(bn.DashCase|bn.Important)?e.style.setProperty(n,r,i&bn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&bn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Pn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function qE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Cp=class extends po{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=QE(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},go=class extends po{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?QE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Tu=class extends go{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=TP(u),this.hostAttr=CP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},bP=(()=>{let e=class e extends Du{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(O(ut))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})(),GE=["alt","control","meta","shift"],SP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},AP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},RP=(()=>{let e=class e extends Du{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),GE.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=SP[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),GE.forEach(a=>{if(a!==s){let c=AP[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(O(ut))},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function YE(t,e){return NE(T({rootComponent:t},MP(e)))}function MP(t){return{appProviders:[...kP,...t?.providers??[]],platformProviders:OP}}function NP(){Dp.makeCurrent()}function xP(){return new tn}function PP(){return tw(document),document}var OP=[{provide:rn,useValue:vp},{provide:Ff,useValue:NP,multi:!0},{provide:ut,useFactory:PP,deps:[]}];var kP=[{provide:su,useValue:"root"},{provide:tn,useFactory:xP,deps:[]},{provide:Tp,useClass:bP,multi:!0,deps:[ut,ie,rn]},{provide:Tp,useClass:RP,multi:!0,deps:[ut]},HE,WE,zE,{provide:eo,useExisting:HE},{provide:wu,useClass:_P,deps:[]},[]];var JE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(O(ut))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var XE=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VP=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new Ap;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let m=u<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ap=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},LP=function(t){let e=XE(t);return eD.encodeByteArray(e,!0)},mo=function(t){return LP(t).replace(/\./g,"")},Mp=function(t){try{return eD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function UP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var jP=()=>UP().__FIREBASE_DEFAULTS__,BP=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$P=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Mp(t[1]);return e&&JSON.parse(e)},bu=()=>{try{return jP()||BP()||$P()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tD=t=>{var e,n;return(n=(e=bu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nD=t=>{let e=tD(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Np=()=>{var t;return(t=bu())===null||t===void 0?void 0:t.config},rD=t=>{var e;return(e=bu())===null||e===void 0?void 0:e[`_${t}`]};var Cu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function iD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mo(JSON.stringify(n)),mo(JSON.stringify(o)),""].join(".")}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function HP(){var t;let e=(t=bu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cD(){return!HP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Su(){try{return typeof indexedDB=="object"}catch{return!1}}function uD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var qP="FirebaseError",bt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qP,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kn.prototype.create)}},kn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?GP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bt(i,a,r)}};function GP(t,e){return t.replace(zP,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var zP=/\{\$([^}]+)}/g;function Qi(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(ZE(s)&&ZE(o)){if(!Qi(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function ZE(t){return t!==null&&typeof t=="object"}function xp(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function lD(t,e){let n=new Rp(t,e);return n.subscribe.bind(n)}var Rp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");WP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Sp),i.error===void 0&&(i.error=Sp),i.complete===void 0&&(i.complete=Sp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function WP(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sp(){}var Uz=4*60*60*1e3;function ft(t){return t&&t._delegate?t._delegate:t}var St=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ur="[DEFAULT]";var Pp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Cu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QP(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function KP(t){return t===Ur?void 0:t}function QP(t){return t.instantiationMode==="EAGER"}var Au=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Pp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var YP=[],Q=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Q||{}),JP={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ZP=Q.INFO,XP={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},eO=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=XP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ir=class{constructor(e){this.name=e,this._logLevel=ZP,this._logHandler=eO,this._userLogHandler=null,YP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}};var tO=(t,e)=>e.some(n=>t instanceof n),dD,hD;function nO(){return dD||(dD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rO(){return hD||(hD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var fD=new WeakMap,kp=new WeakMap,pD=new WeakMap,Op=new WeakMap,Vp=new WeakMap;function iO(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(an(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fD.set(n,t)}).catch(()=>{}),Vp.set(e,t),e}function sO(t){if(kp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kp.set(t,e)}var Fp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||pD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return an(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gD(t){Fp=t(Fp)}function oO(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Ru(this),e,...n);return pD.set(r,e.sort?e.sort():[e]),an(r)}:rO().includes(t)?function(...e){return t.apply(Ru(this),e),an(fD.get(this))}:function(...e){return an(t.apply(Ru(this),e))}}function aO(t){return typeof t=="function"?oO(t):(t instanceof IDBTransaction&&sO(t),tO(t,nO())?new Proxy(t,Fp):t)}function an(t){if(t instanceof IDBRequest)return iO(t);if(Op.has(t))return Op.get(t);let e=aO(t);return e!==t&&(Op.set(t,e),Vp.set(e,t)),e}var Ru=t=>Vp.get(t);function yD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=an(o);return r&&o.addEventListener("upgradeneeded",c=>{r(an(o.result),c.oldVersion,c.newVersion,an(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var cO=["get","getKey","getAll","getAllKeys","count"],uO=["put","add","delete","clear"],Lp=new Map;function mD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=uO.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||cO.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Lp.set(e,s),s}gD(t=>ae(T({},t),{get:(e,n,r)=>mD(e,n)||t.get(e,n,r),has:(e,n)=>!!mD(e,n)||t.has(e,n)}));var jp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lO(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function lO(t){let e=t.getComponent();return e?.type==="VERSION"}var Bp="@firebase/app",vD="0.9.29";var jr=new ir("@firebase/app"),dO="@firebase/app-compat",hO="@firebase/analytics-compat",fO="@firebase/analytics",pO="@firebase/app-check-compat",gO="@firebase/app-check",mO="@firebase/auth",yO="@firebase/auth-compat",vO="@firebase/database",_O="@firebase/database-compat",IO="@firebase/functions",wO="@firebase/functions-compat",EO="@firebase/installations",DO="@firebase/installations-compat",TO="@firebase/messaging",CO="@firebase/messaging-compat",bO="@firebase/performance",SO="@firebase/performance-compat",AO="@firebase/remote-config",RO="@firebase/remote-config-compat",MO="@firebase/storage",NO="@firebase/storage-compat",xO="@firebase/firestore",PO="@firebase/firestore-compat",OO="firebase",kO="10.9.0";var $p="[DEFAULT]",FO={[Bp]:"fire-core",[dO]:"fire-core-compat",[fO]:"fire-analytics",[hO]:"fire-analytics-compat",[gO]:"fire-app-check",[pO]:"fire-app-check-compat",[mO]:"fire-auth",[yO]:"fire-auth-compat",[vO]:"fire-rtdb",[_O]:"fire-rtdb-compat",[IO]:"fire-fn",[wO]:"fire-fn-compat",[EO]:"fire-iid",[DO]:"fire-iid-compat",[TO]:"fire-fcm",[CO]:"fire-fcm-compat",[bO]:"fire-perf",[SO]:"fire-perf-compat",[AO]:"fire-rc",[RO]:"fire-rc-compat",[MO]:"fire-gcs",[NO]:"fire-gcs-compat",[xO]:"fire-fst",[PO]:"fire-fst-compat","fire-js":"fire-js",[OO]:"fire-js-all"};var yo=new Map,Hp=new Map;function VO(t,e){try{t.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function or(t){let e=t.name;if(Hp.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;Hp.set(e,t);for(let n of yo.values())VO(n,t);return!0}function Wp(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var LO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},sr=new kn("app","Firebase",LO);var qp=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new St("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}};var Yi=kO;function Kp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:$p,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw sr.create("bad-app-name",{appName:String(i)});if(n||(n=Np()),!n)throw sr.create("no-options");let s=yo.get(i);if(s){if(Qi(n,s.options)&&Qi(r,s.config))return s;throw sr.create("duplicate-app",{appName:i})}let o=new Au(i);for(let c of Hp.values())o.addComponent(c);let a=new qp(n,r,o);return yo.set(i,a),a}function _o(t=$p){let e=yo.get(t);if(!e&&t===$p&&Np())return Kp();if(!e)throw sr.create("no-app",{appName:t});return e}function Mu(){return Array.from(yo.values())}function ke(t,e,n){var r;let i=(r=FO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}or(new St(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var UO="firebase-heartbeat-database",jO=1,vo="firebase-heartbeat-store",Up=null;function ED(){return Up||(Up=yD(UO,jO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vo)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),Up}function BO(t){return p(this,null,function*(){try{let n=(yield ED()).transaction(vo),r=yield n.objectStore(vo).get(DD(t));return yield n.done,r}catch(e){if(e instanceof bt)jr.warn(e.message);else{let n=sr.create("idb-get",{originalErrorMessage:e?.message});jr.warn(n.message)}}})}function _D(t,e){return p(this,null,function*(){try{let r=(yield ED()).transaction(vo,"readwrite");yield r.objectStore(vo).put(e,DD(t)),yield r.done}catch(n){if(n instanceof bt)jr.warn(n.message);else{let r=sr.create("idb-set",{originalErrorMessage:n?.message});jr.warn(r.message)}}})}function DD(t){return`${t.name}!${t.options.appId}`}var $O=1024,HO=30*24*60*60*1e3,Gp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new zp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ID();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=HO}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=ID(),{heartbeatsToSend:r,unsentEntries:i}=qO(this._heartbeatsCache.heartbeats),s=mo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function ID(){return new Date().toISOString().substring(0,10)}function qO(t,e=$O){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var zp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Su()?uD().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield BO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _D(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return _D(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function wD(t){return mo(JSON.stringify({version:2,heartbeats:t})).length}function GO(t){or(new St("platform-logger",e=>new jp(e),"PRIVATE")),or(new St("heartbeat",e=>new Gp(e),"PRIVATE")),ke(Bp,vD,t),ke(Bp,vD,"esm2017"),ke("fire-js","")}GO("");var zO="firebase",WO="10.9.0";ke(zO,WO,"app");var Zi=new Sn("ANGULARFIRE2_VERSION");function Yp(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var wo=(t,e)=>{let n=e?[e]:Mu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Io=class{constructor(){return wo(KO)}},KO="app-check";function Ji(){}var Nu=class{zone;delegate;constructor(e,n=fh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Qp=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji)),n.pipe(Te({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Eo=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Nu(Zone.current)),this.insideAngular=n.run(()=>new Nu(Zone.current,$s)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(O(ie))};static \u0275prov=R({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function QO(t){return xu().ngZone.runOutsideAngular(()=>t())}function Br(t){return xu().ngZone.run(()=>t())}function YO(t){return JO(xu())(t)}function JO(t){return function(n){return n=n.lift(new Qp(t.ngZone)),n.pipe(Gn(t.outsideAngular),qn(t.insideAngular))}}var ZO=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Br(()=>t.apply(void 0,r))},tt=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Br(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ji,{},Ji,Ji))),r[s]=ZO(r[s],n));let i=QO(()=>t.apply(this,r));if(!e)if(i instanceof z){let s=xu();return i.pipe(Gn(s.outsideAngular),qn(s.insideAngular))}else return Br(()=>i);return i instanceof z?i.pipe(YO):i instanceof Promise?Br(()=>new Promise((s,o)=>i.then(a=>Br(()=>s(a)),a=>Br(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Br(()=>i)};var $r=class{constructor(e){return e}},Do=class{constructor(){return Mu()}};function XO(t){return t&&t.length===1?t[0]:new $r(_o())}var Jp=new M("angularfire2._apps"),ek={provide:$r,useFactory:XO,deps:[[new Ct,Jp]]},tk={provide:Do,deps:[[new Ct,Jp]]};function nk(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new $r(r)}}var rk=(()=>{class t{constructor(n){ke("angularfire",Zi.full,"core"),ke("angularfire",Zi.full,"app"),ke("angular",bE.full,n.toString())}static \u0275fac=function(r){return new(r||t)(O(rn))};static \u0275mod=Et({type:t});static \u0275inj=Tt({providers:[ek,tk]})}return t})();function TD(t,...e){return{ngModule:rk,providers:[{provide:Jp,useFactory:nk(t),multi:!0,deps:[ie,ct,Eo,...e]}]}}var CD=tt(Kp,!0);function xD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var PD=xD,OD=new kn("auth","Firebase",xD());var ku=new ir("@firebase/auth");function sk(t,...e){ku.logLevel<=Q.WARN&&ku.warn(`Auth (${Yi}): ${t}`,...e)}function Ou(t,...e){ku.logLevel<=Q.ERROR&&ku.error(`Auth (${Yi}): ${t}`,...e)}function bD(t,...e){throw ug(t,...e)}function cg(t,...e){return ug(t,...e)}function ok(t,e,n){let r=Object.assign(Object.assign({},PD()),{[e]:n});return new kn("auth","Firebase",r).create(e,{appName:t.name})}function ug(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return OD.create(t,...e)}function se(t,e,...n){if(!t)throw ug(e,...n)}function To(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ou(e),new Error(e)}function Fu(t,e){t||To(e)}function ak(){return SD()==="http:"||SD()==="https:"}function SD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function ck(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ak()||oD()||"connection"in navigator)?navigator.onLine:!0}function uk(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var qr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fu(n>e,"Short delay should be less than long delay!"),this.isMobile=sD()||aD()}get(){return ck()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lk(t,e){Fu(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Vu=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var dk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var hk=new qr(3e4,6e4);function kD(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function qu(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return FD(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=xp(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),Vu.fetch()(VD(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function FD(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},dk),e);try{let i=new eg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Pu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Pu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Pu(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ok(t,l,u);bD(t,l)}}catch(i){if(i instanceof bt)throw i;bD(t,"network-request-failed",{message:String(i)})}})}function VD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?lk(t.config,i):`${t.config.apiScheme}://${i}`}var eg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cg(this.auth,"network-request-failed")),hk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Pu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=cg(t,e,r);return i.customData._tokenResponse=n,i}function fk(t,e){return p(this,null,function*(){return qu(t,"POST","/v1/accounts:delete",e)})}function pk(t,e){return p(this,null,function*(){return qu(t,"POST","/v1/accounts:lookup",e)})}function Co(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function lg(t,e=!1){return p(this,null,function*(){let n=ft(t),r=yield n.getIdToken(e),i=LD(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Co(Zp(i.auth_time)),issuedAtTime:Co(Zp(i.iat)),expirationTime:Co(Zp(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Zp(t){return Number(t)*1e3}function LD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ou("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mp(n);return i?JSON.parse(i):(Ou("Failed to decode base64 JWT payload"),null)}catch(i){return Ou("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gk(t){let e=LD(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function tg(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof bt&&mk(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function mk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var ng=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Lu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Co(this.lastLoginAt),this.creationTime=Co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Uu(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield tg(t,pk(n,{idToken:r}));se(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vk(s.providerUserInfo):[],a=yk(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lu(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function dg(t){return p(this,null,function*(){let e=ft(t);yield Uu(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function yk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vk(t){return t.map(e=>{var{providerId:n}=e,r=ph(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function _k(t,e){return p(this,null,function*(){let n=yield FD(t,{},()=>p(this,null,function*(){let r=xp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=VD(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Vu.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Ik(t,e){return p(this,null,function*(){return qu(t,"POST","/v2/accounts:revokeToken",kD(t,e))})}var ju=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return se(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield _k(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return To("not implemented")}};function ar(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Bu=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ph(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ng(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield tg(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return lg(this,e)}reload(){return dg(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Uu(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield tg(this,fk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,C=(u=n.createdAt)!==null&&u!==void 0?u:void 0,Z=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:G,emailVerified:de,isAnonymous:Ne,providerData:ee,stsTokenManager:xe}=n;se(G&&xe,e,"internal-error");let Kt=ju.fromJSON(this.name,xe);se(typeof G=="string",e,"internal-error"),ar(d,e.name),ar(h,e.name),se(typeof de=="boolean",e,"internal-error"),se(typeof Ne=="boolean",e,"internal-error"),ar(f,e.name),ar(m,e.name),ar(v,e.name),ar(_,e.name),ar(C,e.name),ar(Z,e.name);let _r=new t({uid:G,auth:e,email:h,emailVerified:de,displayName:d,isAnonymous:Ne,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:Kt,createdAt:C,lastLoginAt:Z});return ee&&Array.isArray(ee)&&(_r.providerData=ee.map(pi=>Object.assign({},pi))),_&&(_r._redirectEventId=_),_r}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new ju;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Uu(s),s})}};var AD=new Map;function Hr(t){Fu(t instanceof Function,"Expected a class definition");let e=AD.get(t);return e?(Fu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AD.set(t,e),e)}var wk=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),rg=wk;function Xp(t,e,n){return`firebase:${t}:${e}:${n}`}var $u=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Xp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Bu._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Hr(rg),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Hr(rg),o=Xp(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=Bu._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function RD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ck(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ek(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sk(e))return"Blackberry";if(Ak(e))return"Webos";if(Dk(e))return"Safari";if((e.includes("chrome/")||Tk(e))&&!e.includes("edge/"))return"Chrome";if(bk(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Ek(t=Ke()){return/firefox\//i.test(t)}function Dk(t=Ke()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tk(t=Ke()){return/crios\//i.test(t)}function Ck(t=Ke()){return/iemobile/i.test(t)}function bk(t=Ke()){return/android/i.test(t)}function Sk(t=Ke()){return/blackberry/i.test(t)}function Ak(t=Ke()){return/webos/i.test(t)}function UD(t,e=[]){let n;switch(t){case"Browser":n=RD(Ke());break;case"Worker":n=`${RD(Ke())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yi}/${r}`}var ig=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Rk(n){return p(this,arguments,function*(t,e={}){return qu(t,"GET","/v2/passwordPolicy",kD(t,e))})}var Mk=6,sg=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Mk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var og=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hu(this),this.idTokenSubscription=new Hu(this),this.beforeStateQueue=new ig(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield $u.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield Uu(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=uk()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?ft(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Hr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield Rk(this),n=new sg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Ik(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Hr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=yield $u.create(this,[Hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=UD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&sk(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Nk(t){return ft(t)}var Hu=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=lD(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var xk={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Pk(t){xk=t}function Ok(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function kk(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Hr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var P3=Ok("rcb"),O3=new qr(3e4,6e4);var k3=new qr(2e3,1e4);var F3=10*60*1e3;var V3=new qr(3e4,6e4);var L3=new qr(5e3,15e3);var U3=encodeURIComponent("fac");var MD="@firebase/auth",ND="1.6.2";var ag=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Fk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vk(t){or(new St("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UD(t)},u=new og(r,i,s,c);return kk(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),or(new St("auth-internal",e=>{let n=Nk(e.getProvider("auth").getImmediate());return(r=>new ag(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ke(MD,ND,Fk(t)),ke(MD,ND,"esm2017")}var Lk=5*60,j3=rD("authIdTokenMaxAge")||Lk;function Uk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Pk({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=cg("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Uk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vk("Browser");var L1="auth";var Gu=class{constructor(){return wo(L1)}};var U1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bt={},w,Pg=Pg||{},k=U1||self;function sl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Uo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function j1(t){return Object.prototype.hasOwnProperty.call(t,hg)&&t[hg]||(t[hg]=++B1)}var hg="closure_uid_"+(1e9*Math.random()>>>0),B1=0;function $1(t,e,n){return t.call.apply(t.bind,arguments)}function H1(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Qe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qe=$1:Qe=H1,Qe.apply(null,arguments)}function zu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ve(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function cr(){this.s=this.s,this.o=this.o}var q1=0;cr.prototype.s=!1;cr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),q1!=0)&&j1(this)};cr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ZD=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Og(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function jD(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(sl(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ye(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var G1=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};k.addEventListener("test",n,e),k.removeEventListener("test",n,e)}catch{}return t}();function No(t){return/^[\s\xa0]*$/.test(t)}function ol(){var t=k.navigator;return t&&(t=t.userAgent)?t:""}function cn(t){return ol().indexOf(t)!=-1}function kg(t){return kg[" "](t),t}kg[" "]=function(){};function z1(t,e){var n=OF;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var W1=cn("Opera"),ns=cn("Trident")||cn("MSIE"),XD=cn("Edge"),yg=XD||ns,e0=cn("Gecko")&&!(ol().toLowerCase().indexOf("webkit")!=-1&&!cn("Edge"))&&!(cn("Trident")||cn("MSIE"))&&!cn("Edge"),K1=ol().toLowerCase().indexOf("webkit")!=-1&&!cn("Edge");function t0(){var t=k.document;return t?t.documentMode:void 0}var vg;e:{if(Wu="",Ku=function(){var t=ol();if(e0)return/rv:([^\);]+)(\)|;)/.exec(t);if(XD)return/Edge\/([\d\.]+)/.exec(t);if(ns)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(K1)return/WebKit\/(\S+)/.exec(t);if(W1)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ku&&(Wu=Ku?Ku[1]:""),ns&&(Qu=t0(),Qu!=null&&Qu>parseFloat(Wu))){vg=String(Qu);break e}vg=Wu}var Wu,Ku,Qu,_g;k.document&&ns?(fg=t0(),_g=fg||parseInt(vg,10)||void 0):_g=void 0;var fg,Q1=_g;function xo(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(e0){e:{try{kg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Y1[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&xo.$.h.call(this)}}Ve(xo,Ye);var Y1={2:"touch",3:"pen",4:"mouse"};xo.prototype.h=function(){xo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var jo="closure_listenable_"+(1e6*Math.random()|0),J1=0;function Z1(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++J1,this.fa=this.ia=!1}function al(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Fg(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function X1(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function n0(t){let e={};for(let n in t)e[n]=t[n];return e}var BD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function r0(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<BD.length;s++)n=BD[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function cl(t){this.src=t,this.g={},this.h=0}cl.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=wg(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Z1(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Ig(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=ZD(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(al(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function wg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Vg="closure_lm_"+(1e6*Math.random()|0),pg={};function i0(t,e,n,r,i){if(r&&r.once)return o0(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)i0(t,e[s],n,r,i);return null}return n=jg(n),t&&t[jo]?t.O(e,n,Uo(r)?!!r.capture:!!r,i):s0(t,e,n,!1,r,i)}function s0(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Uo(i)?!!i.capture:!!i,a=Ug(t);if(a||(t[Vg]=a=new cl(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=eF(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)G1||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(c0(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function eF(){function t(n){return e.call(t.src,t.listener,n)}let e=tF;return t}function o0(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)o0(t,e[s],n,r,i);return null}return n=jg(n),t&&t[jo]?t.P(e,n,Uo(r)?!!r.capture:!!r,i):s0(t,e,n,!0,r,i)}function a0(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)a0(t,e[s],n,r,i);else r=Uo(r)?!!r.capture:!!r,n=jg(n),t&&t[jo]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=wg(s,n,r,i),-1<n&&(al(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ug(t))&&(e=t.g[e.toString()],t=-1,e&&(t=wg(e,n,r,i)),(n=-1<t?e[t]:null)&&Lg(n))}function Lg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[jo])Ig(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(c0(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ug(e))?(Ig(n,t),n.h==0&&(n.src=null,e[Vg]=null)):al(t)}}}function c0(t){return t in pg?pg[t]:pg[t]="on"+t}function tF(t,e){if(t.fa)t=!0;else{e=new xo(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Lg(t),t=n.call(r,e)}return t}function Ug(t){return t=t[Vg],t instanceof cl?t:null}var gg="__closure_events_fn_"+(1e9*Math.random()>>>0);function jg(t){return typeof t=="function"?t:(t[gg]||(t[gg]=function(e){return t.handleEvent(e)}),t[gg])}function Fe(){cr.call(this),this.i=new cl(this),this.S=this,this.J=null}Ve(Fe,cr);Fe.prototype[jo]=!0;Fe.prototype.removeEventListener=function(t,e,n,r){a0(this,t,e,n,r)};function qe(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ye(e,t);else if(e instanceof Ye)e.target=e.target||t;else{var i=e;e=new Ye(r,t),r0(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Yu(o,r,!0,e)&&i}if(o=e.g=t,i=Yu(o,r,!0,e)&&i,i=Yu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Yu(o,r,!1,e)&&i}Fe.prototype.N=function(){if(Fe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)al(n[r]);delete t.g[e],t.h--}}this.J=null};Fe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Fe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Yu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ig(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Bg=k.JSON.stringify,Eg=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function nF(){var t=$g;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Dg=class{constructor(){this.h=this.g=null}add(e,n){let r=u0.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},u0=new Eg(()=>new Tg,t=>t.reset()),Tg=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function rF(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function iF(t){k.setTimeout(()=>{throw t},0)}var Po,Oo=!1,$g=new Dg,l0=()=>{let t=k.Promise.resolve(void 0);Po=()=>{t.then(sF)}},sF=()=>{for(var t;t=nF();){try{t.h.call(t.g)}catch(n){iF(n)}var e=u0;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Oo=!1};function ul(t,e){Fe.call(this),this.h=t||1,this.g=e||k,this.j=Qe(this.qb,this),this.l=Date.now()}Ve(ul,Fe);w=ul.prototype;w.ga=!1;w.T=null;w.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qe(this,"tick"),this.ga&&(Hg(this),this.start()))}};w.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Hg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}w.N=function(){ul.$.N.call(this),Hg(this),delete this.g};function qg(t,e,n){if(typeof t=="function")n&&(t=Qe(t,n));else if(t&&typeof t.handleEvent=="function")t=Qe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function d0(t){t.g=qg(()=>{t.g=null,t.i&&(t.i=!1,d0(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Cg=class extends cr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:d0(this)}N(){super.N(),this.g&&(k.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function ko(t){cr.call(this),this.h=t,this.g={}}Ve(ko,cr);var $D=[];function h0(t,e,n,r){Array.isArray(n)||(n&&($D[0]=n.toString()),n=$D);for(var i=0;i<n.length;i++){var s=i0(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function f0(t){Fg(t.g,function(e,n){this.g.hasOwnProperty(n)&&Lg(e)},t),t.g={}}ko.prototype.N=function(){ko.$.N.call(this),f0(this)};ko.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ll(){this.g=!0}ll.prototype.Ea=function(){this.g=!1};function oF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function aF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function es(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+uF(t,n)+(r?" "+r:"")})}function cF(t,e){t.info(function(){return"TIMEOUT: "+e})}ll.prototype.info=function(){};function uF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Bg(n)}catch{return e}}var Kr={},HD=null;function dl(){return HD=HD||new Fe}Kr.Ta="serverreachability";function p0(t){Ye.call(this,Kr.Ta,t)}Ve(p0,Ye);function Fo(t){let e=dl();qe(e,new p0(e))}Kr.STAT_EVENT="statevent";function g0(t,e){Ye.call(this,Kr.STAT_EVENT,t),this.stat=e}Ve(g0,Ye);function nt(t){let e=dl();qe(e,new g0(e,t))}Kr.Ua="timingevent";function m0(t,e){Ye.call(this,Kr.Ua,t),this.size=e}Ve(m0,Ye);function Bo(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}var hl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},y0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Gg(){}Gg.prototype.h=null;function qD(t){return t.h||(t.h=t.i())}function v0(){}var $o={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function zg(){Ye.call(this,"d")}Ve(zg,Ye);function Wg(){Ye.call(this,"c")}Ve(Wg,Ye);var bg;function fl(){}Ve(fl,Gg);fl.prototype.g=function(){return new XMLHttpRequest};fl.prototype.i=function(){return{}};bg=new fl;function Ho(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ko(this),this.P=lF,t=yg?125:void 0,this.V=new ul(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _0}function _0(){this.i=null,this.g="",this.h=!1}var lF=45e3,I0={},Sg={};w=Ho.prototype;w.setTimeout=function(t){this.P=t};function Ag(t,e,n){t.L=1,t.A=gl(Vn(e)),t.u=n,t.S=!0,w0(t,null)}function w0(t,e){t.G=Date.now(),qo(t),t.B=Vn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),R0(n.i,"t",r),t.o=0,n=t.l.J,t.h=new _0,t.g=Y0(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Cg(Qe(t.Pa,t,t.g),t.O)),h0(t.U,t.g,"readystatechange",t.nb),e=t.I?n0(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Fo(),oF(t.j,t.v,t.B,t.m,t.W,t.u)}w.nb=function(t){t=t.target;let e=this.M;e&&un(t)==3?e.l():this.Pa(t)};w.Pa=function(t){try{if(t==this.g)e:{let l=un(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||yg||this.g&&(this.h.h||this.g.ja()||KD(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Fo(3):Fo(2)),pl(this);var n=this.g.da();this.ca=n;t:if(E0(this)){var r=KD(this.g);t="";var i=r.length,s=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Mo(this);var o="";break t}this.h.i=new k.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,aF(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!No(a)){var u=a;break t}}u=null}if(n=u)es(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rg(this,n);else{this.i=!1,this.s=3,nt(12),Gr(this),Mo(this);break e}}this.S?(D0(this,l,o),yg&&this.i&&l==3&&(h0(this.U,this.V,"tick",this.mb),this.V.start())):(es(this.j,this.m,o,null),Rg(this,o)),l==4&&Gr(this),this.i&&!this.J&&(l==4?z0(this.l,this):(this.i=!1,qo(this)))}else NF(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Gr(this),Mo(this)}}}catch{}finally{}};function E0(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function D0(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=dF(t,n),i==Sg){e==4&&(t.s=4,nt(14),r=!1),es(t.j,t.m,null,"[Incomplete Response]");break}else if(i==I0){t.s=4,nt(15),es(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else es(t.j,t.m,i,null),Rg(t,i);E0(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,nt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xg(e),e.M=!0,nt(11))):(es(t.j,t.m,n,"[Invalid Chunked Response]"),Gr(t),Mo(t))}w.mb=function(){if(this.g){var t=un(this.g),e=this.g.ja();this.o<e.length&&(pl(this),D0(this,t,e),this.i&&t!=4&&qo(this))}};function dF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Sg:(n=Number(e.substring(n,r)),isNaN(n)?I0:(r+=1,r+n>e.length?Sg:(e=e.slice(r,r+n),t.o=r+n,e)))}w.cancel=function(){this.J=!0,Gr(this)};function qo(t){t.Y=Date.now()+t.P,T0(t,t.P)}function T0(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Bo(Qe(t.lb,t),e)}function pl(t){t.C&&(k.clearTimeout(t.C),t.C=null)}w.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(cF(this.j,this.B),this.L!=2&&(Fo(),nt(17)),Gr(this),this.s=2,Mo(this)):T0(this,this.Y-t)};function Mo(t){t.l.H==0||t.J||z0(t.l,t)}function Gr(t){pl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Hg(t.V),f0(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Rg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Mg(n.i,t))){if(!t.K&&Mg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)tl(n),vl(n);else break e;Zg(n),nt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Bo(Qe(n.ib,n),6e3));if(1>=x0(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zr(n,11)}else if((t.K||n.g==t)&&tl(n),!No(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.i;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Kg(s,s.h),s.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,pe(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Q0(r,r.J?r.pa:null,r.Y),o.K){P0(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(pl(a),qo(a)),r.g=o}else q0(r);0<n.j.length&&_l(n)}else u[0]!="stop"&&u[0]!="close"||zr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?zr(n,7):Jg(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Fo(4)}catch{}}function hF(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(sl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function fF(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(sl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function C0(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(sl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=fF(t),r=hF(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var b0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pF(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Wr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Wr){this.h=t.h,Xu(this,t.j),this.s=t.s,this.g=t.g,el(this,t.m),this.l=t.l;var e=t.i,n=new Vo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),GD(this,n),this.o=t.o}else t&&(e=String(t).match(b0))?(this.h=!1,Xu(this,e[1]||"",!0),this.s=Ao(e[2]||""),this.g=Ao(e[3]||"",!0),el(this,e[4]),this.l=Ao(e[5]||"",!0),GD(this,e[6]||"",!0),this.o=Ao(e[7]||"")):(this.h=!1,this.i=new Vo(null,this.h))}Wr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ro(e,zD,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ro(e,zD,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ro(n,n.charAt(0)=="/"?yF:mF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ro(n,_F)),t.join("")};function Vn(t){return new Wr(t)}function Xu(t,e,n){t.j=n?Ao(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function el(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function GD(t,e,n){e instanceof Vo?(t.i=e,IF(t.i,t.h)):(n||(e=Ro(e,vF)),t.i=new Vo(e,t.h))}function pe(t,e,n){t.i.set(e,n)}function gl(t){return pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ao(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ro(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,gF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function gF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var zD=/[#\/\?@]/g,mF=/[#\?:]/g,yF=/[#\?]/g,vF=/[#\?@]/g,_F=/#/g;function Vo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ur(t){t.g||(t.g=new Map,t.h=0,t.i&&pF(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}w=Vo.prototype;w.add=function(t,e){ur(this),this.i=null,t=rs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function S0(t,e){ur(t),e=rs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function A0(t,e){return ur(t),e=rs(t,e),t.g.has(e)}w.forEach=function(t,e){ur(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};w.ta=function(){ur(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};w.Z=function(t){ur(this);let e=[];if(typeof t=="string")A0(this,t)&&(e=e.concat(this.g.get(rs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};w.set=function(t,e){return ur(this),this.i=null,t=rs(this,t),A0(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};w.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function R0(t,e,n){S0(t,e),0<n.length&&(t.i=null,t.g.set(rs(t,e),Og(n)),t.h+=n.length)}w.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function rs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function IF(t,e){e&&!t.j&&(ur(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(S0(this,r),R0(this,i,n))},t)),t.j=e}var wF=class{constructor(t,e){this.g=t,this.map=e}};function M0(t){this.l=t||EF,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(k.g&&k.g.Ka&&k.g.Ka()&&k.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var EF=10;function N0(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function x0(t){return t.h?1:t.g?t.g.size:0}function Mg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Kg(t,e){t.g?t.g.add(e):t.h=e}function P0(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}M0.prototype.cancel=function(){if(this.i=O0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function O0(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Og(t.i)}var DF=class{stringify(t){return k.JSON.stringify(t,void 0)}parse(t){return k.JSON.parse(t,void 0)}};function TF(){this.g=new DF}function CF(t,e,n){let r=n||"";try{C0(t,function(i,s){let o=i;Uo(i)&&(o=Bg(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function bF(t,e){let n=new ll;if(k.Image){let r=new Image;r.onload=zu(Ju,n,r,"TestLoadImage: loaded",!0,e),r.onerror=zu(Ju,n,r,"TestLoadImage: error",!1,e),r.onabort=zu(Ju,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=zu(Ju,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ju(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Go(t){this.l=t.ec||null,this.j=t.ob||!1}Ve(Go,Gg);Go.prototype.g=function(){return new ml(this.l,this.j)};Go.prototype.i=function(t){return function(){return t}}({});function ml(t,e){Fe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Qg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ve(ml,Fe);var Qg=0;w=ml.prototype;w.open=function(t,e){if(this.readyState!=Qg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Lo(this)};w.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||k).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};w.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zo(this)),this.readyState=Qg};w.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Lo(this)),this.g&&(this.readyState=3,Lo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof k.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;k0(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function k0(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}w.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zo(this):Lo(this),this.readyState==3&&k0(this)}};w.Za=function(t){this.g&&(this.response=this.responseText=t,zo(this))};w.Ya=function(t){this.g&&(this.response=t,zo(this))};w.ka=function(){this.g&&zo(this)};function zo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Lo(t)}w.setRequestHeader=function(t,e){this.v.append(t,e)};w.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};w.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Lo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var SF=k.JSON.parse;function ve(t){Fe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=F0,this.L=this.M=!1}Ve(ve,Fe);var F0="",AF=/^https?$/i,RF=["POST","PUT"];w=ve.prototype;w.Oa=function(t){this.M=t};w.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():bg.g(),this.C=this.u?qD(this.u):qD(bg),this.g.onreadystatechange=Qe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){WD(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=k.FormData&&t instanceof k.FormData,!(0<=ZD(RF,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{U0(this),0<this.B&&((this.L=MF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qe(this.ua,this)):this.A=qg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){WD(this,s)}};function MF(t){return ns&&typeof t.timeout=="number"&&t.ontimeout!==void 0}w.ua=function(){typeof Pg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qe(this,"timeout"),this.abort(8))};function WD(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,V0(t),yl(t)}function V0(t){t.F||(t.F=!0,qe(t,"complete"),qe(t,"error"))}w.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,qe(this,"complete"),qe(this,"abort"),yl(this))};w.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yl(this,!0)),ve.$.N.call(this)};w.La=function(){this.s||(this.G||this.v||this.l?L0(this):this.kb())};w.kb=function(){L0(this)};function L0(t){if(t.h&&typeof Pg<"u"&&(!t.C[1]||un(t)!=4||t.da()!=2)){if(t.v&&un(t)==4)qg(t.La,0,t);else if(qe(t,"readystatechange"),un(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(b0)[1]||null;!i&&k.self&&k.self.location&&(i=k.self.location.protocol.slice(0,-1)),r=!AF.test(i?i.toLowerCase():"")}n=r}if(n)qe(t,"complete"),qe(t,"success");else{t.m=6;try{var s=2<un(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",V0(t)}}finally{yl(t)}}}}function yl(t,e){if(t.g){U0(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||qe(t,"ready");try{n.onreadystatechange=r}catch{}}}function U0(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(k.clearTimeout(t.A),t.A=null)}w.isActive=function(){return!!this.g};function un(t){return t.g?t.g.readyState:0}w.da=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}};w.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};w.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),SF(e)}};function KD(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case F0:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function NF(t){let e={};t=(t.g&&2<=un(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(No(t[r]))continue;var n=rF(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}X1(e,function(r){return r.join(", ")})}w.Ia=function(){return this.m};w.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function j0(t){let e="";return Fg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Yg(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=j0(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):pe(t,e,n))}function bo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function B0(t){this.Ga=0,this.j=[],this.l=new ll,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bo("baseRetryDelayMs",5e3,t),this.hb=bo("retryDelaySeedMs",1e4,t),this.eb=bo("forwardChannelMaxRetries",2,t),this.xa=bo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new M0(t&&t.concurrentRequestLimit),this.Ja=new TF,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}w=B0.prototype;w.ra=8;w.H=1;function Jg(t){if($0(t),t.H==3){var e=t.W++,n=Vn(t.I);if(pe(n,"SID",t.K),pe(n,"RID",e),pe(n,"TYPE","terminate"),Wo(t,n),e=new Ho(t,t.l,e),e.L=2,e.A=gl(Vn(n)),n=!1,k.navigator&&k.navigator.sendBeacon)try{n=k.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&k.Image&&(new Image().src=e.A,n=!0),n||(e.g=Y0(e.l,null),e.g.ha(e.A)),e.G=Date.now(),qo(e)}K0(t)}function vl(t){t.g&&(Xg(t),t.g.cancel(),t.g=null)}function $0(t){vl(t),t.u&&(k.clearTimeout(t.u),t.u=null),tl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&k.clearTimeout(t.m),t.m=null)}function _l(t){if(!N0(t.i)&&!t.m){t.m=!0;var e=t.Na;Po||l0(),Oo||(Po(),Oo=!0),$g.add(e,t),t.C=0}}function xF(t,e){return x0(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Bo(Qe(t.Na,t,e),W0(t,t.C)),t.C++,!0)}w.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Ho(this,this.l,t),s=this.s;if(this.U&&(s?(s=n0(s),r0(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=H0(this,i,e),n=Vn(this.I),pe(n,"RID",t),pe(n,"CVER",22),this.F&&pe(n,"X-HTTP-Session-Id",this.F),Wo(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(j0(s)))+"&"+e:this.o&&Yg(n,this.o,s)),Kg(this.i,i),this.bb&&pe(n,"TYPE","init"),this.P?(pe(n,"$req",e),pe(n,"SID","null"),i.aa=!0,Ag(i,n,null)):Ag(i,n,e),this.H=2}}else this.H==3&&(t?QD(this,t):this.j.length==0||N0(this.i)||QD(this))};function QD(t,e){var n;e?n=e.m:n=t.W++;let r=Vn(t.I);pe(r,"SID",t.K),pe(r,"RID",n),pe(r,"AID",t.V),Wo(t,r),t.o&&t.s&&Yg(r,t.o,t.s),n=new Ho(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=H0(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Kg(t.i,n),Ag(n,r,e)}function Wo(t,e){t.na&&Fg(t.na,function(n,r){pe(e,r,n)}),t.h&&C0({},function(n,r){pe(e,r,n)})}function H0(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Qe(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{CF(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function q0(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Po||l0(),Oo||(Po(),Oo=!0),$g.add(e,t),t.A=0}}function Zg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Bo(Qe(t.Ma,t),W0(t,t.A)),t.A++,!0)}w.Ma=function(){if(this.u=null,G0(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Bo(Qe(this.jb,this),t)}};w.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nt(10),vl(this),G0(this))};function Xg(t){t.B!=null&&(k.clearTimeout(t.B),t.B=null)}function G0(t){t.g=new Ho(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Vn(t.wa);pe(e,"RID","rpc"),pe(e,"SID",t.K),pe(e,"AID",t.V),pe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&pe(e,"TO",t.qa),pe(e,"TYPE","xmlhttp"),Wo(t,e),t.o&&t.s&&Yg(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=gl(Vn(e)),n.u=null,n.S=!0,w0(n,t)}w.ib=function(){this.v!=null&&(this.v=null,vl(this),Zg(this),nt(19))};function tl(t){t.v!=null&&(k.clearTimeout(t.v),t.v=null)}function z0(t,e){var n=null;if(t.g==e){tl(t),Xg(t),t.g=null;var r=2}else if(Mg(t.i,e))n=e.F,P0(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=dl(),qe(r,new m0(r,n)),_l(t)}else q0(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&xF(t,e)||r==2&&Zg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:zr(t,5);break;case 4:zr(t,10);break;case 3:zr(t,6);break;default:zr(t,2)}}}function W0(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function zr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Qe(t.pb,t);n||(n=new Wr("//www.google.com/images/cleardot.gif"),k.location&&k.location.protocol=="http"||Xu(n,"https"),gl(n)),bF(n.toString(),r)}else nt(2);t.H=0,t.h&&t.h.za(e),K0(t),$0(t)}w.pb=function(t){t?(this.l.info("Successfully pinged google.com"),nt(2)):(this.l.info("Failed to ping google.com"),nt(1))};function K0(t){if(t.H=0,t.ma=[],t.h){let e=O0(t.i);(e.length!=0||t.j.length!=0)&&(jD(t.ma,e),jD(t.ma,t.j),t.i.i.length=0,Og(t.j),t.j.length=0),t.h.ya()}}function Q0(t,e,n){var r=n instanceof Wr?Vn(n):new Wr(n);if(r.g!="")e&&(r.g=e+"."+r.g),el(r,r.m);else{var i=k.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Wr(null);r&&Xu(s,r),e&&(s.g=e),i&&el(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&pe(r,n,e),pe(r,"VER",t.ra),Wo(t,r),r}function Y0(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new ve(new Go({ob:n})):new ve(t.va),e.Oa(t.J),e}w.isActive=function(){return!!this.h&&this.h.isActive(this)};function J0(){}w=J0.prototype;w.Ba=function(){};w.Aa=function(){};w.za=function(){};w.ya=function(){};w.isActive=function(){return!0};w.Va=function(){};function nl(){if(ns&&!(10<=Number(Q1)))throw Error("Environmental error: no available transport.")}nl.prototype.g=function(t,e){return new pt(t,e)};function pt(t,e){Fe.call(this),this.g=new B0(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!No(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!No(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new is(this)}Ve(pt,Fe);pt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;nt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Q0(t,null,t.Y),_l(t)};pt.prototype.close=function(){Jg(this.g)};pt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Bg(t),t=n);e.j.push(new wF(e.fb++,t)),e.H==3&&_l(e)};pt.prototype.N=function(){this.g.h=null,delete this.j,Jg(this.g),delete this.g,pt.$.N.call(this)};function Z0(t){zg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ve(Z0,zg);function X0(){Wg.call(this),this.status=1}Ve(X0,Wg);function is(t){this.g=t}Ve(is,J0);is.prototype.Ba=function(){qe(this.g,"a")};is.prototype.Aa=function(t){qe(this.g,new Z0(t))};is.prototype.za=function(t){qe(this.g,new X0)};is.prototype.ya=function(){qe(this.g,"b")};function PF(){this.blockSize=-1}function jt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ve(jt,PF);jt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function mg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}jt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)mg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){mg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){mg(this,r),i=0;break}}this.h=i,this.i+=e};jt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function oe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var OF={};function em(t){return-128<=t&&128>t?z1(t,function(e){return new oe([e|0],0>e?-1:0)}):new oe([t|0],0>t?-1:0)}function ln(t){if(isNaN(t)||!isFinite(t))return ts;if(0>t)return He(ln(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ng;return new oe(e,0)}function eT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return He(eT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ln(Math.pow(e,8)),r=ts,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ln(Math.pow(e,s)),r=r.R(s).add(ln(o))):(r=r.R(n),r=r.add(ln(o)))}return r}var Ng=4294967296,ts=em(0),xg=em(1),YD=em(16777216);w=oe.prototype;w.ea=function(){if(At(this))return-He(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ng+r)*e,e*=Ng}return t};w.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Fn(this))return"0";if(At(this))return"-"+He(this).toString(t);for(var e=ln(Math.pow(t,6)),n=this,r="";;){var i=il(n,e).g;n=rl(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Fn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};w.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Fn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function At(t){return t.h==-1}w.X=function(t){return t=rl(this,t),At(t)?-1:Fn(t)?0:1};function He(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new oe(n,~t.h).add(xg)}w.abs=function(){return At(this)?He(this):this};w.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new oe(n,n[n.length-1]&-2147483648?-1:0)};function rl(t,e){return t.add(He(e))}w.R=function(t){if(Fn(this)||Fn(t))return ts;if(At(this))return At(t)?He(this).R(He(t)):He(He(this).R(t));if(At(t))return He(this.R(He(t)));if(0>this.X(YD)&&0>t.X(YD))return ln(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Zu(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Zu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Zu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Zu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new oe(n,0)};function Zu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function So(t,e){this.g=t,this.h=e}function il(t,e){if(Fn(e))throw Error("division by zero");if(Fn(t))return new So(ts,ts);if(At(t))return e=il(He(t),e),new So(He(e.g),He(e.h));if(At(e))return e=il(t,He(e)),new So(He(e.g),e.h);if(30<t.g.length){if(At(t)||At(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xg,r=e;0>=r.X(t);)n=JD(n),r=JD(r);var i=Xi(n,1),s=Xi(r,1);for(r=Xi(r,2),n=Xi(n,2);!Fn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Xi(r,1),n=Xi(n,1)}return e=rl(t,i.R(e)),new So(i,e)}for(i=ts;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ln(n),o=s.R(e);At(o)||0<o.X(t);)n-=r,s=ln(n),o=s.R(e);Fn(s)&&(s=xg),i=i.add(s),t=rl(t,o)}return new So(i,t)}w.gb=function(t){return il(this,t).h};w.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new oe(n,this.h&t.h)};w.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new oe(n,this.h|t.h)};w.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new oe(n,this.h^t.h)};function JD(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new oe(n,t.h)}function Xi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new oe(i,t.h)}nl.prototype.createWebChannel=nl.prototype.g;pt.prototype.send=pt.prototype.u;pt.prototype.open=pt.prototype.m;pt.prototype.close=pt.prototype.close;hl.NO_ERROR=0;hl.TIMEOUT=8;hl.HTTP_ERROR=6;y0.COMPLETE="complete";v0.EventType=$o;$o.OPEN="a";$o.CLOSE="b";$o.ERROR="c";$o.MESSAGE="d";Fe.prototype.listen=Fe.prototype.O;ve.prototype.listenOnce=ve.prototype.P;ve.prototype.getLastError=ve.prototype.Sa;ve.prototype.getLastErrorCode=ve.prototype.Ia;ve.prototype.getStatus=ve.prototype.da;ve.prototype.getResponseJson=ve.prototype.Wa;ve.prototype.getResponseText=ve.prototype.ja;ve.prototype.send=ve.prototype.ha;ve.prototype.setWithCredentials=ve.prototype.Oa;jt.prototype.digest=jt.prototype.l;jt.prototype.reset=jt.prototype.reset;jt.prototype.update=jt.prototype.j;oe.prototype.add=oe.prototype.add;oe.prototype.multiply=oe.prototype.R;oe.prototype.modulo=oe.prototype.gb;oe.prototype.compare=oe.prototype.X;oe.prototype.toNumber=oe.prototype.ea;oe.prototype.toString=oe.prototype.toString;oe.prototype.getBits=oe.prototype.D;oe.fromNumber=ln;oe.fromString=eT;var tT=Bt.createWebChannelTransport=function(){return new nl},nT=Bt.getStatEventTarget=function(){return dl()},Il=Bt.ErrorCode=hl,rT=Bt.EventType=y0,iT=Bt.Event=Kr,tm=Bt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},MW=Bt.FetchXmlHttpFactory=Go,Ko=Bt.WebChannel=v0,sT=Bt.XhrIo=ve,oT=Bt.Md5=jt,Qr=Bt.Integer=oe;var aT="@firebase/firestore";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var Ds="10.9.0";var ti=new ir("@firebase/firestore");function Qo(){return ti.logLevel}function E(t,...e){if(ti.logLevel<=Q.DEBUG){let n=e.map(By);ti.debug(`Firestore (${Ds}): ${t}`,...n)}}function yn(t,...e){if(ti.logLevel<=Q.ERROR){let n=e.map(By);ti.error(`Firestore (${Ds}): ${t}`,...n)}}function ds(t,...e){if(ti.logLevel<=Q.WARN){let n=e.map(By);ti.warn(`Firestore (${Ds}): ${t}`,...n)}}function By(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function N(t="Unexpected state"){let e=`FIRESTORE (${Ds}) INTERNAL ASSERTION FAILED: `+t;throw yn(e),new Error(e)}function he(t,e){t||N()}function V(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=class extends bt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ht=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},om=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Le.UNAUTHENTICATED))}shutdown(){}},am=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},cm=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Ht;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ht,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ht)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new Cl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new Le(e)}},um=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new um(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,E("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new dm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function kF(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var bl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=kF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ne(t,e){return t<e?-1:t>e?1:0}function hs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ge=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new D(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new D(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new D(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var L=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ge(0,0))}static max(){return new t(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&N(),r===void 0?r=e.length-n:r>e.length-n&&N(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},me=class t extends Sl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new D(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},FF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=class t extends Sl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return FF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new D(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new D(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new D(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new D(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var A=class t{constructor(e){this.path=e}static fromPath(e){return new t(me.fromString(e))}static fromName(e){return new t(me.fromString(e).popFirst(5))}static empty(){return new t(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new me(e.slice()))}};var fm=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};fm.UNKNOWN_ID=-1;function VF(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=L.fromTimestamp(r===1e9?new Ge(n+1,0):new Ge(n,r));return new ni(i,A.empty(),e)}function LF(t){return new ni(t.readTime,t.key,-1)}var ni=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(L.min(),A.empty(),-1)}static max(){return new t(L.max(),A.empty(),-1)}};function UF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=A.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}var jF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function pa(t){return p(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==jF)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var y=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var gm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ht,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ei(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=$y(r.target.error);this.V.reject(new ei(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new ei(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new ym(n)}},Al=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Ke())===12.2&&yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),Yr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Su())return!1;if(t.C())return!0;let e=Ke(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new ei(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new D(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new D(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ei(e,o))},i.onupgradeneeded=s=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=gm.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),y.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(E("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},mm=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Yr(this.k.delete())}},ei=class extends D{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ga(t){return t.name==="IndexedDbTransactionError"}var ym=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Yr(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),Yr(this.store.add(e))}get(e){return Yr(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),Yr(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),Yr(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new y((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new y((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new y((r,i)=>{n.onerror=s=>{let o=$y(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new y((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new mm(a),u=n(a.primaryKey,a.value,c);if(u instanceof y){let l=u.catch(d=>(c.done(),y.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>y.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Yr(t){return new y((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=$y(r.target.error);n(i)}})}var cT=!1;function $y(t){let e=Al.S(Ke());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new D("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return cT||(cT=!0,setTimeout(()=>{throw r},0)),r}}return t}var jT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function id(t){return t==null}function ta(t){return t===0&&1/t==-1/0}function BF(t){return typeof t=="number"&&Number.isInteger(t)&&!ta(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var $F=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jW=[...$F,"documentOverlays"],HF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qF=HF,BW=[...qF,"indexConfiguration","indexState","indexEntries"];function uT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ts(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ie=class t{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}},cs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw N();let e=this.left.check();if(e!==this.right.check())throw N();return e+(this.isRed()?0:1)}};fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw N()}get value(){throw N()}get color(){throw N()}get left(){throw N()}get right(){throw N()}copy(e,n,r,i,s){return this}insert(e,n,r){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class t{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Rl(this.data.getIterator())}getIteratorFrom(e){return new Rl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Rl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hn=class t{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ze(gt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ml=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var rt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ml("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};rt.EMPTY_BYTE_STRING=new rt("");var GF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if(he(!!t),typeof t=="string"){let e=0,n=GF.exec(t);if(he(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}function Hy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function qy(t){let e=t.mapValue.fields.__previous_value__;return Hy(e)?qy(e):e}function na(t){let e=dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}var vm=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Nl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hy(t)?4:$T(t)?9007199254740991:10:N()}function vn(t,e){if(t===e)return!0;let n=ri(t);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return na(t).isEqual(na(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=dr(i.timestampValue),a=dr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return hr(i.bytesValue).isEqual(hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return _e(i.geoPointValue.latitude)===_e(s.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _e(i.integerValue)===_e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=_e(i.doubleValue),a=_e(s.doubleValue);return o===a?ta(o)===ta(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return hs(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uT(o)!==uT(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!vn(o[c],a[c])))return!1;return!0}(t,e);default:return N()}}function ra(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function fs(t,e){if(t===e)return 0;let n=ri(t),r=ri(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=_e(s.integerValue||s.doubleValue),c=_e(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return lT(t.timestampValue,e.timestampValue);case 4:return lT(na(t),na(e));case 5:return ne(t.stringValue,e.stringValue);case 6:return function(s,o){let a=hr(s),c=hr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=ne(a[u],c[u]);if(l!==0)return l}return ne(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ne(_e(s.latitude),_e(o.latitude));return a!==0?a:ne(_e(s.longitude),_e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=fs(a[u],c[u]);if(l)return l}return ne(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===wl.mapValue&&o===wl.mapValue)return 0;if(s===wl.mapValue)return 1;if(o===wl.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=ne(c[d],l[d]);if(h!==0)return h;let f=fs(a[c[d]],u[l[d]]);if(f!==0)return f}return ne(c.length,l.length)}(t.mapValue,e.mapValue);default:throw N()}}function lT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);let n=dr(t),r=dr(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function ps(t){return _m(t)}function _m(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return A.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=_m(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${_m(n.fields[o])}`;return i+"}"}(t.mapValue):N()}function dT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Im(t){return!!t&&"integerValue"in t}function Gy(t){return!!t&&"arrayValue"in t}function hT(t){return!!t&&"nullValue"in t}function fT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dl(t){return!!t&&"mapValue"in t}function Jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $T(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $t=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jo(n)}setAll(e){let n=gt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Jo(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ts(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Jo(this.value))}};function HT(t){let e=[];return Ts(t.fields,(n,r)=>{let i=new gt([n]);if(Dl(r)){let s=HT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new hn(e)}var qt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,L.min(),L.min(),L.min(),$t.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,L.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,L.min(),L.min(),$t.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,L.min(),L.min(),$t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(L.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=L.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gs=class{constructor(e,n){this.position=e,this.inclusive=n}};function pT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=A.comparator(A.fromName(o.referenceValue),n.key):r=fs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function gT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}var ms=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function zF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var xl=class{},Se=class t extends xl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Em(e,n,r):n==="array-contains"?new Cm(e,r):n==="in"?new bm(e,r):n==="not-in"?new Sm(e,r):n==="array-contains-any"?new Am(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Dm(e,r):new Tm(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fs(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison(fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return N()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gt=class t extends xl{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return qT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function qT(t){return t.op==="and"}function GT(t){return WF(t)&&qT(t)}function WF(t){for(let e of t.filters)if(e instanceof Gt)return!1;return!0}function wm(t){if(t instanceof Se)return t.field.canonicalString()+t.op.toString()+ps(t.value);if(GT(t))return t.filters.map(e=>wm(e)).join(",");{let e=t.filters.map(n=>wm(n)).join(",");return`${t.op}(${e})`}}function zT(t,e){return t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)}(t,e):t instanceof Gt?function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&zT(o,i.filters[a]),!0):!1}(t,e):void N()}function WT(t){return t instanceof Se?function(n){return`${n.field.canonicalString()} ${n.op} ${ps(n.value)}`}(t):t instanceof Gt?function(n){return n.op.toString()+" {"+n.getFilters().map(WT).join(" ,")+"}"}(t):"Filter"}var Em=class extends Se{constructor(e,n,r){super(e,n,r),this.key=A.fromName(r.referenceValue)}matches(e){let n=A.comparator(e.key,this.key);return this.matchesComparison(n)}},Dm=class extends Se{constructor(e,n){super(e,"in",n),this.keys=KT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Tm=class extends Se{constructor(e,n){super(e,"not-in",n),this.keys=KT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function KT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>A.fromName(r.referenceValue))}var Cm=class extends Se{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Gy(n)&&ra(n.arrayValue,this.value)}},bm=class extends Se{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ra(this.value.arrayValue,n)}},Sm=class extends Se{constructor(e,n){super(e,"not-in",n)}matches(e){if(ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ra(this.value.arrayValue,n)}},Am=class extends Se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Gy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ra(this.value.arrayValue,r))}};var Rm=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function mT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Rm(t,e,n,r,i,s,o)}function zy(t){let e=V(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ps(r)).join(",")),e.ce=n}return e.ce}function Wy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gT(t.startAt,e.startAt)&&gT(t.endAt,e.endAt)}function Mm(t){return A.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ii=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function KF(t,e,n,r,i,s,o,a){return new ii(t,e,n,r,i,s,o,a)}function Ky(t){return new ii(t)}function yT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QT(t){return t.collectionGroup!==null}function Zo(t){let e=V(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(gt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new ms(s,r))}),n.has(gt.keyField().canonicalString())||e.le.push(new ms(gt.keyField(),r))}return e.le}function pn(t){let e=V(t);return e.he||(e.he=QF(e,Zo(t))),e.he}function QF(t,e){if(t.limitType==="F")return mT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ms(i.field,s)});let n=t.endAt?new gs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gs(t.startAt.position,t.startAt.inclusive):null;return mT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nm(t,e){let n=t.filters.concat([e]);return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xm(t,e,n){return new ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sd(t,e){return Wy(pn(t),pn(e))&&t.limitType===e.limitType}function YT(t){return`${zy(pn(t))}|lt:${t.limitType}`}function ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>WT(i)).join(", ")}]`),id(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ps(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`}(pn(t))}; limitType=${t.limitType})`}function od(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):A.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Zo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=pT(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Zo(r),i)||r.endAt&&!function(o,a,c){let u=pT(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Zo(r),i))}(t,e)}function YF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JT(t){return(e,n)=>{let r=!1;for(let i of Zo(t)){let s=JF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function JF(t,e,n){let r=t.field.isKeyField()?A.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?fs(c,u):N()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return N()}}var fr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return BT(this.inner)}size(){return this.innerSize}};var ZF=new Ie(A.comparator);function Un(){return ZF}var ZT=new Ie(A.comparator);function Yo(...t){let e=ZT;for(let n of t)e=e.insert(n.key,n);return e}function XT(t){let e=ZT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return Xo()}function eC(){return Xo()}function Xo(){return new fr(t=>t.toString(),(t,e)=>t.isEqual(e))}var XF=new Ie(A.comparator),eV=new Ze(A.comparator);function Y(...t){let e=eV;for(let n of t)e=e.add(n);return e}var tV=new Ze(ne);function nV(){return tV}function tC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ta(e)?"-0":e}}function nC(t){return{integerValue:""+t}}function rV(t,e){return BF(e)?nC(e):tC(t,e)}var ys=class{constructor(){this._=void 0}};function iV(t,e,n){return t instanceof vs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hy(s)&&(s=qy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof si?iC(t,e):t instanceof oi?sC(t,e):function(i,s){let o=rC(i,s),a=vT(o)+vT(i.Ie);return Im(o)&&Im(i.Ie)?nC(a):tC(i.serializer,a)}(t,e)}function sV(t,e,n){return t instanceof si?iC(t,e):t instanceof oi?sC(t,e):n}function rC(t,e){return t instanceof _s?function(r){return Im(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var vs=class extends ys{},si=class extends ys{constructor(e){super(),this.elements=e}};function iC(t,e){let n=oC(e);for(let r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}var oi=class extends ys{constructor(e){super(),this.elements=e}};function sC(t,e){let n=oC(e);for(let r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}var _s=class extends ys{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function vT(t){return _e(t.integerValue||t.doubleValue)}function oC(t){return Gy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof si&&i instanceof si||r instanceof oi&&i instanceof oi?hs(r.elements,i.elements,vn):r instanceof _s&&i instanceof _s?vn(r.Ie,i.Ie):r instanceof vs&&i instanceof vs}(t.transform,e.transform)}var Pm=class{constructor(e,n){this.version=e,this.transformResults=n}},Ln=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Is=class{};function aC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ia(t.key,Ln.none()):new ai(t.key,t.data,Ln.none());{let n=t.data,r=$t.empty(),i=new Ze(gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new jn(t.key,r,new hn(i.toArray()),Ln.none())}}function aV(t,e,n){t instanceof ai?function(i,s,o){let a=i.value.clone(),c=IT(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof jn?function(i,s,o){if(!Tl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=IT(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(cC(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ea(t,e,n,r){return t instanceof ai?function(s,o,a,c){if(!Tl(s.precondition,o))return a;let u=s.value.clone(),l=wT(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof jn?function(s,o,a,c){if(!Tl(s.precondition,o))return a;let u=wT(s.fieldTransforms,c,o),l=o.data;return l.setAll(cC(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return Tl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function cV(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=rC(r.transform,i||null);s!=null&&(n===null&&(n=$t.empty()),n.set(r.field,s))}return n||null}function _T(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hs(r,i,(s,o)=>oV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ai=class extends Is{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},jn=class extends Is{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function cC(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function IT(t,e,n){let r=new Map;he(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,sV(o,a,n[i]))}return r}function wT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,iV(s,o,e))}return r}var ia=class extends Is{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Om=class extends Is{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var km=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&aV(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ea(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=eC();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=aC(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(L.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Y())}isEqual(e){return this.batchId===e.batchId&&hs(this.mutations,e.mutations,(n,r)=>_T(n,r))&&hs(this.baseMutations,e.baseMutations,(n,r)=>_T(n,r))}},Fm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){he(e.mutations.length===r.length);let i=function(){return XF}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Vm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Lm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ce,X;function uV(t){switch(t){default:return N();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function uC(t){if(t===void 0)return yn("GRPC error has no .code"),g.UNKNOWN;switch(t){case Ce.OK:return g.OK;case Ce.CANCELLED:return g.CANCELLED;case Ce.UNKNOWN:return g.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return g.INTERNAL;case Ce.UNAVAILABLE:return g.UNAVAILABLE;case Ce.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Ce.NOT_FOUND:return g.NOT_FOUND;case Ce.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Ce.ABORTED:return g.ABORTED;case Ce.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Ce.DATA_LOSS:return g.DATA_LOSS;default:return N()}}(X=Ce||(Ce={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var ET=null;function lV(){return new TextEncoder}var dV=new Qr([4294967295,4294967295],0);function DT(t){let e=lV().encode(t),n=new oT;return n.update(e),new Uint8Array(n.digest())}function TT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Qr([n,r],0),new Qr([i,s],0)]}var Um=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zr(`Invalid padding: ${n}`);if(r<0)throw new Zr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zr(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Qr.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Qr.fromNumber(r)));return i.compare(dV)===1&&(i=new Qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=DT(e),[r,i]=TT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=DT(e),[r,i]=TT(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pl=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(L.min(),i,new Ie(ne),Un(),Y())}},sa=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Y(),Y(),Y())}};var us=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Ol=class{constructor(e,n){this.targetId=e,this.fe=n}},kl=class{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Fl=class{constructor(){this.ge=0,this.pe=bT(),this.ye=rt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Y(),n=Y(),r=Y();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:N()}}),new sa(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=bT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,he(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},jm=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=Un(),this.Qe=CT(),this.Ke=new Ie(ne)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:N()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Mm(s))if(r===0){let o=new A(s.path);this.We(n,o,qt.newNoDocument(o,L.min()))}else he(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}ET?.tt(function(l,d,h,f,m){var v,_,C,Z,G,de;let Ne={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},ee=d.unchangedNames;return ee&&(Ne.bloomFilter={applied:m===0,hashCount:(v=ee?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(Z=(C=(_=ee?.bits)===null||_===void 0?void 0:_.bitmap)===null||C===void 0?void 0:C.length)!==null&&Z!==void 0?Z:0,padding:(de=(G=ee?.bits)===null||G===void 0?void 0:G.padding)!==null&&de!==void 0?de:0,mightContain:xe=>{var Kt;return(Kt=f?.mightContain(xe))!==null&&Kt!==void 0&&Kt}}),Ne}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=hr(r).toUint8Array()}catch(c){if(c instanceof Ml)return ds("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Um(o,i,s)}catch(c){return ds(c instanceof Zr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Mm(a.target)){let c=new A(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,qt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=Y();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Pl(e,n,this.Ke,this.qe,r);return this.qe=Un(),this.Qe=CT(),this.Ke=new Ie(ne),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Fl,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ze(ne),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Fl),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function CT(){return new Ie(A.comparator)}function bT(){return new Ie(A.comparator)}var hV={asc:"ASCENDING",desc:"DESCENDING"},fV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pV={and:"AND",or:"OR"},Bm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function $m(t,e){return t.useProto3Json||id(e)?e:{value:e}}function Vl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gV(t,e){return Vl(t,e.toTimestamp())}function gn(t){return he(!!t),L.fromTimestamp(function(n){let r=dr(n);return new Ge(r.seconds,r.nanos)}(t))}function Qy(t,e){return Hm(t,e).canonicalString()}function Hm(t,e){let n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dC(t){let e=me.fromString(t);return he(mC(e)),e}function qm(t,e){return Qy(t.databaseId,e.path)}function nm(t,e){let n=dC(e);if(n.get(1)!==t.databaseId.projectId)throw new D(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new D(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new A(fC(n))}function hC(t,e){return Qy(t.databaseId,e)}function mV(t){let e=dC(t);return e.length===4?me.emptyPath():fC(e)}function Gm(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fC(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ST(t,e,n){return{name:qm(t,e),fields:n.value.mapValue.fields}}function yV(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:N()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(he(l===void 0||typeof l=="string"),rt.fromBase64String(l||"")):(he(l===void 0||l instanceof Uint8Array),rt.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?g.UNKNOWN:uC(u.code);return new D(l,u.message||"")}(o);n=new kl(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nm(t,r.document.name),s=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):L.min(),a=new $t({mapValue:{fields:r.document.fields}}),c=qt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new us(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nm(t,r.document),s=r.readTime?gn(r.readTime):L.min(),o=qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new us([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nm(t,r.document),s=r.removedTargetIds||[];n=new us([],s,i,null)}else{if(!("filter"in e))return N();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Lm(i,s),a=r.targetId;n=new Ol(a,o)}}return n}function vV(t,e){let n;if(e instanceof ai)n={update:ST(t,e.key,e.value)};else if(e instanceof ia)n={delete:qm(t,e.key)};else if(e instanceof jn)n={update:ST(t,e.key,e.data),updateMask:SV(e.fieldMask)};else{if(!(e instanceof Om))return N();n={verify:qm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof vs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof si)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof _s)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw N()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:gV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:N()}(t,e.precondition)),n}function _V(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gn(i.updateTime):gn(s);return o.isEqual(L.min())&&(o=gn(s)),new Pm(o,i.transformResults||[])}(n,e))):[]}function IV(t,e){return{documents:[hC(t,e.path)]}}function wV(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hC(t,i);let s=function(u){if(u.length!==0)return gC(Gt.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:os(h.field),direction:TV(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=$m(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function EV(t){let e=mV(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){he(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=pC(d);return h instanceof Gt&&GT(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(m){return new ms(as(m.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,id(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new gs(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new gs(f,h)}(n.endAt)),KF(e,i,o,s,a,"F",c,u)}function DV(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return N()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=as(n.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=as(n.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=as(n.unaryFilter.field);return Se.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=as(n.unaryFilter.field);return Se.create(o,"!=",{nullValue:"NULL_VALUE"});default:return N()}}(t):t.fieldFilter!==void 0?function(n){return Se.create(as(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gt.create(n.compositeFilter.filters.map(r=>pC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return N()}}(n.compositeFilter.op))}(t):N()}function TV(t){return hV[t]}function CV(t){return fV[t]}function bV(t){return pV[t]}function os(t){return{fieldPath:t.canonicalString()}}function as(t){return gt.fromServerFormat(t.fieldPath)}function gC(t){return t instanceof Se?function(n){if(n.op==="=="){if(fT(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NAN"}};if(hT(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fT(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NAN"}};if(hT(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(n.field),op:CV(n.op),value:n.value}}}(t):t instanceof Gt?function(n){let r=n.getFilters().map(i=>gC(i));return r.length===1?r[0]:{compositeFilter:{op:bV(n.op),filters:r}}}(t):N()}function SV(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var oa=class t{constructor(e,n,r,i,s=L.min(),o=L.min(),a=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var zm=class{constructor(e){this.ct=e}};function AV(t){let e=EV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xm(e,e.limit,"L"):e}var Ll=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ta(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(hr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?$T(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):N()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),A.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ll.bt=new Ll;var Wm=class{constructor(){this._n=new Km}addToCollectionParentIndex(e,n){return this._n.add(n),y.resolve()}getCollectionParents(e,n){return y.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return y.resolve()}deleteFieldIndex(e,n){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,n){return y.resolve()}getDocumentsMatchingTarget(e,n){return y.resolve(null)}getIndexType(e,n){return y.resolve(0)}getFieldIndexes(e,n){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,n){return y.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return y.resolve(ni.min())}updateCollectionGroup(e,n,r){return y.resolve()}updateIndexEntries(e,n){return y.resolve()}},Km=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(me.comparator)).toArray()}};var HW=new Uint8Array(0);var dn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(41943040,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);var aa=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Qm=class{constructor(){this.changes=new fr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ym=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Jm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ea(r.mutation,i,hn.empty(),Ge.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Y()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Y()){let i=Jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yo();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Y()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Un(),o=Xo(),a=function(){return Xo()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof jn)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),ea(l.mutation,u,l.mutation.getFieldMask(),Ge.now())):o.set(u.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Ym(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Xo(),i=new Ie((o,a)=>o-a),s=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||hn.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||Y()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=eC();l.forEach(h=>{if(!s.has(h)){let f=aC(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return A.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):y.resolve(Jr()),a=-1,c=s;return o.next(u=>y.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?y.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Y())).next(l=>({batchId:a,changes:XT(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new A(n)).next(r=>{let i=Yo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Yo();return this.indexManager.getCollectionParents(e,s).next(a=>y.forEach(a,c=>{let u=function(d,h){return new ii(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,qt.newInvalidDocument(l)))});let a=Yo();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&ea(l.mutation,u,hn.empty(),Ge.now()),od(n,u)&&(a=a.insert(c,u))}),a})}};var Zm=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return y.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gn(i.createTime)}}(n)),y.resolve()}getNamedQuery(e,n){return y.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:AV(i.bundledQuery),readTime:gn(i.readTime)}}(n)),y.resolve()}};var Xm=class{constructor(){this.overlays=new Ie(A.comparator),this.hr=new Map}getOverlay(e,n){return y.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Jr();return y.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),y.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),y.resolve()}getOverlaysForCollection(e,n,r){let i=Jr(),s=n.length+1,o=new A(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ie((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Jr(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Jr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return y.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vm(n,r));let s=this.hr.get(n);s===void 0&&(s=Y(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var ca=class{constructor(){this.Pr=new Ze(be.Ir),this.Tr=new Ze(be.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new be(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new be(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new A(new me([])),r=new be(n,e),i=new be(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new A(new me([])),r=new be(n,e),i=new be(n,e+1),s=Y();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new be(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},be=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return A.comparator(e.key,n.key)||ne(e.pr,n.pr)}static Er(e,n){return ne(e.pr,n.pr)||A.comparator(e.key,n.key)}};var ey=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ze(be.Ir)}checkEmpty(e){return y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new km(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new be(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(o)}lookupMutationBatch(e,n){return y.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new be(n,0),i=new be(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(ne);return n.forEach(i=>{let s=new be(i,0),o=new be(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),y.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;A.isDocumentKey(s)||(s=s.child(""));let o=new be(new A(s),0),a=new Ze(ne);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),y.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){he(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return y.forEach(n.mutations,i=>{let s=new be(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new be(n,0),i=this.wr.firstAfterOrEqual(r);return y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,y.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ty=class{constructor(e){this.vr=e,this.docs=function(){return new Ie(A.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return y.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qt.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Un(),o=n.path,a=new A(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||UF(LF(l),r)<=0||(i.has(l.key)||od(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return y.resolve(s)}getAllFromCollectionGroup(e,n,r,i){N()}Fr(e,n){return y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ny(this)}getSize(e){return y.resolve(this.size)}},ny=class extends Qm{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),y.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var ry=class{constructor(e){this.persistence=e,this.Mr=new fr(n=>zy(n),Wy),this.lastRemoteSnapshotVersion=L.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ca,this.targetCount=0,this.Lr=aa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),y.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new aa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,y.resolve()}updateTargetData(e,n){return this.qn(n),y.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(s).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return y.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),y.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),y.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),y.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return y.resolve(r)}containsKey(e,n){return y.resolve(this.Nr.containsKey(n))}};var iy=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new jT(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ry(this),this.indexManager=new Wm,this.remoteDocumentCache=function(i){return new ty(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new zm(n),this.$r=new Zm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new ey(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new sy(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return y.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},sy=class extends pm{constructor(e){super(),this.currentSequenceNumber=e}},oy=class t{constructor(e){this.persistence=e,this.zr=new ca,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw N()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),y.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),y.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Jr,r=>{let i=A.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,L.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return y.or([()=>y.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var ay=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Y(),i=Y();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var cy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var uy=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return cD()?8:Al.v(Ke())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new cy;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Qo()<=Q.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),y.resolve()):(Qo()<=Q.DEBUG&&E("QueryEngine","Query:",ss(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Qo()<=Q.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):y.resolve())}ji(e,n){if(yT(n))return y.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xm(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Y(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,xm(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return yT(n)||i.isEqual(L.min())?y.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?y.resolve(null):(Qo()<=Q.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ss(n)),this.es(e,o,n,VF(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ze(JT(e));return n.forEach((i,s)=>{od(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return Qo()<=Q.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",ss(n)),this.zi.getDocumentsMatchingQuery(e,n,ni.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ly=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ie(ne),this.rs=new fr(s=>zy(s),Wy),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function RV(t,e,n,r){return new ly(t,e,n,r)}function yC(t,e){return p(this,null,function*(){let n=V(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Y();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function MV(t,e){let n=V(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=y.resolve();return h.forEach(m=>{f=f.next(()=>l.getEntry(c,m)).next(v=>{let _=u.docVersions.get(m);he(_!==null),v.version.compareTo(_)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Y();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function vC(t){let e=V(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function NV(t,e){let n=V(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(rt.EMPTY_BYTE_STRING,L.min()).withLastLimboFreeSnapshotVersion(L.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,_,C){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(s,f))});let c=Un(),u=Y();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(xV(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(L.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return y.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function xV(t,e,n){let r=Y(),i=Y();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Un();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(L.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function PV(t,e){let n=V(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OV(t,e){let n=V(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,y.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new oa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function dy(t,e,n){return p(this,null,function*(){let r=V(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ga(o))throw o;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function AT(t,e,n){let r=V(t),i=L.min(),s=Y();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=V(c),h=d.rs.get(l);return h!==void 0?y.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,o,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:L.min(),n?s:Y())).next(a=>(kV(r,YF(e),a),{documents:a,hs:s})))}function kV(t,e,n){let r=t.ss.get(e)||L.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Ul=class{constructor(){this.activeTargetIds=nV()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var hy=class{constructor(){this.no=new Ul,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Ul,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var fy=class{io(e){}shutdown(){}};var jl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var El=null;function rm(){return El===null?El=function(){return 268435456+Math.round(2147483648*Math.random())}():El++,"0x"+El.toString(16)}var FV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var py=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Je="WebChannelConnection",gy=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=rm(),c=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw ds("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ds}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=FV[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=rm();return new Promise((o,a)=>{let c=new sT;c.setWithCredentials(!0),c.listenOnce(rT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Il.NO_ERROR:let l=c.getResponseJson();E(Je,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Il.TIMEOUT:E(Je,`RPC '${e}' ${s} timed out`),a(new D(g.DEADLINE_EXCEEDED,"Request time out"));break;case Il.HTTP_ERROR:let d=c.getStatus();if(E(Je,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(_){let C=_.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(C)>=0?C:g.UNKNOWN}(f.status);a(new D(m,f.message))}else a(new D(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new D(g.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{E(Je,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);E(Je,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=rm(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tT(),a=nT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");E(Je,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,m=new py({lo:_=>{f?E(Je,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(E(Je,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(Je,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},ho:()=>d.close()}),v=(_,C,Z)=>{_.listen(C,G=>{try{Z(G)}catch(de){setTimeout(()=>{throw de},0)}})};return v(d,Ko.EventType.OPEN,()=>{f||E(Je,`RPC '${e}' stream ${i} transport opened.`)}),v(d,Ko.EventType.CLOSE,()=>{f||(f=!0,E(Je,`RPC '${e}' stream ${i} transport closed`),m.Vo())}),v(d,Ko.EventType.ERROR,_=>{f||(f=!0,ds(Je,`RPC '${e}' stream ${i} transport errored:`,_),m.Vo(new D(g.UNAVAILABLE,"The operation could not be completed")))}),v(d,Ko.EventType.MESSAGE,_=>{var C;if(!f){let Z=_.data[0];he(!!Z);let G=Z,de=G.error||((C=G[0])===null||C===void 0?void 0:C.error);if(de){E(Je,`RPC '${e}' stream ${i} received error:`,de);let Ne=de.status,ee=function(_r){let pi=Ce[_r];if(pi!==void 0)return uC(pi)}(Ne),xe=de.message;ee===void 0&&(ee=g.INTERNAL,xe="Unknown error status: "+Ne+" with message "+de.message),f=!0,m.Vo(new D(ee,xe)),d.close()}else E(Je,`RPC '${e}' stream ${i} received:`,Z),m.mo(Z)}}),v(a,iT.STAT_EVENT,_=>{_.stat===tm.PROXY?E(Je,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===tm.NOPROXY&&E(Je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}};function im(){return typeof document<"u"?document:null}function ad(t){return new Bm(t,!0)}var Bl=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var $l=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Bl(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(yn(n.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new D(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},my=class extends $l{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=yV(this.serializer,e),r=function(s){if(!("targetChange"in s))return L.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?L.min():o.readTime?gn(o.readTime):L.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=Gm(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Mm(c)?{documents:IV(s,c)}:{query:wV(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lC(s,o.resumeToken);let u=$m(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(L.min())>0){a.readTime=Vl(s,o.snapshotVersion.toTimestamp());let u=$m(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=DV(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=Gm(this.serializer),n.removeTarget=e,this.t_(n)}},yy=class extends $l{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=_V(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.T_(r,n)}return he(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=Gm(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>vV(this.serializer,r))};this.t_(n)}};var vy=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new D(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,Hm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new D(g.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,Hm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new D(g.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var _y=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(yn(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Iy=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){ui(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=V(c);u.v_.add(4),yield ma(u),u.x_.set("Unknown"),u.v_.delete(4),yield cd(u)})}(this))}))}),this.x_=new _y(r,i)}};function cd(t){return p(this,null,function*(){if(ui(t))for(let e of t.F_)yield e(!0)})}function ma(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function _C(t,e){let n=V(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Xy(n)?Zy(n):Cs(n).Jo()&&Jy(n,e))}function Yy(t,e){let n=V(t),r=Cs(n);n.C_.delete(e),r.Jo()&&IC(n,e),n.C_.size===0&&(r.Jo()?r.Xo():ui(n)&&n.x_.set("Unknown"))}function Jy(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(L.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cs(t).c_(e)}function IC(t,e){t.O_.Oe(e),Cs(t).l_(e)}function Zy(t){t.O_=new jm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Cs(t).start(),t.x_.p_()}function Xy(t){return ui(t)&&!Cs(t).Ho()&&t.C_.size>0}function ui(t){return V(t).v_.size===0}function wC(t){t.O_=void 0}function VV(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{Jy(t,e)})})}function LV(t,e){return p(this,null,function*(){wC(t),Xy(t)?(t.x_.S_(e),Zy(t)):t.x_.set("Unknown")})}function UV(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof kl&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hl(t,r)}else if(e instanceof us?t.O_.$e(e):e instanceof Ol?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(L.min()))try{let r=yield vC(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(rt.EMPTY_BYTE_STRING,l.snapshotVersion)),IC(s,c);let d=new oa(l.target,c,u,l.sequenceNumber);Jy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield Hl(t,r)}})}function Hl(t,e,n){return p(this,null,function*(){if(!ga(e))throw e;t.v_.add(1),yield ma(t),t.x_.set("Offline"),n||(n=()=>vC(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield cd(t)}))})}function EC(t,e){return e().catch(n=>Hl(t,n,e))}function ud(t){return p(this,null,function*(){let e=V(t),n=pr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;jV(e);)try{let i=yield PV(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,BV(e,i)}catch(i){yield Hl(e,i)}DC(e)&&TC(e)})}function jV(t){return ui(t)&&t.D_.length<10}function BV(t,e){t.D_.push(e);let n=pr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function DC(t){return ui(t)&&!pr(t).Ho()&&t.D_.length>0}function TC(t){pr(t).start()}function $V(t){return p(this,null,function*(){pr(t).d_()})}function HV(t){return p(this,null,function*(){let e=pr(t);for(let n of t.D_)e.I_(n.mutations)})}function qV(t,e,n){return p(this,null,function*(){let r=t.D_.shift(),i=Fm.from(r,e,n);yield EC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ud(t)})}function GV(t,e){return p(this,null,function*(){e&&pr(t).P_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return uV(o)&&o!==g.ABORTED}(i.code)){let s=r.D_.shift();pr(r).Zo(),yield EC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ud(r)}})}(t,e)),DC(t)&&TC(t)})}function RT(t,e){return p(this,null,function*(){let n=V(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=ui(n);n.v_.add(3),yield ma(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield cd(n)})}function zV(t,e){return p(this,null,function*(){let n=V(t);e?(n.v_.delete(2),yield cd(n)):e||(n.v_.add(2),yield ma(n),n.x_.set("Unknown"))})}function Cs(t){return t.N_||(t.N_=function(n,r,i){let s=V(n);return s.R_(),new my(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:VV.bind(null,t),To:LV.bind(null,t),u_:UV.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),Xy(t)?Zy(t):t.x_.set("Unknown")):(yield t.N_.stop(),wC(t))}))),t.N_}function pr(t){return t.L_||(t.L_=function(n,r,i){let s=V(n);return s.R_(),new yy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:$V.bind(null,t),To:GV.bind(null,t),E_:HV.bind(null,t),T_:qV.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.L_.Zo(),yield ud(t)):(yield t.L_.stop(),t.D_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var wy=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new D(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ev(t,e){if(yn("AsyncQueue",`${e}: ${t}`),ga(t))return new D(g.UNAVAILABLE,`${e}: ${t}`);throw t}var ql=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||A.comparator(n.key,r.key):(n,r)=>A.comparator(n.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Gl=class{constructor(){this.B_=new Ie(A.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):N():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},ws=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ql.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ey=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},Dy=class{constructor(){this.queries=new fr(e=>YT(e),sd),this.onlineState="Unknown",this.W_=new Set}};function CC(t,e){return p(this,null,function*(){let n=V(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new Ey,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=ev(o,`Initialization of query '${ss(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&tv(n)})}function bC(t,e){return p(this,null,function*(){let n=V(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function WV(t,e){let n=V(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&tv(n)}function KV(t,e,n){let r=V(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function tv(t){t.W_.forEach(e=>{e.next()})}var Ty,MT;(MT=Ty||(Ty={})).j_="default",MT.Cache="cache";var zl=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ws(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Ty.Cache}};var Wl=class{constructor(e){this.key=e}},Kl=class{constructor(e){this.key=e}},Cy=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Y(),this.mutatedKeys=Y(),this.ha=JT(e),this.Pa=new ql(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new Gl,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=od(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),_=!0):this.da(h,f)||(r.track({type:2,doc:f}),_=!0,(c&&this.ha(f,c)>0||u&&this.ha(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(c||u)&&(a=!0)),_&&(f?(o=o.add(f),s=v?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((l,d)=>function(f,m){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}};return v(f)-v(m)}(l.type,d.type)||this.ha(l.doc,d.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,u=c!==this.ca;return this.ca=c,o.length!==0||u?{snapshot:new ws(this.query,e.Pa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Gl,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=Y(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Kl(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Wl(r))}),n}fa(e){this.ua=e.hs,this.la=Y();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return ws.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},by=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Sy=class{constructor(e){this.key=e,this.pa=!1}},Ay=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new fr(a=>YT(a),sd),this.Sa=new Map,this.ba=new Set,this.Da=new Ie(A.comparator),this.Ca=new Map,this.va=new ca,this.Fa={},this.Ma=new Map,this.xa=aa.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function QV(t,e,n=!0){return p(this,null,function*(){let r=xC(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield SC(r,e,n,!0),i})}function YV(t,e){return p(this,null,function*(){let n=xC(t);yield SC(n,e,!0,!1)})}function SC(t,e,n,r){return p(this,null,function*(){let i=yield OV(t.localStore,pn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield JV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&_C(t.remoteStore,i),a})}function JV(t,e,n,r,i){return p(this,null,function*(){t.Na=(d,h,f)=>function(v,_,C,Z){return p(this,null,function*(){let G=_.view.Ta(C);G.Xi&&(G=yield AT(v.localStore,_.query,!1).then(({documents:xe})=>_.view.Ta(xe,G)));let de=Z&&Z.targetChanges.get(_.targetId),Ne=Z&&Z.targetMismatches.get(_.targetId)!=null,ee=_.view.applyChanges(G,v.isPrimaryClient,de,Ne);return xT(v,_.targetId,ee.Va),ee.snapshot})}(t,d,h,f);let s=yield AT(t.localStore,e,!0),o=new Cy(e,s.hs),a=o.Ta(s.documents),c=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);xT(t,n,u.Va);let l=new by(e,n,o);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot})}function ZV(t,e,n){return p(this,null,function*(){let r=V(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!sd(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Yy(r.remoteStore,i.targetId),Ry(r,i.targetId)}).catch(pa))):(Ry(r,i.targetId),yield dy(r.localStore,i.targetId,!0))})}function XV(t,e){return p(this,null,function*(){let n=V(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Yy(n.remoteStore,r.targetId))})}function eL(t,e,n){return p(this,null,function*(){let r=aL(t);try{let i=yield function(o,a){let c=V(o),u=Ge.now(),l=a.reduce((f,m)=>f.add(m.key),Y()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Un(),v=Y();return c.os.getEntries(f,l).next(_=>{m=_,m.forEach((C,Z)=>{Z.isValidDocument()||(v=v.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(_=>{d=_;let C=[];for(let Z of a){let G=cV(Z,d.get(Z.key).overlayedDocument);G!=null&&C.push(new jn(Z.key,G,HT(G.value.mapValue),Ln.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,C,a)}).next(_=>{h=_;let C=_.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(f,_.batchId,C)})}).then(()=>({batchId:h.batchId,changes:XT(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Fa[o.currentUser.toKey()];u||(u=new Ie(ne)),u=u.insert(a,c),o.Fa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield ya(r,i.changes),yield ud(r.remoteStore)}catch(i){let s=ev(i,"Failed to persist write");n.reject(s)}})}function AC(t,e){return p(this,null,function*(){let n=V(t);try{let r=yield NV(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(he(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?he(o.pa):i.removedDocuments.size>0&&(he(o.pa),o.pa=!1))}),yield ya(n,r,e)}catch(r){yield pa(r)}})}function NT(t,e,n){let r=V(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=V(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.G_(a)&&(u=!0)}),u&&tv(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function tL(t,e,n){return p(this,null,function*(){let r=V(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new Ie(A.comparator);o=o.insert(s,qt.newNoDocument(s,L.min()));let a=Y().add(s),c=new Pl(L.min(),new Map,new Ie(ne),o,a);yield AC(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),nv(r)}else yield dy(r.localStore,e,!1).then(()=>Ry(r,e,n)).catch(pa)})}function nL(t,e){return p(this,null,function*(){let n=V(t),r=e.batch.batchId;try{let i=yield MV(n.localStore,e);MC(n,r,null),RC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ya(n,i)}catch(i){yield pa(i)}})}function rL(t,e,n){return p(this,null,function*(){let r=V(t);try{let i=yield function(o,a){let c=V(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(he(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);MC(r,e,n),RC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ya(r,i)}catch(i){yield pa(i)}})}function RC(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function MC(t,e,n){let r=V(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Ry(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||NC(t,r)})}function NC(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(Yy(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),nv(t))}function xT(t,e,n){for(let r of n)r instanceof Wl?(t.va.addReference(r.key,e),iL(t,r)):r instanceof Kl?(E("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||NC(t,r.key)):N()}function iL(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ba.add(r),nv(t))}function nv(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new A(me.fromString(e)),r=t.xa.next();t.Ca.set(r,new Sy(n)),t.Da=t.Da.insert(n,r),_C(t.remoteStore,new oa(pn(Ky(n.path)),r,"TargetPurposeLimboResolution",jT._e))}}function ya(t,e,n){return p(this,null,function*(){let r=V(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=ay.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,u){return p(this,null,function*(){let l=V(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>y.forEach(u,h=>y.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>y.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ga(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),m=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(m);l.ns=l.ns.insert(h,v)}}})}(r.localStore,s))})}function sL(t,e){return p(this,null,function*(){let n=V(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield yC(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new D(g.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ya(n,r.us)}})}function oL(t,e){let n=V(t),r=n.Ca.get(e);if(r&&r.pa)return Y().add(r.key);{let i=Y(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function xC(t){let e=V(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tL.bind(null,e),e.ya.u_=WV.bind(null,e.eventManager),e.ya.La=KV.bind(null,e.eventManager),e}function aL(t){let e=V(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rL.bind(null,e),e}var Ql=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return RV(this.persistence,new uy,e.initialUser,this.serializer)}createPersistence(e){return new iy(oy.Hr,this.serializer)}createSharedClientState(e){return new hy}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var My=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>NT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sL.bind(null,this.syncEngine),yield zV(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Dy}()}createDatastore(e){let n=ad(e.databaseInfo.databaseId),r=function(s){return new gy(s)}(e.databaseInfo);return function(s,o,a,c){return new vy(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Iy(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>NT(this.syncEngine,n,0),function(){return jl.D()?new jl:new fy}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Ay(i,s,o,a,c,u);return l&&(d.Oa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=V(r);E("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield ma(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Yl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Ny=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=bl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){E("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(E("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new D(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ht;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ev(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function sm(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield yC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function PT(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield uL(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>RT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>RT(e.remoteStore,i)),t._onlineComponents=e})}function cL(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function uL(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!cL(n))throw n;ds("Error using user provided cache. Falling back to memory cache: "+n),yield sm(t,new Ql)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield sm(t,new Ql);return t._offlineComponents})}function PC(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield PT(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield PT(t,new My))),t._onlineComponents})}function lL(t){return PC(t).then(e=>e.syncEngine)}function xy(t){return p(this,null,function*(){let e=yield PC(t),n=e.eventManager;return n.onListen=QV.bind(null,e.syncEngine),n.onUnlisten=ZV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XV.bind(null,e.syncEngine),n})}function dL(t,e,n={}){let r=new Ht;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,u){let l=new Yl({next:h=>{o.enqueueAndForget(()=>bC(s,d)),h.fromCache&&c.source==="server"?u.reject(new D(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new zl(a,l,{includeMetadataChanges:!0,ta:!0});return CC(s,d)}(yield xy(t),t.asyncQueue,e,n,r)})),r.promise}function OC(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var OT=new Map;function kC(t,e,n){if(!n)throw new D(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hL(t,e,n,r){if(e===!0&&r===!0)throw new D(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kT(t){if(!A.isDocumentKey(t))throw new D(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FT(t){if(A.isDocumentKey(t))throw new D(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ld(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":N()}function mn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new D(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ld(t);throw new D(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Jl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new D(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new D(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new D(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new D(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new D(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Es=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new D(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new D(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new om;switch(r.type){case"firstParty":return new lm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new D(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=OT.get(n);r&&(E("ComponentProvider","Removing Datastore"),OT.delete(n),r.terminate())}(this),Promise.resolve()}};function FC(t,e,n,r={}){var i;let s=(t=mn(t,Es))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Le.MOCK_USER;else{a=iD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new D(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Le(u)}t._authCredentials=new am(new Cl(a,c))}}var ci=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},lt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},lr=class t extends ci{constructor(e,n,r){super(e,n,Ky(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new lt(this.firestore,null,new A(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function VC(t,e,...n){if(t=ft(t),kC("collection","path",e),t instanceof Es){let r=me.fromString(e,...n);return FT(r),new lr(t,null,r)}{if(!(t instanceof lt||t instanceof lr))throw new D(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return FT(r),new lr(t.firestore,null,r)}}function rv(t,e,...n){if(t=ft(t),arguments.length===1&&(e=bl.newId()),kC("doc","path",e),t instanceof Es){let r=me.fromString(e,...n);return kT(r),new lt(t,null,new A(r))}{if(!(t instanceof lt||t instanceof lr))throw new D(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return kT(r),new lt(t.firestore,t instanceof lr?t.converter:null,new A(r))}}var Py=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Bl(this,"async_queue_retry"),this.cu=()=>{let n=im();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=im();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new Ht;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!ga(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=wy.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&N()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function VT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Bn=class extends Es{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Py}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||UC(this),this._firestoreClient.terminate()}};function LC(t,e){let n=typeof t=="object"?t:_o(),r=typeof t=="string"?t:e||"(default)",i=Wp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=nD("firestore");s&&FC(i,...s)}return i}function iv(t){return t._firestoreClient||UC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function UC(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new vm(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,OC(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Ny(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var ua=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(rt.fromBase64String(e))}catch(n){throw new D(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var la=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new D(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zl=class{constructor(e){this._methodName=e}};var da=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new D(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new D(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}};var fL=/^__.*__$/,Oy=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jn(e,this.data,this.fieldMask,n,this.fieldTransforms):new ai(e,this.data,n,this.fieldTransforms)}};function jC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}var ky=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Xl(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(jC(this.Vu)&&fL.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},Fy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ad(e)}Cu(e,n,r,i=!1){return new ky({Vu:e,methodName:n,Du:r,path:gt.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function sv(t){let e=t._freezeSettings(),n=ad(t._databaseId);return new Fy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function BC(t,e,n,r,i,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);qC("Data must be an object, but it was:",o,r);let a=$C(r,o),c,u;if(s.merge)c=new hn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=gL(e,d,n);if(!o.contains(h))throw new D(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);yL(l,h)||l.push(h)}c=new hn(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new Oy(new $t(a),c,u)}function pL(t,e,n,r=!1){return ov(n,t.Cu(r?4:3,e))}function ov(t,e){if(HC(t=ft(t)))return qC("Unsupported field value:",e,t),$C(t,e);if(t instanceof Zl)return function(r,i){if(!jC(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=ov(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ge.fromDate(r);return{timestampValue:Vl(i.serializer,s)}}if(r instanceof Ge){let s=new Ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vl(i.serializer,s)}}if(r instanceof da)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ua)return{bytesValue:lC(i.serializer,r._byteString)};if(r instanceof lt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Qy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${ld(r)}`)}(t,e)}function $C(t,e){let n={};return BT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(t,(r,i)=>{let s=ov(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function HC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof da||t instanceof ua||t instanceof lt||t instanceof Zl)}function qC(t,e,n){if(!HC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=ld(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function gL(t,e,n){if((e=ft(e))instanceof la)return e._internalPath;if(typeof e=="string")return GC(t,e);throw Xl("Field path arguments must be of type string or ",t,!1,void 0,n)}var mL=new RegExp("[~\\*/\\[\\]]");function GC(t,e,n){if(e.search(mL)>=0)throw Xl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new la(...e.split("."))._internalPath}catch{throw Xl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xl(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new D(g.INVALID_ARGUMENT,a+t+c)}function yL(t,e){return t.some(n=>n.isEqual(e))}var ed=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Vy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(av("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Vy=class extends ed{data(){return super.data()}};function av(t,e){return typeof e=="string"?GC(t,e):e instanceof la?e._internalPath:e._delegate._internalPath}function zC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new D(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ha=class{},Ly=class extends ha{};function WC(t,e,...n){let r=[];e instanceof ha&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof Uy).length,a=s.filter(c=>c instanceof td).length;if(o>1||o>0&&a>0)throw new D(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var td=class t extends Ly{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return QC(e._query,n),new ci(e.firestore,e.converter,Nm(e._query,n))}_parse(e){let n=sv(e.firestore);return function(s,o,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new D(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){UT(d,l);let f=[];for(let m of d)f.push(LT(c,s,m));h={arrayValue:{values:f}}}else h=LT(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||UT(d,l),h=pL(a,o,d,l==="in"||l==="not-in");return Se.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function KC(t,e,n){let r=e,i=av("where",t);return td._create(i,r,n)}var Uy=class t extends ha{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)QC(o,c),o=Nm(o,c)}(e._query,n),new ci(e.firestore,e.converter,Nm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function LT(t,e,n){if(typeof(n=ft(n))=="string"){if(n==="")throw new D(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!QT(e)&&n.indexOf("/")!==-1)throw new D(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(me.fromString(n));if(!A.isDocumentKey(r))throw new D(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dT(t,new A(r))}if(n instanceof lt)return dT(t,n._key);throw new D(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(n)}.`)}function UT(t,e){if(!Array.isArray(t)||t.length===0)throw new D(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QC(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new D(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new D(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var jy=class{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw N()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ts(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new da(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=qy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(na(e));default:return null}}convertTimestamp(e){let n=dr(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=me.fromString(e);he(mC(r));let i=new Nl(r.get(1),r.get(3)),s=new A(r.popFirst(5));return i.isEqual(n)||yn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function YC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Xr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nd=class extends ed{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(av("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},ls=class extends nd{data(e={}){return super.data(e)}},rd=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ls(this._firestore,this._userDataWriter,r.key,r,new Xr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new D(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ls(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ls(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Xr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:vL(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function vL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return N()}}var fa=class extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new lt(this.firestore,null,n)}};function JC(t){t=mn(t,ci);let e=mn(t.firestore,Bn),n=iv(e),r=new fa(e);return zC(t._query),dL(n,t._query).then(i=>new rd(e,r,t,i))}function ZC(t,e,n){t=mn(t,lt);let r=mn(t.firestore,Bn),i=YC(t.converter,e,n);return cv(r,[BC(sv(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ln.none())])}function XC(t){return cv(mn(t.firestore,Bn),[new ia(t._key,Ln.none())])}function eb(t,e){let n=mn(t.firestore,Bn),r=rv(t),i=YC(t.converter,e);return cv(n,[BC(sv(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ln.exists(!1))]).then(()=>r)}function dd(t,...e){var n,r,i;t=ft(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||VT(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(VT(e[o])){let d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(t instanceof lt)u=mn(t.firestore,Bn),l=Ky(t._key.path),c={next:d=>{e[o]&&e[o](_L(u,t,d))},error:e[o+1],complete:e[o+2]};else{let d=mn(t,ci);u=mn(d.firestore,Bn),l=d._query;let h=new fa(u);c={next:f=>{e[o]&&e[o](new rd(u,h,d,f))},error:e[o+1],complete:e[o+2]},zC(t._query)}return function(h,f,m,v){let _=new Yl(v),C=new zl(f,_,m);return h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return CC(yield xy(h),C)})),()=>{_.Qa(),h.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return bC(yield xy(h),C)}))}}(iv(u),l,a,c)}function cv(t,e){return function(r,i){let s=new Ht;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return eL(yield lL(r),i,s)})),s.promise}(iv(t),e)}function _L(t,e,n){let r=n.docs.get(e._key),i=new fa(t);return new nd(t,i,e._key,r,new Xr(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ds=i})(Yi),or(new St("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Bn(new cm(r.getProvider("auth-internal")),new hm(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new D(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nl(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ke(aT,"4.5.0",e),ke(aT,"4.5.0","esm2017")})();var hd=function(){return hd=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hd.apply(this,arguments)};var EL={includeMetadataChanges:!1};function tb(t,e){return e===void 0&&(e=EL),new z(function(n){var r=dd(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function nb(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:hd(hd({},r),(n={},n[e.idField]=t.id,n))}function rb(t){return tb(t,{includeMetadataChanges:!0}).pipe(B(function(e){return e.docs}))}function ib(t,e){return e===void 0&&(e={}),rb(t).pipe(B(function(n){return n.map(function(r){return nb(r,e)})}))}var zt=class{constructor(e){return e}},sb="firestore",uv=class{constructor(){return wo(sb)}};var lv=new M("angularfire2.firestore-instances");function DL(t,e){let n=Yp(sb,t,e);return n&&new zt(n)}function TL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zt(r)}}var CL={provide:uv,deps:[[new Ct,lv]]},bL={provide:zt,useFactory:DL,deps:[[new Ct,lv],$r]},SL=(()=>{class t{constructor(){ke("angularfire",Zi.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Et({type:t});static \u0275inj=Tt({providers:[bL,CL]})}return t})();function ob(t,...e){return{ngModule:SL,providers:[{provide:lv,useFactory:TL(t),multi:!0,deps:[ie,ct,Eo,Do,[new Ct,Gu],[new Ct,Io],...e]}]}}var ab=tt(ib,!0);var fd=tt(eb,!0);var $n=tt(VC,!0);var bs=tt(XC,!0);var li=tt(rv,!0);var cb=tt(JC,!0);var ub=tt(LC,!0);var lb=tt(dd,!0);var pd=tt(WC,!0);var db=tt(ZC,!0);var gd=tt(KC,!0);var U="primary",Pa=Symbol("RouteTitle"),gv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ns(t){return new gv(t)}function AL(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function RL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!_n(t[n],e[n]))return!1;return!0}function _n(t,e){let n=t?mv(t):void 0,r=e?mv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Ib(t[i],e[i]))return!1;return!0}function mv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Ib(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function wb(t){return t.length>0?t[t.length-1]:null}function vr(t){return gh(t)?t:Vr(t)?ge(Promise.resolve(t)):x(t)}var ML={exact:Db,subset:Tb},Eb={exact:NL,subset:xL,ignored:()=>!0};function hb(t,e,n){return ML[n.paths](t.root,e.root,n.matrixParams)&&Eb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function NL(t,e){return _n(t,e)}function Db(t,e,n){if(!hi(t.segments,e.segments)||!vd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Db(t.children[r],e.children[r],n))return!1;return!0}function xL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ib(t[n],e[n]))}function Tb(t,e,n){return Cb(t,e,e.segments,n)}function Cb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!hi(i,n)||e.hasChildren()||!vd(i,n,r))}else if(t.segments.length===n.length){if(!hi(t.segments,n)||!vd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Tb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!hi(t.segments,i)||!vd(t.segments,i,r)||!t.children[U]?!1:Cb(t.children[U],e,s,r)}}function vd(t,e,n){return e.every((r,i)=>Eb[n](t[i].parameters,r.parameters))}var gr=class{constructor(e=new re([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ns(this.queryParams),this._queryParamMap}toString(){return kL.serialize(this)}},re=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _d(this)}},di=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ns(this.parameters),this._parameterMap}toString(){return Sb(this)}};function PL(t,e){return hi(t,e)&&t.every((n,r)=>_n(n.parameters,e[r].parameters))}function hi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function OL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===U&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==U&&(n=n.concat(e(i,r)))}),n}var Oa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>new Ta,providedIn:"root"});let t=e;return t})(),Ta=class{parse(e){let n=new vv(e);return new gr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${va(e.root,!0)}`,r=LL(e.queryParams),i=typeof e.fragment=="string"?`#${FL(e.fragment)}`:"";return`${n}${r}${i}`}},kL=new Ta;function _d(t){return t.segments.map(e=>Sb(e)).join("/")}function va(t,e){if(!t.hasChildren())return _d(t);if(e){let n=t.children[U]?va(t.children[U],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==U&&r.push(`${i}:${va(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=OL(t,(r,i)=>i===U?[va(t.children[U],!1)]:[`${i}:${va(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[U]!=null?`${_d(t)}/${n[0]}`:`${_d(t)}/(${n.join("//")})`}}function bb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function md(t){return bb(t).replace(/%3B/gi,";")}function FL(t){return encodeURI(t)}function yv(t){return bb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Id(t){return decodeURIComponent(t)}function fb(t){return Id(t.replace(/\+/g,"%20"))}function Sb(t){return`${yv(t.path)}${VL(t.parameters)}`}function VL(t){return Object.entries(t).map(([e,n])=>`;${yv(e)}=${yv(n)}`).join("")}function LL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${md(n)}=${md(i)}`).join("&"):`${md(n)}=${md(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var UL=/^[^\/()?;#]+/;function dv(t){let e=t.match(UL);return e?e[0]:""}var jL=/^[^\/()?;=#]+/;function BL(t){let e=t.match(jL);return e?e[0]:""}var $L=/^[^=?&#]+/;function HL(t){let e=t.match($L);return e?e[0]:""}var qL=/^[^&#]+/;function GL(t){let e=t.match(qL);return e?e[0]:""}var vv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new re([],{}):new re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[U]=new re(e,n)),r}parseSegment(){let e=dv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(e),new di(Id(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=BL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=dv(this.remaining);i&&(r=i,this.capture(r))}e[Id(n)]=Id(r)}parseQueryParam(e){let n=HL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=GL(this.remaining);o&&(r=o,this.capture(r))}let i=fb(n),s=fb(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=dv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new b(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=U);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[U]:new re([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new b(4011,!1)}};function Ab(t){return t.segments.length>0?new re([],{[U]:t}):t}function Rb(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Rb(i);if(r===U&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new re(t.segments,e);return zL(n)}function zL(t){if(t.numberOfChildren===1&&t.children[U]){let e=t.children[U];return new re(t.segments.concat(e.segments),e.children)}return t}function xs(t){return t instanceof gr}function WL(t,e,n=null,r=null){let i=Mb(t);return Nb(i,e,n,r)}function Mb(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new re(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=Ab(r);return e??i}function Nb(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return hv(i,i,i,n,r);let s=KL(e);if(s.toRoot())return hv(i,i,new re([],{}),n,r);let o=QL(s,i,t),a=o.processChildren?wa(o.segmentGroup,o.index,s.commands):Pb(o.segmentGroup,o.index,s.commands);return hv(i,o.segmentGroup,a,n,r)}function wd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ca(t){return typeof t=="object"&&t!=null&&t.outlets}function hv(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=xb(t,e,n);let a=Ab(Rb(o));return new gr(a,s,i)}function xb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=xb(s,e,n)}),new re(t.segments,r)}var Ed=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&wd(r[0]))throw new b(4003,!1);let i=r.find(Ca);if(i&&i!==wb(r))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function KL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ed(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ed(n,e,r)}var Rs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function QL(t,e,n){if(t.isAbsolute)return new Rs(e,!0,0);if(!n)return new Rs(e,!1,NaN);if(n.parent===null)return new Rs(n,!0,0);let r=wd(t.commands[0])?0:1,i=n.segments.length-1+r;return YL(n,i,t.numberOfDoubleDots)}function YL(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new b(4005,!1);i=r.segments.length}return new Rs(r,!1,i-s)}function JL(t){return Ca(t[0])?t[0].outlets:{[U]:t}}function Pb(t,e,n){if(t??=new re([],{}),t.segments.length===0&&t.hasChildren())return wa(t,e,n);let r=ZL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new re(t.segments.slice(0,r.pathIndex),{});return s.children[U]=new re(t.segments.slice(r.pathIndex),t.children),wa(s,0,i)}else return r.match&&i.length===0?new re(t.segments,{}):r.match&&!t.hasChildren()?_v(t,e,n):r.match?wa(t,0,i):_v(t,e,n)}function wa(t,e,n){if(n.length===0)return new re(t.segments,{});{let r=JL(n),i={};if(Object.keys(r).some(s=>s!==U)&&t.children[U]&&t.numberOfChildren===1&&t.children[U].segments.length===0){let s=wa(t.children[U],e,n);return new re(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Pb(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new re(t.segments,i)}}function ZL(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ca(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!gb(c,u,o))return s;r+=2}else{if(!gb(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function _v(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ca(s)){let c=XL(s.outlets);return new re(r,c)}if(i===0&&wd(n[0])){let c=t.segments[e];r.push(new di(c.path,pb(n[0]))),i++;continue}let o=Ca(s)?s.outlets[U]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&wd(a)?(r.push(new di(o,pb(a))),i+=2):(r.push(new di(o,{})),i++)}return new re(r,{})}function XL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=_v(new re([],{}),0,r))}),e}function pb(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function gb(t,e,n){return t==n.path&&_n(e,n.parameters)}var Ea="imperative",Ue=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ue||{}),Mt=class{constructor(e,n){this.id=e,this.url=n}},Ps=class extends Mt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ue.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},In=class extends Mt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ue.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Rt||{}),Dd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Dd||{}),mr=class extends Mt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ue.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yr=class extends Mt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ue.NavigationSkipped}},ba=class extends Mt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ue.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Td=class extends Mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iv=class extends Mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wv=class extends Mt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ue.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ev=class extends Mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dv=class extends Mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ue.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tv=class{constructor(e){this.route=e,this.type=Ue.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cv=class{constructor(e){this.route=e,this.type=Ue.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bv=class{constructor(e){this.snapshot=e,this.type=Ue.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sv=class{constructor(e){this.snapshot=e,this.type=Ue.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Av=class{constructor(e){this.snapshot=e,this.type=Ue.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rv=class{constructor(e){this.snapshot=e,this.type=Ue.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cd=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Ue.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sa=class{},Aa=class{constructor(e){this.url=e}};var Mv=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ka,this.attachRef=null}},ka=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Mv,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Nv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Nv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=xv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return xv(e,this._root).map(n=>n.value)}};function Nv(t,e){if(t===e.value)return e;for(let n of e.children){let r=Nv(t,n);if(r)return r}return null}function xv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=xv(t,n);if(r.length)return r.unshift(e),r}return[]}var mt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function As(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Sd=class extends bd{constructor(e,n){super(e),this.snapshot=n,$v(this,e)}toString(){return this.snapshot.toString()}};function Ob(t){let e=eU(t),n=new je([new di("",{})]),r=new je({}),i=new je({}),s=new je({}),o=new je(""),a=new Nt(n,r,s,o,i,U,t,e.root);return a.snapshot=e.root,new Sd(new mt(a,[]),e)}function eU(t){let e={},n={},r={},i="",s=new Ra([],e,r,i,n,U,t,null,{});return new Ad("",new mt(s,[]))}var Nt=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(u=>u[Pa]))??x(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>Ns(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>Ns(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Bv(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:T(T({},e.params),t.params),data:T(T({},e.data),t.data),resolve:T(T(T(T({},t.data),e.data),i?.data),t._resolvedData)}:r={params:T({},t.params),data:T({},t.data),resolve:T(T({},t.data),t._resolvedData??{})},i&&Fb(i)&&(r.resolve[Pa]=i.title),r}var Ra=class{get title(){return this.data?.[Pa]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ns(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ns(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ad=class extends bd{constructor(e,n){super(n),this.url=e,$v(this,n)}toString(){return kb(this._root)}};function $v(t,e){e.value._routerState=t,e.children.forEach(n=>$v(t,n))}function kb(t){let e=t.children.length>0?` { ${t.children.map(kb).join(", ")} } `:"";return`${t.value}${e}`}function fv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,_n(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),_n(e.params,n.params)||t.paramsSubject.next(n.params),RL(e.url,n.url)||t.urlSubject.next(n.url),_n(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Pv(t,e){let n=_n(t.params,e.params)&&PL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Pv(t.parent,e.parent))}function Fb(t){return typeof t.title=="string"||t.title===null}var Hv=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=U,this.activateEvents=new Pe,this.deactivateEvents=new Pe,this.attachEvents=new Pe,this.detachEvents=new Pe,this.parentContexts=I(ka),this.location=I(co),this.changeDetector=I(Lt),this.environmentInjector=I(dt),this.inputBinder=I(xd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new b(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Ov(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$e({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[sn]});let t=e;return t})(),Ov=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Nt?this.route:e===ka?this.childContexts:this.parent.get(e,n)}},xd=new M(""),mb=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Hs([i.queryParams,i.params,i.data]).pipe(vt(([o,a,c],u)=>(c=T(T(T({},o),a),c),u===0?x(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=xE(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function tU(t,e,n){let r=Ma(t,e._root,n?n._root:void 0);return new Sd(r,e)}function Ma(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=nU(t,e,n);return new mt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ma(t,a)),o}}let r=rU(e.value),i=e.children.map(s=>Ma(t,s));return new mt(r,i)}}function nU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ma(t,r,i);return Ma(t,r)})}function rU(t){return new Nt(new je(t.url),new je(t.params),new je(t.queryParams),new je(t.fragment),new je(t.data),t.outlet,t.component,t)}var Vb="ngNavigationCancelingError";function Lb(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=xs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ub(!1,Rt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Ub(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Vb]=!0,n.cancellationCode=e,n}function iU(t){return jb(t)&&xs(t.url)}function jb(t){return!!t&&t[Vb]}var sU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nn({type:e,selectors:[["ng-component"]],standalone:!0,features:[on],decls:1,vars:0,template:function(i,s){i&1&&Oe(0,"router-outlet")},dependencies:[Hv],encapsulation:2});let t=e;return t})();function oU(t,e){return t.providers&&!t._injector&&(t._injector=hu(t.providers,e,`Route: ${t.path}`)),t._injector??e}function qv(t){let e=t.children&&t.children.map(qv),n=e?ae(T({},t),{children:e}):T({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==U&&(n.component=sU),n}function wn(t){return t.outlet||U}function aU(t,e){let n=t.filter(r=>wn(r)===e);return n.push(...t.filter(r=>wn(r)!==e)),n}function Fa(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var cU=(t,e,n,r)=>B(i=>(new kv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),kv=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),fv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=As(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=As(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=As(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=As(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Rv(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Sv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(fv(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),fv(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Fa(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Rd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ms=class{constructor(e,n){this.component=e,this.route=n}};function uU(t,e,n){let r=t._root,i=e?e._root:null;return _a(r,i,n,[r.value])}function lU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ks(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!nw(t)?t:e.get(t):r}function _a(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=As(e);return t.children.forEach(o=>{dU(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Da(a,n.getContext(o),i)),i}function dU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=hU(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Rd(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_a(t,e,a?a.children:null,r,i):_a(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ms(a.outlet.component,o))}else o&&Da(e,a,i),i.canActivateChecks.push(new Rd(r)),s.component?_a(t,null,a?a.children:null,r,i):_a(t,null,n,r,i);return i}function hU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!hi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!hi(t.url,e.url)||!_n(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pv(t,e)||!_n(t.queryParams,e.queryParams);case"paramsChange":default:return!Pv(t,e)}}function Da(t,e,n){let r=As(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Da(o,e.children.getContext(s),n):Da(o,null,n):Da(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ms(e.outlet.component,i)):n.canDeactivateChecks.push(new Ms(null,i)):n.canDeactivateChecks.push(new Ms(null,i))}function Va(t){return typeof t=="function"}function fU(t){return typeof t=="boolean"}function pU(t){return t&&Va(t.canLoad)}function gU(t){return t&&Va(t.canActivate)}function mU(t){return t&&Va(t.canActivateChild)}function yU(t){return t&&Va(t.canDeactivate)}function vU(t){return t&&Va(t.canMatch)}function Bb(t){return t instanceof Dn||t?.name==="EmptyError"}var yd=Symbol("INITIAL_VALUE");function Os(){return vt(t=>Hs(t.map(e=>e.pipe(Tn(1),vc(yd)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===yd)return yd;if(n===!1||n instanceof gr)return n}return!0}),Be(e=>e!==yd),Tn(1)))}function _U(t,e){return De(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?x(ae(T({},n),{guardsResult:!0})):IU(o,r,i,t).pipe(De(a=>a&&fU(a)?wU(r,s,t,e):x(a)),B(a=>ae(T({},n),{guardsResult:a})))})}function IU(t,e,n,r){return ge(t).pipe(De(i=>bU(i.component,i.route,n,e,r)),Qt(i=>i!==!0,!0))}function wU(t,e,n,r){return ge(e).pipe(Tr(i=>Si(DU(i.route.parent,r),EU(i.route,r),CU(t,i.path,n),TU(t,i.route,n))),Qt(i=>i!==!0,!0))}function EU(t,e){return t!==null&&e&&e(new Av(t)),x(!0)}function DU(t,e){return t!==null&&e&&e(new bv(t)),x(!0)}function TU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return x(!0);let i=r.map(s=>pc(()=>{let o=Fa(e)??n,a=ks(s,o),c=gU(a)?a.canActivate(e,t):tr(o,()=>a(e,t));return vr(c).pipe(Qt())}));return x(i).pipe(Os())}function CU(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>lU(o)).filter(o=>o!==null).map(o=>pc(()=>{let a=o.guards.map(c=>{let u=Fa(o.node)??n,l=ks(c,u),d=mU(l)?l.canActivateChild(r,t):tr(u,()=>l(r,t));return vr(d).pipe(Qt())});return x(a).pipe(Os())}));return x(s).pipe(Os())}function bU(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return x(!0);let o=s.map(a=>{let c=Fa(e)??i,u=ks(a,c),l=yU(u)?u.canDeactivate(t,e,n,r):tr(c,()=>u(t,e,n,r));return vr(l).pipe(Qt())});return x(o).pipe(Os())}function SU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return x(!0);let s=i.map(o=>{let a=ks(o,t),c=pU(a)?a.canLoad(e,n):tr(t,()=>a(e,n));return vr(c)});return x(s).pipe(Os(),$b(r))}function $b(t){return Qa(Te(e=>{if(xs(e))throw Lb(t,e)}),B(e=>e===!0))}function AU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return x(!0);let s=i.map(o=>{let a=ks(o,t),c=vU(a)?a.canMatch(e,n):tr(t,()=>a(e,n));return vr(c)});return x(s).pipe(Os(),$b(r))}var Na=class{constructor(e){this.segmentGroup=e||null}},Md=class extends Error{constructor(e){super(),this.urlTree=e}};function Ss(t){return Ci(new Na(t))}function RU(t){return Ci(new b(4e3,!1))}function MU(t){return Ci(Ub(!1,Rt.GuardRejected))}var Fv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return x(r);if(i.numberOfChildren>1||!i.children[U])return RU(e.redirectTo);i=i.children[U]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Md(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new gr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new re(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new b(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Vv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NU(t,e,n,r,i){let s=Gv(t,e,n);return s.matched?(r=oU(e,r),AU(r,e,n,i).pipe(B(o=>o===!0?s:T({},Vv)))):x(s)}function Gv(t,e,n){if(e.path==="**")return xU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?T({},Vv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||AL)(n,t,e);if(!i)return T({},Vv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?T(T({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xU(t){return{matched:!0,parameters:t.length>0?wb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function yb(t,e,n,r){return n.length>0&&kU(t,n,r)?{segmentGroup:new re(e,OU(r,new re(n,t.children))),slicedSegments:[]}:n.length===0&&FU(t,n,r)?{segmentGroup:new re(t.segments,PU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new re(t.segments,t.children),slicedSegments:n}}function PU(t,e,n,r){let i={};for(let s of n)if(Pd(t,e,s)&&!r[wn(s)]){let o=new re([],{});i[wn(s)]=o}return T(T({},r),i)}function OU(t,e){let n={};n[U]=e;for(let r of t)if(r.path===""&&wn(r)!==U){let i=new re([],{});n[wn(r)]=i}return n}function kU(t,e,n){return n.some(r=>Pd(t,e,r)&&wn(r)!==U)}function FU(t,e,n){return n.some(r=>Pd(t,e,r))}function Pd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function VU(t,e,n,r){return wn(t)!==r&&(r===U||!Pd(e,n,t))?!1:Gv(e,t,n).matched}function LU(t,e,n){return e.length===0&&!t.children[n]}var Lv=class{};function UU(t,e,n,r,i,s,o="emptyOnly"){return new Uv(t,e,n,r,i,o,s).recognize()}var jU=31,Uv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Fv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new b(4002,`'${e.segmentGroup}'`)}recognize(){let e=yb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(n=>{let r=new Ra([],Object.freeze({}),Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,{},U,this.rootComponentType,null,{}),i=new mt(r,n),s=new Ad("",i),o=WL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,U).pipe(zn(r=>{if(r instanceof Md)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Na?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Bv(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(B(s=>s instanceof mt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ge(i).pipe(Tr(s=>{let o=r.children[s],a=aU(n,s);return this.processSegmentGroup(e,a,o,s)}),yc((s,o)=>(s.push(...o),s)),Wn(null),vh(),De(s=>{if(s===null)return Ss(r);let o=Hb(s);return BU(o),x(o)}))}processSegment(e,n,r,i,s,o){return ge(n).pipe(Tr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(zn(c=>{if(c instanceof Na)return x(null);throw c}))),Qt(a=>!!a),zn(a=>{if(Bb(a))return LU(r,i,s)?x(new Lv):Ss(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return VU(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ss(i):Ss(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=Gv(n,i,s);if(!a)return Ss(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jU&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(De(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=NU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(vt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(vt(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Ra(l,h,Object.freeze(T({},this.urlTree.queryParams)),this.urlTree.fragment,HU(r),wn(r),r.component??r._loadedComponent??null,r,qU(r)),{segmentGroup:m,slicedSegments:v}=yb(n,l,d,c);if(v.length===0&&m.hasChildren())return this.processChildren(u,c,m).pipe(B(C=>C===null?null:new mt(f,C)));if(c.length===0&&v.length===0)return x(new mt(f,[]));let _=wn(r)===s;return this.processSegment(u,c,m,v,_?U:s,!0).pipe(B(C=>new mt(f,C instanceof mt?[C]:[])))}))):Ss(n)))}getChildConfig(e,n,r){return n.children?x({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?x({routes:n._loadedRoutes,injector:n._loadedInjector}):SU(e,n,r,this.urlSerializer).pipe(De(i=>i?this.configLoader.loadChildren(e,n).pipe(Te(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):MU(n))):x({routes:[],injector:e})}};function BU(t){t.sort((e,n)=>e.value.outlet===U?-1:n.value.outlet===U?1:e.value.outlet.localeCompare(n.value.outlet))}function $U(t){let e=t.value.routeConfig;return e&&e.path===""}function Hb(t){let e=[],n=new Set;for(let r of t){if(!$U(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Hb(r.children);e.push(new mt(r.value,i))}return e.filter(r=>!n.has(r))}function HU(t){return t.data||{}}function qU(t){return t.resolve||{}}function GU(t,e,n,r,i,s){return De(o=>UU(t,e,n,r,o.extractedUrl,i,s).pipe(B(({state:a,tree:c})=>ae(T({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function zU(t,e){return De(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return x(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of qb(c))o.add(u);let a=0;return ge(o).pipe(Tr(c=>s.has(c)?WU(c,r,t,e):(c.data=Bv(c,c.parent,t).resolve,x(void 0))),Te(()=>a++),Ai(1),De(c=>a===o.size?x(n):yt))})}function qb(t){let e=t.children.map(n=>qb(n)).flat();return[t,...e]}function WU(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Fb(i)&&(s[Pa]=i.title),KU(s,t,e,r).pipe(B(o=>(t._resolvedData=o,t.data=Bv(t,t.parent,n).resolve,null)))}function KU(t,e,n,r){let i=mv(t);if(i.length===0)return x({});let s={};return ge(i).pipe(De(o=>QU(t[o],e,n,r).pipe(Qt(),Te(a=>{s[o]=a}))),Ai(1),yh(s),zn(o=>Bb(o)?yt:Ci(o)))}function QU(t,e,n,r){let i=Fa(e)??r,s=ks(t,i),o=s.resolve?s.resolve(e,n):tr(i,()=>s(e,n));return vr(o)}function pv(t){return vt(e=>{let n=t(e);return n?ge(n).pipe(B(()=>e)):x(e)})}var Gb=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===U);return i}getResolvedTitleForRoute(r){return r.data[Pa]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>I(YU),providedIn:"root"});let t=e;return t})(),YU=(()=>{let e=class e extends Gb{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(O(JE))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),La=new M("",{providedIn:"root",factory:()=>({})}),xa=new M(""),zv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(_u)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return x(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=vr(r.loadComponent()).pipe(B(zb),Te(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Gs(()=>{this.componentLoaders.delete(r)})),s=new wi(i,()=>new it).pipe(Ii());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return x({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=JU(i,this.compiler,r,this.onLoadEndListener).pipe(Gs(()=>{this.childrenLoaders.delete(i)})),a=new wi(o,()=>new it).pipe(Ii());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JU(t,e,n,r){return vr(t.loadChildren()).pipe(B(zb),De(i=>i instanceof to||Array.isArray(i)?x(i):ge(e.compileModuleAsync(i))),B(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(xa,[],{optional:!0,self:!0}).flat()),{routes:o.map(qv),injector:s}}))}function ZU(t){return t&&typeof t=="object"&&"default"in t}function zb(t){return ZU(t)?t.default:t}var Wv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>I(XU),providedIn:"root"});let t=e;return t})(),XU=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Wb=new M(""),Kb=new M("");function e2(t,e,n){let r=t.get(Kb),i=t.get(ut);return t.get(ie).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),t2(t))),{onViewTransitionCreated:c}=r;return c&&tr(t,()=>c({transition:a,from:e,to:n})),o})}function t2(t){return new Promise(e=>{sp(e,{injector:t})})}var Kv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new it,this.transitionAbortSubject=new it,this.configLoader=I(zv),this.environmentInjector=I(dt),this.urlSerializer=I(Oa),this.rootContexts=I(ka),this.location=I(Ki),this.inputBindingEnabled=I(xd,{optional:!0})!==null,this.titleStrategy=I(Gb),this.options=I(La,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(Wv),this.createViewTransition=I(Wb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>x(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Tv(s)),i=s=>this.events.next(new Cv(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ae(T(T({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new je({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ea,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Be(o=>o.id!==0),B(o=>ae(T({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),vt(o=>{this.currentTransition=o;let a=!1,c=!1;return x(o).pipe(Te(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ae(T({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),vt(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new yr(u.id,this.urlSerializer.serialize(u.rawUrl),h,Dd.IgnoredSameUrlNavigation)),u.resolve(null),yt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return x(u).pipe(vt(h=>{let f=this.transitions?.getValue();return this.events.next(new Ps(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?yt:Promise.resolve(h)}),GU(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Te(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ae(T({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Td(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:v,extras:_}=u,C=new Ps(h,this.urlSerializer.serialize(f),m,v);this.events.next(C);let Z=Ob(this.rootComponentType).snapshot;return this.currentTransition=o=ae(T({},u),{targetSnapshot:Z,urlAfterRedirects:f,extras:ae(T({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,x(o)}else{let h="";return this.events.next(new yr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Dd.IgnoredByUrlHandlingStrategy)),u.resolve(null),yt}}),Te(u=>{let l=new Iv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),B(u=>(this.currentTransition=o=ae(T({},u),{guards:uU(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),_U(this.environmentInjector,u=>this.events.next(u)),Te(u=>{if(o.guardsResult=u.guardsResult,xs(u.guardsResult))throw Lb(this.urlSerializer,u.guardsResult);let l=new wv(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Be(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Rt.GuardRejected),!1)),pv(u=>{if(u.guards.canActivateChecks.length)return x(u).pipe(Te(l=>{let d=new Ev(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),vt(l=>{let d=!1;return x(l).pipe(zU(this.paramsInheritanceStrategy,this.environmentInjector),Te({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Rt.NoDataFromResolver)}}))}),Te(l=>{let d=new Dv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),pv(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Te(f=>{d.component=f}),B(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Hs(l(u.targetSnapshot.root)).pipe(Wn(null),Tn(1))}),pv(()=>this.afterPreactivation()),vt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?ge(d).pipe(B(()=>o)):x(o)}),B(u=>{let l=tU(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ae(T({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Te(()=>{this.events.next(new Sa)}),cU(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Tn(1),Te({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new In(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),_h(this.transitionAbortSubject.pipe(Te(u=>{throw u}))),Gs(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Rt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),zn(u=>{if(c=!0,jb(u))this.events.next(new mr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),iU(u)?this.events.next(new Aa(u.url)):o.resolve(!1);else{this.events.next(new ba(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return yt}))}))}cancelNavigationTransition(r,i,s){let o=new mr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function n2(t){return t!==Ea}var r2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>I(i2),providedIn:"root"});let t=e;return t})(),jv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},i2=(()=>{let e=class e extends jv{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=oo(e)))(s||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:()=>I(s2),providedIn:"root"});let t=e;return t})(),s2=(()=>{let e=class e extends Qb{constructor(){super(...arguments),this.location=I(Ki),this.urlSerializer=I(Oa),this.options=I(La,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(Wv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ob(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ps)this.stateMemento=this.createStateMemento();else if(r instanceof yr)this.rawUrlTree=i.initialUrl;else if(r instanceof Td){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Sa?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof mr&&(r.code===Rt.GuardRejected||r.code===Rt.NoDataFromResolver)?this.restoreHistory(i):r instanceof ba?this.restoreHistory(i,!0):r instanceof In&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=T(T({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=T(T({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=oo(e)))(s||e)}})(),e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ia=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ia||{});function Yb(t,e){t.events.pipe(Be(n=>n instanceof In||n instanceof mr||n instanceof ba||n instanceof yr),B(n=>n instanceof In||n instanceof yr?Ia.COMPLETE:(n instanceof mr?n.code===Rt.Redirect||n.code===Rt.SupersededByNewNavigation:!1)?Ia.REDIRECTING:Ia.FAILED),Be(n=>n!==Ia.REDIRECTING),Tn(1)).subscribe(()=>{e()})}function o2(t){throw t}var a2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},c2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Wt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(mu),this.stateManager=I(Qb),this.options=I(La,{optional:!0})||{},this.pendingTasks=I(fu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(Kv),this.urlSerializer=I(Oa),this.location=I(Ki),this.urlHandlingStrategy=I(Wv),this._events=new it,this.errorHandler=this.options.errorHandler||o2,this.navigated=!1,this.routeReuseStrategy=I(r2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(xa,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(xd,{optional:!0}),this.eventsSubscription=new we,this.isNgZoneEnabled=I(ie)instanceof ie&&ie.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof mr&&i.code!==Rt.Redirect&&i.code!==Rt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof In)this.navigated=!0;else if(i instanceof Aa){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||n2(s.source)};this.scheduleNavigation(a,Ea,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}l2(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ea,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=T({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(qv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=T(T({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=Mb(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return Nb(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=xs(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ea,null,i)}navigate(r,i={skipLocationChange:!1}){return u2(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=T({},a2):i===!1?s=T({},c2):s=i,xs(r))return hb(this.currentUrlTree,r,s);let o=this.parseUrl(r);return hb(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return Yb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function u2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new b(4008,!1)}function l2(t){return!(t instanceof Sa)&&!(t instanceof Aa)}var Jb=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new it,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof In&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:kw(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(S(Wt),S(Nt),zf("tabindex"),S(nr),S(Mn),S(On))},e.\u0275dir=$e({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Me("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&pu("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[ye.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Lr],skipLocationChange:[ye.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Lr],replaceUrl:[ye.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Lr],routerLink:"routerLink"},standalone:!0,features:[ap,sn]});let t=e;return t})();var Nd=class{};var d2=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Be(r=>r instanceof In),Tr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=hu(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return ge(s).pipe(bi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=x(null);let o=s.pipe(De(a=>a===null?x(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ge([o,a]).pipe(bi())}else return o})}};e.\u0275fac=function(i){return new(i||e)(O(Wt),O(_u),O(dt),O(Nd),O(zv))},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Zb=new M(""),h2=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ps?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof In?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof yr&&r.code===Dd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Cd&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Cd(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Kw()},e.\u0275prov=R({token:e,factory:e.\u0275fac});let t=e;return t})();function Xb(t,...e){return iu([{provide:xa,multi:!0,useValue:t},[],{provide:Nt,useFactory:eS,deps:[Wt]},{provide:vu,multi:!0,useFactory:tS},e.map(n=>n.\u0275providers)])}function eS(t){return t.routerState.root}function Ua(t,e){return{\u0275kind:t,\u0275providers:e}}function tS(){let t=I(ct);return e=>{let n=t.get(ho);if(e!==n.components[0])return;let r=t.get(Wt),i=t.get(nS);t.get(Qv)===1&&r.initialNavigation(),t.get(rS,null,H.Optional)?.setUpPreloading(),t.get(Zb,null,H.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nS=new M("",{factory:()=>new it}),Qv=new M("",{providedIn:"root",factory:()=>1});function f2(){return Ua(2,[{provide:Qv,useValue:0},{provide:yu,multi:!0,deps:[ct],useFactory:e=>{let n=e.get(LE,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Wt),s=e.get(nS);Yb(i,()=>{r(!0)}),e.get(Kv).afterPreactivation=()=>(r(!0),s.closed?x(void 0):s),i.initialNavigation()}))}}])}function p2(){return Ua(3,[{provide:yu,multi:!0,useFactory:()=>{let e=I(Wt);return()=>{e.setUpLocationChangeListener()}}},{provide:Qv,useValue:2}])}var rS=new M("");function g2(t){return Ua(0,[{provide:rS,useExisting:d2},{provide:Nd,useExisting:t}])}function m2(){return Ua(8,[mb,{provide:xd,useExisting:mb}])}function y2(t){let e=[{provide:Wb,useValue:e2},{provide:Kb,useValue:T({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ua(9,e)}var vb=new M("ROUTER_FORROOT_GUARD"),v2=[Ki,{provide:Oa,useClass:Ta},Wt,ka,{provide:Nt,useFactory:eS,deps:[Wt]},zv,[]],iS=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[v2,[],{provide:xa,multi:!0,useValue:r},{provide:vb,useFactory:E2,deps:[[Wt,new Ct,new jf]]},{provide:La,useValue:i||{}},i?.useHash?I2():w2(),_2(),i?.preloadingStrategy?g2(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?D2(i):[],i?.bindToComponentInputs?m2().\u0275providers:[],i?.enableViewTransitions?y2().\u0275providers:[],T2()]}}static forChild(r){return{ngModule:e,providers:[{provide:xa,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(O(vb,8))},e.\u0275mod=Et({type:e}),e.\u0275inj=Tt({});let t=e;return t})();function _2(){return{provide:Zb,useFactory:()=>{let t=I($E),e=I(ie),n=I(La),r=I(Kv),i=I(Oa);return n.scrollOffset&&t.setOffset(n.scrollOffset),new h2(i,r,t,e,n)}}}function I2(){return{provide:On,useClass:jE}}function w2(){return{provide:On,useClass:yp}}function E2(t){return"guarded"}function D2(t){return[t.initialNavigation==="disabled"?p2().\u0275providers:[],t.initialNavigation==="enabledBlocking"?f2().\u0275providers:[]]}var _b=new M("");function T2(){return[{provide:_b,useFactory:tS},{provide:vu,multi:!0,useExisting:_b}]}var dS=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(S(nr),S(Mn))},e.\u0275dir=$e({type:e});let t=e;return t})(),hS=(()=>{let e=class e extends dS{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=oo(e)))(s||e)}})(),e.\u0275dir=$e({type:e,features:[Vt]});let t=e;return t})(),$a=new M("");var C2={provide:$a,useExisting:Nn(()=>Vs),multi:!0};function b2(){let t=Pn()?Pn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var S2=new M(""),Vs=(()=>{let e=class e extends dS{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!b2())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(S(nr),S(Mn),S(S2,8))},e.\u0275dir=$e({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Me("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Fr([C2]),Vt]});let t=e;return t})();var Gd=new M(""),zd=new M("");function fS(t){return t!=null}function pS(t){return Vr(t)?ge(t):t}function gS(t){let e={};return t.forEach(n=>{e=n!=null?T(T({},e),n):e}),Object.keys(e).length===0?null:e}function mS(t,e){return e.map(n=>n(t))}function A2(t){return!t.validate}function yS(t){return t.map(e=>A2(e)?e:n=>e.validate(n))}function R2(t){if(!t)return null;let e=t.filter(fS);return e.length==0?null:function(n){return gS(mS(n,e))}}function vS(t){return t!=null?R2(yS(t)):null}function M2(t){if(!t)return null;let e=t.filter(fS);return e.length==0?null:function(n){let r=mS(n,e).map(pS);return mh(r).pipe(B(gS))}}function _S(t){return t!=null?M2(yS(t)):null}function sS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function IS(t){return t._rawValidators}function wS(t){return t._rawAsyncValidators}function Yv(t){return t?Array.isArray(t)?t:[t]:[]}function Fd(t,e){return Array.isArray(t)?t.includes(e):t===e}function oS(t,e){let n=Yv(e);return Yv(t).forEach(i=>{Fd(n,i)||n.push(i)}),n}function aS(t,e){return Yv(e).filter(n=>!Fd(t,n))}var Vd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_S(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},fi=class extends Vd{get formDirective(){return null}get path(){return null}},En=class extends Vd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ld=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},N2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},e5=ae(T({},N2),{"[class.ng-submitted]":"isSubmitted"}),Wd=(()=>{let e=class e extends Ld{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(S(En,2))},e.\u0275dir=$e({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&kr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Vt]});let t=e;return t})(),ES=(()=>{let e=class e extends Ld{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(S(fi,10))},e.\u0275dir=$e({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&kr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Vt]});let t=e;return t})();var ja="VALID",kd="INVALID",Fs="PENDING",Ba="DISABLED";function DS(t){return(Kd(t)?t.validators:t)||null}function x2(t){return Array.isArray(t)?vS(t):t||null}function TS(t,e){return(Kd(e)?e.asyncValidators:t)||null}function P2(t){return Array.isArray(t)?_S(t):t||null}function Kd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function O2(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new b(1e3,"");if(!r[n])throw new b(1001,"")}function k2(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new b(1002,"")})}var Ud=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ja}get invalid(){return this.status===kd}get pending(){return this.status==Fs}get disabled(){return this.status===Ba}get enabled(){return this.status!==Ba}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aS(e,this._rawAsyncValidators))}hasValidator(e){return Fd(this._rawValidators,e)}hasAsyncValidator(e){return Fd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fs,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ba,this.errors=null,this._forEachChild(r=>{r.disable(ae(T({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ja,this._forEachChild(r=>{r.enable(ae(T({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(T({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ja||this.status===Fs)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ba:ja}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fs,this._hasOwnPendingAsyncValidator=!0;let n=pS(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?Ba:this.errors?kd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fs)?Fs:this._anyControlsHaveStatus(kd)?kd:ja}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Kd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=x2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=P2(this._rawAsyncValidators)}},jd=class extends Ud{constructor(e,n,r){super(DS(n),TS(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){k2(this,!0,e),Object.keys(e).forEach(r=>{O2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ls=new M("CallSetDisabledState",{providedIn:"root",factory:()=>Ha}),Ha="always";function CS(t,e){return[...e.path,t]}function Bd(t,e,n=Ha){Jv(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),V2(t,e),U2(t,e),L2(t,e),F2(t,e)}function $d(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),qd(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Hd(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function F2(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Jv(t,e){let n=IS(t);e.validator!==null?t.setValidators(sS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=wS(t);e.asyncValidator!==null?t.setAsyncValidators(sS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Hd(e._rawValidators,i),Hd(e._rawAsyncValidators,i)}function qd(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=IS(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=wS(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Hd(e._rawValidators,r),Hd(e._rawAsyncValidators,r),n}function V2(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&bS(t,e)})}function L2(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&bS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function bS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function U2(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function j2(t,e){t==null,Jv(t,e)}function B2(t,e){return qd(t,e)}function Zv(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function $2(t){return Object.getPrototypeOf(t.constructor)===hS}function H2(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Xv(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Vs?n=s:$2(s)?r=s:i=s}),i||r||n||null}function q2(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function uS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Us=class extends Ud{constructor(e=null,n,r){super(DS(n),TS(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(uS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){uS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G2=t=>t instanceof Us;var z2={provide:En,useExisting:Nn(()=>e_)},lS=Promise.resolve(),e_=(()=>{let e=class e extends En{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Us,this._registered=!1,this.name="",this.update=new Pe,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Xv(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Zv(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Bd(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){lS.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Lr(i);lS.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?CS(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(S(fi,9),S(Gd,10),S(zd,10),S($a,10),S(Lt,8),S(Ls,8))},e.\u0275dir=$e({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ye.None,"disabled","isDisabled"],model:[ye.None,"ngModel","model"],options:[ye.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fr([z2]),Vt,sn]});let t=e;return t})(),SS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=$e({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var W2={provide:$a,useExisting:Nn(()=>t_),multi:!0};var K2=(()=>{let e=class e{constructor(){this._accessors=[]}add(r,i){this._accessors.push([r,i])}remove(r){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===r){this._accessors.splice(i,1);return}}select(r){this._accessors.forEach(i=>{this._isSameGroup(i,r)&&i[1]!==r&&i[1].fireUncheck(r.value)})}_isSameGroup(r,i){return r[0].control?r[0]._parent===i._control._parent&&r[1].name===i.name:!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),t_=(()=>{let e=class e extends hS{constructor(r,i,s,o){super(r,i),this._registry=s,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=I(Ls,{optional:!0})??Ha}ngOnInit(){this._control=this._injector.get(En),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(r){this._state=r===this.value,this.setProperty("checked",this._state)}registerOnChange(r){this._fn=r,this.onChange=()=>{r(this.value),this._registry.select(this)}}setDisabledState(r){(this.setDisabledStateFired||r||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",r),this.setDisabledStateFired=!0}fireUncheck(r){this.writeValue(r)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(i){return new(i||e)(S(nr),S(Mn),S(K2),S(ct))},e.\u0275dir=$e({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(i,s){i&1&&Me("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Fr([W2]),Vt]});let t=e;return t})();var n_=new M(""),Q2={provide:En,useExisting:Nn(()=>r_)},r_=(()=>{let e=class e extends En{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new Pe,this._ngModelWarningSent=!1,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Xv(this,s)}ngOnChanges(r){if(this._isControlChanged(r)){let i=r.form.previousValue;i&&$d(i,this,!1),Bd(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Zv(r,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&$d(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_isControlChanged(r){return r.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(S(Gd,10),S(zd,10),S($a,10),S(n_,8),S(Ls,8))},e.\u0275dir=$e({type:e,selectors:[["","formControl",""]],inputs:{form:[ye.None,"formControl","form"],isDisabled:[ye.None,"disabled","isDisabled"],model:[ye.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Fr([Q2]),Vt,sn]});let t=e;return t})(),Y2={provide:fi,useExisting:Nn(()=>i_)},i_=(()=>{let e=class e extends fi{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Pe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return Bd(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){$d(r.control||null,r,!1),q2(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,H2(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&($d(i||null,r),G2(s)&&(Bd(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);j2(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&B2(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Jv(this.form,this),this._oldForm&&qd(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(S(Gd,10),S(zd,10),S(Ls,8))},e.\u0275dir=$e({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Me("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[ye.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fr([Y2]),Vt,sn]});let t=e;return t})();var J2={provide:En,useExisting:Nn(()=>s_)},s_=(()=>{let e=class e extends En{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Pe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Xv(this,o)}ngOnChanges(r){this._added||this._setUpControl(),Zv(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return CS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(S(fi,13),S(Gd,10),S(zd,10),S($a,10),S(n_,8))},e.\u0275dir=$e({type:e,selectors:[["","formControlName",""]],inputs:{name:[ye.None,"formControlName","name"],isDisabled:[ye.None,"disabled","isDisabled"],model:[ye.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Fr([J2]),Vt,sn]});let t=e;return t})();var AS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Et({type:e}),e.\u0275inj=Tt({});let t=e;return t})();var Qd=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Ls,useValue:r.callSetDisabledState??Ha}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Et({type:e}),e.\u0275inj=Tt({imports:[AS]});let t=e;return t})(),RS=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:n_,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Ls,useValue:r.callSetDisabledState??Ha}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Et({type:e}),e.\u0275inj=Tt({imports:[AS]});let t=e;return t})();var Yd,Z2=new Uint8Array(16);function o_(){if(!Yd&&(Yd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yd(Z2)}var ze=[];for(let t=0;t<256;++t)ze.push((t+256).toString(16).slice(1));function NS(t,e=0){return ze[t[e+0]]+ze[t[e+1]]+ze[t[e+2]]+ze[t[e+3]]+"-"+ze[t[e+4]]+ze[t[e+5]]+"-"+ze[t[e+6]]+ze[t[e+7]]+"-"+ze[t[e+8]]+ze[t[e+9]]+"-"+ze[t[e+10]]+ze[t[e+11]]+ze[t[e+12]]+ze[t[e+13]]+ze[t[e+14]]+ze[t[e+15]]}var X2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),a_={randomUUID:X2};function ej(t,e,n){if(a_.randomUUID&&!e&&!t)return a_.randomUUID();t=t||{};let r=t.random||(t.rng||o_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return NS(r)}var Jd=ej;function tj(t,e){if(t&1){let n=EE();q(0,"div",6)(1,"div",7),le(2),K(),q(3,"div",8)(4,"button",3),Me("click",function(){let s=Jc(n).$implicit,o=gu();return Zc(o._watchGame(s.id))}),le(5,"\u0421\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0438\u0433\u0440\u0443"),K(),q(6,"button",3),Me("click",function(){let s=Jc(n).$implicit,o=gu();return Zc(o._controlGame(s.id))}),le(7,"\u0423\u043F\u0440\u0430\u0432\u043B\u044F\u0442\u044C \u0438\u0433\u0440\u043E\u0439"),K(),q(8,"button",3),Me("click",function(){let s=Jc(n).$implicit,o=gu();return Zc(o._deleteGame(s.id))}),le(9,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0438\u0433\u0440\u0443"),K()()()}if(t&2){let n=e.$implicit;ue(2),rr(n.name)}}var xS=(()=>{let e=class e{constructor(r,i){this.router=r,this.cdr=i,this._games=[],this._gameName="",this.firestore=I(zt)}ngOnInit(){this.itemCollection=$n(this.firestore,"games"),ab(this.itemCollection,{idField:"id"}).subscribe(r=>{this._games=r,this.cdr.detectChanges()})}_createGame(){this._games.push({name:this._gameName,id:Jd()});let r=fd($n(this.firestore,"games"),{name:this._gameName,id:Jd()});console.log("Document written with ID: ",r)}_watchGame(r){this.router.navigate([`/watch-game/${r}`])}_controlGame(r){this.router.navigate([`/control-game/${r}`])}_deleteGame(r){this._games=this._games.filter(s=>s.id!==r),this.cdr.detectChanges();let i=li(this.firestore,"games",r);bs(i).then(()=>{console.log("Entire Document has been deleted successfully.")}).catch(s=>{console.log(s)})}ngOnDestroy(){}};e.\u0275fac=function(i){return new(i||e)(S(Wt),S(Lt))},e.\u0275cmp=nn({type:e,selectors:[["app-games-list"]],standalone:!0,features:[on],decls:7,vars:2,consts:[[1,"games-list-container"],[1,"game-list-create-game"],["id","inputGameName","type","text",3,"ngModel","ngModelChange"],[3,"click"],[1,"games-list"],["class","game",4,"ngFor","ngForOf"],[1,"game"],[1,"game-name"],[1,"game-actions"]],template:function(i,s){i&1&&(q(0,"div",0)(1,"div",1)(2,"input",2),up("ngModelChange",function(a){return TE(s._gameName,a)||(s._gameName=a),a}),K(),q(3,"button",3),Me("click",function(){return s._createGame()}),le(4,"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0438\u0433\u0440\u0443"),K()(),q(5,"div",4),Wi(6,tj,10,1,"div",5),K()()),i&2&&(ue(2),cp("ngModel",s._gameName),ue(4),Re("ngForOf",s._games))},dependencies:[Eu,Qd,Vs,Wd,e_],styles:[".games-list-container[_ngcontent-%COMP%]{gap:20px;padding:20px}.game[_ngcontent-%COMP%]{margin-top:10px;display:flex;gap:20px;align-items:flex-start;flex-direction:column;flex-wrap:wrap;padding:10px;border:1px solid lightgray}.game-name[_ngcontent-%COMP%]{min-width:120px}.game-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.game-list-create-game[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}"]});let t=e;return t})();function nj(t,e){if(t&1&&(q(0,"div",8),le(1),K()),t&2){let n=e.$implicit;ue(),lo(" ",n," ")}}function rj(t,e){if(t&1&&(q(0,"div",8),le(1),K()),t&2){let n=e.$implicit;ue(),lo(" ",n," ")}}var Zd=(()=>{let e=class e{constructor(r,i){this.route=r,this.cdr=i,this.firstTeamName="",this.secondTeamName="",this.firstTeamSetScore=0,this.secondTeamSetScore=0,this.firstTeamScore=[],this.secondTeamScore=[],this.set=1,this.firstTeamServing=!0,this.pure=!0,this.firestore=I(zt),this.documentId=""}ngOnInit(){this.route.params.subscribe(r=>{if(this.pure){let i=pd($n(this.firestore,"live-score"),gd("gameId","==",r.id));lb(i,s=>{s.forEach(o=>{this.documentId=o.id;let a=o.data();this.firstTeamName=a.firstTeamName,this.secondTeamName=a.secondTeamName,this.firstTeamSetScore=a.firstTeamSetScore,this.secondTeamSetScore=a.secondTeamSetScore,this.firstTeamScore=a.firstTeamScore,this.secondTeamScore=a.secondTeamScore,this.firstTeamServing=a.firstTeamServing,this.set=a.set,this.cdr.detectChanges()})})}})}ngOnDestroy(){if(this.pure)try{let r=li(this.firestore,"live-score",this.documentId);bs(r).then(()=>{console.log("Entire Document has been deleted successfully.")}).catch(i=>{console.log(i)})}catch(r){console.log(r)}}};e.\u0275fac=function(i){return new(i||e)(S(Nt),S(Lt))},e.\u0275cmp=nn({type:e,selectors:[["app-score-table"]],inputs:{firstTeamName:"firstTeamName",secondTeamName:"secondTeamName",firstTeamSetScore:"firstTeamSetScore",secondTeamSetScore:"secondTeamSetScore",firstTeamScore:"firstTeamScore",secondTeamScore:"secondTeamScore",set:"set",firstTeamServing:"firstTeamServing",pure:"pure"},standalone:!0,features:[on],decls:18,vars:10,consts:[[1,"game"],[1,"game-container"],[1,"game-container__team"],[1,"game-container__team-name"],[1,"game-container__team-serving"],[1,"game-container__team-set"],["class","game-container__team-score",4,"ngFor","ngForOf"],["id","secondTeamName"],[1,"game-container__team-score"]],template:function(i,s){i&1&&(q(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Oe(4,"div",4),q(5,"div"),le(6),K()(),q(7,"div",5),le(8),K(),Wi(9,nj,2,1,"div",6),K(),q(10,"div",2)(11,"div",3),Oe(12,"div",4),q(13,"div",7),le(14),K()(),q(15,"div",5),le(16),K(),Wi(17,rj,2,1,"div",6),K()()()),i&2&&(ue(4),kr("arrow-up",s.firstTeamServing),ue(2),rr(s.firstTeamName),ue(2),rr(s.firstTeamSetScore),ue(),Re("ngForOf",s.firstTeamScore),ue(3),kr("arrow-up",!s.firstTeamServing),ue(2),rr(s.secondTeamName),ue(2),rr(s.secondTeamSetScore),ue(),Re("ngForOf",s.secondTeamScore))},dependencies:[Eu],styles:['body[_ngcontent-%COMP%]{font-family:Arial,sans-serif;margin:0;padding:0}.game[_ngcontent-%COMP%]{padding:40px;background-color:#adff2f;min-width:80%}.game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;height:80px;width:500px;transform:skew(-10deg)}.game-container__team[_ngcontent-%COMP%]{display:flex;height:100%}.game-container__team-serving[_ngcontent-%COMP%]{width:20px}.game-container__team-name[_ngcontent-%COMP%]{min-width:250px;background-color:#00f;color:#fff;border-bottom:1px solid white;display:flex;align-items:center;justify-content:flex-start;padding-left:20px;box-shadow:0 0 2px 1px #000000bf}.arrow-up[_ngcontent-%COMP%]:before{padding-right:5px;content:"\\27a4"}.game-container__team-score[_ngcontent-%COMP%], .game-container__team-set[_ngcontent-%COMP%]{background-color:#fff;font-weight:700;width:40px;display:flex;align-items:center;justify-content:center;border:1px solid;box-shadow:0 0 2px 1px #000000bf}.game-container__team-score[_ngcontent-%COMP%]{background-color:#d9d9d9;box-shadow:0 0 2px 1px #000000bf}']});let t=e;return t})();var PS=(()=>{let e=class e{constructor(r){this.route=r,this.firstTeamName="",this.secondTeamName="",this.firstTeamSetScore=0,this.secondTeamSetScore=0,this.firstTeamScore=[0],this.secondTeamScore=[0],this.set=0,this._gameIsStarted=!1,this.firstTeamNameControl=new Us("",{nonNullable:!0}),this.secondTeamNameControl=new Us("",{nonNullable:!0}),this._servingForm=new jd({serving:new Us(!0,{nonNullable:!0})}),this.firestore=I(zt),this.gameId="",this.documentId=""}ngOnInit(){this.route.params.subscribe(i=>{this.gameId=i.id});let r=pd($n(this.firestore,"live-score"),gd("gameId","==",this.gameId));cb(r).then(i=>{i.forEach(s=>{this.documentId=s.id;let o=s.data();this.firstTeamName=o.firstTeamName,this.secondTeamName=o.secondTeamName,this.firstTeamSetScore=o.firstTeamSetScore,this.secondTeamSetScore=o.secondTeamSetScore,this.firstTeamScore=o.firstTeamScore,this.secondTeamScore=o.secondTeamScore,this._servingForm.patchValue({serving:o.firstTeamServing},{emitEvent:!1}),this.set=o.set,this._gameIsStarted=!0})}),this.firstTeamNameControl.disable(),this.secondTeamNameControl.disable(),this._servingForm.disable(),this.firstTeamNameControl.valueChanges.pipe(Be(i=>!!i),gc(500),qs()).subscribe(i=>{this.firstTeamName=i,this.updateGameInfo()}),this.secondTeamNameControl.valueChanges.pipe(Be(i=>!!i),gc(500),qs()).subscribe(i=>{this.secondTeamName=i,this.updateGameInfo()}),this._servingForm.valueChanges.subscribe(i=>{this.updateGameInfo()})}_firstTeamScorePlus(){this._servingForm.patchValue({serving:!0},{emitEvent:!1}),this.firstTeamScore[this.set]++,this.set===5?this.firstTeamScore[this.set]>=15&&this.firstTeamScore[this.set]-2>=this.secondTeamScore[this.set]&&this.firstTeamSetScore++:this.firstTeamScore[this.set]>=25&&this.firstTeamScore[this.set]-2>=this.secondTeamScore[this.set]&&(this.firstTeamSetScore++,this.set++,this.firstTeamScore[this.set]=0,this.secondTeamScore[this.set]=0),this.updateGameInfo()}_firstTeamScoreMinus(){this.firstTeamScore[this.set]--,this.updateGameInfo()}_secondTeamScorePlus(){this._servingForm.patchValue({serving:!1},{emitEvent:!1}),this.secondTeamScore[this.set]++,this.set===5?this.secondTeamScore[this.set]>=15&&this.secondTeamScore[this.set]-2>=this.firstTeamScore[this.set]&&this.secondTeamSetScore++:this.secondTeamScore[this.set]>=25&&this.secondTeamScore[this.set]-2>=this.firstTeamScore[this.set]&&(this.secondTeamSetScore++,this.set++,this.firstTeamScore[this.set]=0,this.secondTeamScore[this.set]=0),this.updateGameInfo()}_secondTeamScoreMinus(){this.secondTeamScore[this.set]--,this.updateGameInfo()}_createGame(){this.firstTeamScore=[0],this.secondTeamScore=[0],this.set=0,this.firstTeamSetScore=0,this.secondTeamSetScore=0,this.firstTeamName="",this.secondTeamName="",this.firstTeamNameControl.reset("",{emitEvent:!1}),this.secondTeamNameControl.reset("",{emitEvent:!1}),$n(this.firestore,"live-score"),fd($n(this.firestore,"live-score"),{gameId:this.gameId}).then(r=>{this.documentId=r.id}),this._gameIsStarted=!0,this._servingForm.reset({},{emitEvent:!1}),this.firstTeamNameControl.enable(),this.secondTeamNameControl.enable(),this._servingForm.enable({emitEvent:!1})}_endGame(){let r=li(this.firestore,"live-score",this.documentId);bs(r).then(()=>{console.log("Game is ended"),this._gameIsStarted=!1}).catch(i=>{console.log(i)})}updateGameInfo(){let r=li(this.firestore,"live-score",this.documentId),i={gameId:this.gameId,firstTeamScore:this.firstTeamScore,secondTeamScore:this.secondTeamScore,set:this.set,firstTeamSetScore:this.firstTeamSetScore,secondTeamSetScore:this.secondTeamSetScore,secondTeamName:this.secondTeamName,firstTeamName:this.firstTeamName,firstTeamServing:this._servingForm.getRawValue().serving};db(r,i).then(s=>{console.log("Entire Document has been updated successfully")}).catch(s=>{console.log(s)})}};e.\u0275fac=function(i){return new(i||e)(S(Nt))},e.\u0275cmp=nn({type:e,selectors:[["app-score-table-with-controls"]],standalone:!0,features:[on],decls:43,vars:20,consts:[[3,"firstTeamName","firstTeamScore","firstTeamServing","firstTeamSetScore","secondTeamName","secondTeamScore","secondTeamSetScore","set","pure"],[1,"game-controls","mt-3"],[1,""],[1,"form-group"],["for","inputFirstTeamName"],["id","inputFirstTeamName","type","text",3,"formControl"],[1,"game-controls__team-scores"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"fa","fa-minus"],[1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-plus"],["for","inputSecondTeamName"],["id","inputSecondTeamName","type","text",3,"formControl"],[3,"formGroup"],[1,"form-check"],["formControlName","serving","id","team1Radio","name","serving","type","radio",1,"form-check-input",3,"value"],["for","team1Radio",1,"form-check-label"],["formControlName","serving","id","team2Radio","name","serving","type","radio",1,"form-check-input",3,"value"],["for","team2Radio",1,"form-check-label"],[1,"game-controls__actions"]],template:function(i,s){i&1&&(Oe(0,"app-score-table",0),q(1,"div",1)(2,"div",2),le(3," 1-\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u0430: "),K(),q(4,"div",3)(5,"label",4),le(6,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B:"),K(),Oe(7,"input",5),q(8,"div",6)(9,"label"),le(10,"\u0421\u0447\u0435\u0442 \u0432 \u043F\u0430\u0440\u0442\u0438\u044F\u0445:"),K(),q(11,"button",7),Me("click",function(){return s._firstTeamScoreMinus()}),Oe(12,"i",8),K(),q(13,"button",9),Me("click",function(){return s._firstTeamScorePlus()}),Oe(14,"i",10),K()()(),q(15,"div",2),le(16," 2-\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u0430: "),K(),q(17,"div",3)(18,"label",11),le(19,"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B:"),K(),Oe(20,"input",12),q(21,"div",6)(22,"label"),le(23,"\u0421\u0447\u0435\u0442 \u0432 \u043F\u0430\u0440\u0442\u0438\u044F\u0445:"),K(),q(24,"button",7),Me("click",function(){return s._secondTeamScoreMinus()}),Oe(25,"i",8),K(),q(26,"button",9),Me("click",function(){return s._secondTeamScorePlus()}),Oe(27,"i",10),K()()(),le(28," \u041A\u0442\u043E \u043F\u043E\u0434\u0430\u0435\u0442: "),q(29,"form",13)(30,"div",14),Oe(31,"input",15),q(32,"label",16),le(33,"1-\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u0430"),K()(),q(34,"div",14),Oe(35,"input",17),q(36,"label",18),le(37,"2-\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u0430"),K()()(),q(38,"div",19)(39,"button",7),Me("click",function(){return s._createGame()}),le(40,"\u041D\u0430\u0447\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0438\u0433\u0440\u0443 "),K(),q(41,"button",9),Me("click",function(){return s._endGame()}),le(42,"\u0417\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0438\u0433\u0440\u0443"),K()()()),i&2&&(Re("firstTeamName",s.firstTeamName)("firstTeamScore",s.firstTeamScore)("firstTeamServing",s._servingForm.getRawValue().serving)("firstTeamSetScore",s.firstTeamSetScore)("secondTeamName",s.secondTeamName)("secondTeamScore",s.secondTeamScore)("secondTeamSetScore",s.secondTeamSetScore)("set",s.set)("pure",!1),ue(7),Re("formControl",s.firstTeamNameControl),ue(4),Re("disabled",!s._gameIsStarted),ue(2),Re("disabled",!s._gameIsStarted),ue(7),Re("formControl",s.secondTeamNameControl),ue(4),Re("disabled",!s._gameIsStarted),ue(2),Re("disabled",!s._gameIsStarted),ue(3),Re("formGroup",s._servingForm),ue(2),Re("value",!0),ue(4),Re("value",!1),ue(4),Re("disabled",s._gameIsStarted),ue(2),Re("disabled",!s._gameIsStarted))},dependencies:[Zd,Qd,SS,Vs,t_,Wd,ES,RS,r_,i_,s_],styles:[".form-group[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-direction:column;gap:10px}.game-controls[_ngcontent-%COMP%]{padding:20px}.game-controls__team-scores[_ngcontent-%COMP%]{display:flex;gap:4px}.game-controls__team-score[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid}input[type=number][_ngcontent-%COMP%]{width:50px}.game-controls__actions[_ngcontent-%COMP%]{padding-top:16px;display:flex;align-items:center;gap:8px;flex-direction:column}"]});let t=e;return t})();var OS=[{path:"",component:xS},{path:"watch-game/:id",component:Zd},{path:"control-game/:id",component:PS},{path:"**",redirectTo:"",pathMatch:"full"}];var kS=`'{"apiKey": "AIzaSyBEB-8XDdwBJXr5i8BGq3TYfb1p8LkGTHk","authDomain": "score-table-2ef3b.firebaseapp.com","projectId": "score-table-2ef3b","storageBucket": "score-table-2ef3b.appspot.com","messagingSenderId": "978527265236","appId": "1:978527265236:web:cb10bc887fba7ceb2f3641"}'`,FS={providers:[Xb(OS),Bf([TD(()=>CD(JSON.parse(kS))),ob(()=>ub())])]};console.log("test");console.log(kS);var VS=(()=>{let e=class e{constructor(){this.title="score-table-group-angular"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=nn({type:e,selectors:[["app-root"]],standalone:!0,features:[on],decls:3,vars:0,consts:[["routerLink","/home","type","button",1,"btn","btn-primary"]],template:function(i,s){i&1&&(q(0,"button",0),le(1,"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"),K(),Oe(2,"router-outlet"))},dependencies:[Hv,iS,Jb]});let t=e;return t})();YE(VS,FS).catch(t=>console.error(t));
